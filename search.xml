<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>tarå‘½ä»¤æ‰“åŒ…è§£å‹</title>
      <link href="/2019/11/27/tar/"/>
      <url>/2019/11/27/tar/</url>
      
        <content type="html"><![CDATA[<blockquote><p>åœ¨ç»´æŠ¤é…ç½®æœåŠ¡å™¨æ—¶ï¼Œéš¾å…ä¼šè¦ç”¨åˆ°å‹ç¼©ï¼Œè§£å‹ç¼©ï¼Œæ‰“åŒ…ï¼Œè§£åŒ…ç­‰ï¼Œè¿™æ—¶å€™<code>tar</code>å‘½ä»¤å°±æ˜¯æ˜¯å¿…ä¸å¯å°‘çš„ä¸€ä¸ªåŠŸèƒ½å¼ºå¤§çš„å·¥å…·ã€‚linuxä¸­æœ€æµè¡Œçš„<code>tar</code>æ˜¯éº»é›€è™½å°ï¼Œäº”è„ä¿±å…¨ï¼ŒåŠŸèƒ½å¼ºå¤§ã€‚<br><code>tar</code>å‘½ä»¤å¯ä»¥ä¸ºlinuxçš„æ–‡ä»¶å’Œç›®å½•åˆ›å»ºæ¡£æ¡ˆã€‚åˆ©ç”¨<code>tar</code>ï¼Œå¯ä»¥ä¸ºæŸä¸€ç‰¹å®šæ–‡ä»¶åˆ›å»ºæ¡£æ¡ˆ(å¤‡ä»½æ–‡ä»¶)ï¼Œä¹Ÿå¯ä»¥åœ¨æ¡£æ¡ˆä¸­æ”¹å˜æ–‡ä»¶ï¼Œæˆ–è€…å‘æ¡£æ¡ˆä¸­åŠ å…¥æ–°çš„æ–‡ä»¶ã€‚<code>tar</code>æœ€åˆè¢«ç”¨æ¥åœ¨ç£å¸¦ä¸Šåˆ›å»ºæ¡£æ¡ˆï¼Œç°åœ¨ï¼Œç”¨æˆ·å¯ä»¥åœ¨ä»»ä½•è®¾å¤‡ä¸Šåˆ›å»ºæ¡£æ¡ˆã€‚åˆ©ç”¨<code>tar</code>å‘½ä»¤ï¼Œå¯ä»¥æŠŠä¸€å¤§å †çš„æ–‡ä»¶å’Œç›®å½•å…¨éƒ¨æ‰“åŒ…æˆä¸€ä¸ªæ–‡ä»¶ï¼Œè¿™å¯¹äºå¤‡ä»½æ–‡ä»¶æˆ–å°†å‡ ä¸ªæ–‡ä»¶ç»„åˆæˆä¸ºä¸€ä¸ªæ–‡ä»¶ä»¥ä¾¿äºç½‘ç»œä¼ è¾“æ˜¯éå¸¸æœ‰ç”¨çš„ã€‚é¦–å…ˆè¦å¼„æ¸…ä¸¤ä¸ªæ¦‚å¿µï¼šæ‰“åŒ…å’Œå‹ç¼©ã€‚æ‰“åŒ…æ˜¯æŒ‡å°†ä¸€å¤§å †æ–‡ä»¶æˆ–ç›®å½•å˜æˆä¸€ä¸ªæ€»çš„æ–‡ä»¶ï¼›å‹ç¼©åˆ™æ˜¯å°†ä¸€ä¸ªå¤§çš„æ–‡ä»¶é€šè¿‡ä¸€äº›å‹ç¼©ç®—æ³•å˜æˆä¸€ä¸ªå°æ–‡ä»¶ã€‚<br>ä¸ºä»€ä¹ˆè¦åŒºåˆ†è¿™ä¸¤ä¸ªæ¦‚å¿µå‘¢ï¼Ÿè¿™æºäºLinuxä¸­å¾ˆå¤šå‹ç¼©ç¨‹åºåªèƒ½é’ˆå¯¹ä¸€ä¸ªæ–‡ä»¶è¿›è¡Œå‹ç¼©ï¼Œè¿™æ ·å½“ä½ æƒ³è¦å‹ç¼©ä¸€å¤§å †æ–‡ä»¶æ—¶ï¼Œä½ å¾—å…ˆå°†è¿™ä¸€å¤§å †æ–‡ä»¶å…ˆæ‰“æˆä¸€ä¸ªåŒ…(<code>tar</code>å‘½ä»¤)ï¼Œç„¶åå†ç”¨å‹ç¼©ç¨‹åºè¿›è¡Œå‹ç¼©(<code>gzip</code>, <code>bzip2</code>å‘½ä»¤)ã€‚<br>linuxä¸‹æœ€å¸¸ç”¨çš„æ‰“åŒ…ç¨‹åºå°±æ˜¯<code>tar</code>äº†ï¼Œä½¿ç”¨tarç¨‹åºæ‰“å‡ºæ¥çš„åŒ…æˆ‘ä»¬å¸¸ç§°ä¸º<code>tar</code>åŒ…ï¼Œ<code>tar</code>åŒ…æ–‡ä»¶çš„å‘½ä»¤é€šå¸¸éƒ½æ˜¯ä»¥<code>.tar</code>ç»“å°¾çš„ã€‚ç”Ÿæˆ<code>tar</code>åŒ…åï¼Œå°±å¯ä»¥ç”¨å…¶å®ƒçš„ç¨‹åºæ¥è¿›è¡Œå‹ç¼©ã€‚</p></blockquote><h3 id="1ï¼å‘½ä»¤æ ¼å¼"><a href="#1ï¼å‘½ä»¤æ ¼å¼" class="headerlink" title="1ï¼å‘½ä»¤æ ¼å¼"></a>1ï¼å‘½ä»¤æ ¼å¼</h3><p><code>tar[å¿…è¦å‚æ•°][é€‰æ‹©å‚æ•°][æ–‡ä»¶]</code></p><h3 id="2ï¼å‘½ä»¤åŠŸèƒ½"><a href="#2ï¼å‘½ä»¤åŠŸèƒ½" class="headerlink" title="2ï¼å‘½ä»¤åŠŸèƒ½"></a>2ï¼å‘½ä»¤åŠŸèƒ½</h3><p>ç”¨æ¥å‹ç¼©å’Œè§£å‹æ–‡ä»¶ã€‚taræœ¬èº«ä¸å…·æœ‰å‹ç¼©åŠŸèƒ½ï¼Œå®ƒæ˜¯è°ƒç”¨å‹ç¼©åŠŸèƒ½å®ç°çš„ã€‚</p><h3 id="3ï¼å‘½ä»¤å‚æ•°"><a href="#3ï¼å‘½ä»¤å‚æ•°" class="headerlink" title="3ï¼å‘½ä»¤å‚æ•°"></a>3ï¼å‘½ä»¤å‚æ•°</h3><p><strong>å¿…è¦å‚æ•°æœ‰å¦‚ä¸‹ï¼š</strong></p><ul><li>-A æ–°å¢å‹ç¼©æ–‡ä»¶åˆ°å·²å­˜åœ¨çš„å‹ç¼©</li><li>-B è®¾ç½®åŒºå—å¤§å°</li><li>-c å»ºç«‹æ–°çš„å‹ç¼©æ–‡ä»¶</li><li>-d è®°å½•æ–‡ä»¶çš„å·®åˆ«</li><li>-r æ·»åŠ æ–‡ä»¶åˆ°å·²ç»å‹ç¼©çš„æ–‡ä»¶</li><li>-u æ·»åŠ æ”¹å˜äº†å’Œç°æœ‰çš„æ–‡ä»¶åˆ°å·²ç»å­˜åœ¨çš„å‹ç¼©æ–‡ä»¶</li><li>-x ä»å‹ç¼©çš„æ–‡ä»¶ä¸­æå–æ–‡ä»¶</li><li>-t æ˜¾ç¤ºå‹ç¼©æ–‡ä»¶çš„å†…å®¹</li><li>-z æ”¯æŒgzipè§£å‹æ–‡ä»¶</li><li>-j æ”¯æŒbzip2è§£å‹æ–‡ä»¶</li><li>-Z æ”¯æŒcompressè§£å‹æ–‡ä»¶</li><li>-v æ˜¾ç¤ºæ“ä½œè¿‡ç¨‹</li><li>-l æ–‡ä»¶ç³»ç»Ÿè¾¹ç•Œè®¾ç½®</li><li>-k ä¿ç•™åŸæœ‰æ–‡ä»¶ä¸è¦†ç›–</li><li>-m ä¿ç•™æ–‡ä»¶ä¸è¢«è¦†ç›–</li><li>-W ç¡®è®¤å‹ç¼©æ–‡ä»¶çš„æ­£ç¡®æ€§</li></ul><p><strong>å¯é€‰å‚æ•°å¦‚ä¸‹ï¼š</strong></p><ul><li>-b è®¾ç½®åŒºå—æ•°ç›®</li><li>-C åˆ‡æ¢åˆ°æŒ‡å®šç›®å½•</li><li>-f æŒ‡å®šå‹ç¼©æ–‡ä»¶</li><li>â€“help æ˜¾ç¤ºå¸®åŠ©ä¿¡æ¯</li><li>â€“version æ˜¾ç¤ºç‰ˆæœ¬ä¿¡æ¯<h3 id="4ï¼å¸¸è§è§£å‹-å‹ç¼©å‘½ä»¤"><a href="#4ï¼å¸¸è§è§£å‹-å‹ç¼©å‘½ä»¤" class="headerlink" title="4ï¼å¸¸è§è§£å‹/å‹ç¼©å‘½ä»¤"></a>4ï¼å¸¸è§è§£å‹/å‹ç¼©å‘½ä»¤</h3></li><li>taræ–‡ä»¶æ ¼å¼<br>  è§£åŒ…ï¼štar xvf FileName.tar<br>  æ‰“åŒ…ï¼štar cvf FileName.tar DirName<br>  (æ³¨ï¼štaræ˜¯æ‰“åŒ…ï¼Œä¸æ˜¯å‹ç¼©ï¼)</li><li>.gzæ–‡ä»¶æ ¼å¼<br>  è§£å‹1ï¼šgunzip FileName.gz<br>  è§£å‹2ï¼šgzip -d FileName.gz<br>  å‹ç¼©ï¼šgzip FileName</li><li>.tar.gz å’Œ .tgz<br>  è§£å‹ï¼štar zxvf FileName.tar.gz<br>  å‹ç¼©ï¼štar zcvf FileName.tar.gz DirName</li><li>.bz2æ–‡ä»¶æ ¼å¼<br>  è§£å‹1ï¼šbzip2 -d FileName.bz2<br>  è§£å‹2ï¼šbunzip2 FileName.bz2<br>  å‹ç¼©ï¼š bzip2 -z FileName</li><li>.tar.bz2æ–‡ä»¶æ ¼å¼<br>  è§£å‹ï¼štar jxvf FileName.tar.bz2<br>  å‹ç¼©ï¼štar jcvf FileName.tar.bz2 DirName</li><li>.bzæ–‡ä»¶æ ¼å¼<br>  è§£å‹1ï¼šbzip2 -d FileName.bz<br>  è§£å‹2ï¼šbunzip2 FileName.bz<br>  å‹ç¼©ï¼šæœªçŸ¥</li><li>.tar.bzæ–‡ä»¶æ ¼å¼<br>  è§£å‹ï¼štar jxvf FileName.tar.bz<br>  å‹ç¼©ï¼šæœªçŸ¥</li><li>.Zæ–‡ä»¶æ ¼å¼<br>  è§£å‹ï¼šuncompress FileName.Z<br>  å‹ç¼©ï¼šcompress FileName</li><li>.tar.Zæ–‡ä»¶æ ¼å¼<br>  è§£å‹ï¼štar Zxvf FileName.tar.Z<br>  å‹ç¼©ï¼štar Zcvf FileName.tar.Z DirName</li><li>.zipæ–‡ä»¶æ ¼å¼<br>  è§£å‹ï¼šunzip FileName.zip<br>  å‹ç¼©ï¼šzip FileName.zip DirName</li><li>.rar<br>  è§£å‹ï¼šrar x FileName.rar<br>  å‹ç¼©ï¼šrar a FileName.rar DirName </li></ul><h3 id="5ï¼ä½¿ç”¨å®ä¾‹"><a href="#5ï¼ä½¿ç”¨å®ä¾‹" class="headerlink" title="5ï¼ä½¿ç”¨å®ä¾‹"></a>5ï¼ä½¿ç”¨å®ä¾‹</h3><h4 id="å®ä¾‹1ï¼šå°†æ–‡ä»¶å…¨éƒ¨æ‰“åŒ…æˆtaråŒ…"><a href="#å®ä¾‹1ï¼šå°†æ–‡ä»¶å…¨éƒ¨æ‰“åŒ…æˆtaråŒ…" class="headerlink" title="å®ä¾‹1ï¼šå°†æ–‡ä»¶å…¨éƒ¨æ‰“åŒ…æˆtaråŒ…"></a>å®ä¾‹1ï¼šå°†æ–‡ä»¶å…¨éƒ¨æ‰“åŒ…æˆtaråŒ…</h4><p>å‘½ä»¤ï¼š</p><pre class=" language-bash"><code class="language-bash"><span class="token function">tar</span> -cvf log1.tar log1.log<span class="token function">tar</span> -zcvf log2.tar.gz log2.log<span class="token function">tar</span> -jcvf log3.tar.bz2 log3.log</code></pre><blockquote><p>è¯´æ˜ï¼š<br>    <code>tar -cvf log1.tar log1.log</code>    ä»…æ‰“åŒ…ï¼Œä¸å‹ç¼©ï¼<br>    <code>tar -zcvf log2.tar.gz log2.log</code>   æ‰“åŒ…åï¼Œä»¥ <code>gzip</code> å‹ç¼©<br>    <code>tar -zcvf log.tar.bz2 log3.log</code>  æ‰“åŒ…åï¼Œä»¥<code>bzip2</code> å‹ç¼©<br>    åœ¨å‚æ•°<code>f</code> ä¹‹åçš„æ–‡ä»¶æ¡£åæ˜¯è‡ªå·±å–çš„ï¼Œæˆ‘ä»¬ä¹ æƒ¯ä¸Šéƒ½ç”¨<code>.tar</code>æ¥ä½œä¸ºè¾¨è¯†ã€‚ å¦‚æœåŠ  <code>z</code>å‚æ•°ï¼Œåˆ™ä»¥ <code>.tar.gz</code>æˆ– <code>.tgz</code>æ¥ä»£è¡¨<code>gzip</code> å‹ç¼©è¿‡çš„ <code>tar</code>åŒ…ï¼› å¦‚æœåŠ  <code>j</code>å‚æ•°ï¼Œåˆ™ä»¥ <code>.tar.bz2</code>æ¥ä½œä¸ºtaråŒ…åã€‚</p></blockquote><h4 id="å®ä¾‹2ï¼šæŸ¥é˜…ä¸Šè¿°-taråŒ…å†…æœ‰å“ªäº›æ–‡ä»¶"><a href="#å®ä¾‹2ï¼šæŸ¥é˜…ä¸Šè¿°-taråŒ…å†…æœ‰å“ªäº›æ–‡ä»¶" class="headerlink" title="å®ä¾‹2ï¼šæŸ¥é˜…ä¸Šè¿° taråŒ…å†…æœ‰å“ªäº›æ–‡ä»¶"></a>å®ä¾‹2ï¼šæŸ¥é˜…ä¸Šè¿° taråŒ…å†…æœ‰å“ªäº›æ–‡ä»¶</h4><p>å‘½ä»¤ï¼š</p><pre class=" language-bash"><code class="language-bash"><span class="token function">tar</span> -ztvf log2.tar.gz</code></pre><blockquote><p>è¯´æ˜ï¼šç”±äºæˆ‘ä»¬ä½¿ç”¨ gzip å‹ç¼©çš„log.tar.gzï¼Œæ‰€ä»¥è¦æŸ¥é˜…log.tar.gzåŒ…å†…çš„æ–‡ä»¶æ—¶ï¼Œå°±å¾—è¦åŠ ä¸Š z è¿™ä¸ªå‚æ•°äº†ã€‚</p></blockquote><h4 id="å®ä¾‹3ï¼šå°†-tar-åŒ…è§£å‹ç¼©"><a href="#å®ä¾‹3ï¼šå°†-tar-åŒ…è§£å‹ç¼©" class="headerlink" title="å®ä¾‹3ï¼šå°† tar åŒ…è§£å‹ç¼©"></a>å®ä¾‹3ï¼šå°† tar åŒ…è§£å‹ç¼©</h4><p>å‘½ä»¤ï¼š</p><pre class=" language-bash"><code class="language-bash"><span class="token function">tar</span> -zxvf /home/yiibai/log2.tar.gz</code></pre><blockquote><p>è¯´æ˜ï¼šåœ¨é¢„è®¾çš„æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å¯ä»¥å°†å‹ç¼©æ¡£åœ¨ä»»ä½•åœ°æ–¹è§£å¼€çš„</p></blockquote><h4 id="å®ä¾‹4ï¼šåªå°†-tar-å†…çš„-éƒ¨åˆ†æ–‡ä»¶è§£å‹å‡ºæ¥"><a href="#å®ä¾‹4ï¼šåªå°†-tar-å†…çš„-éƒ¨åˆ†æ–‡ä»¶è§£å‹å‡ºæ¥" class="headerlink" title="å®ä¾‹4ï¼šåªå°† /tar å†…çš„ éƒ¨åˆ†æ–‡ä»¶è§£å‹å‡ºæ¥"></a>å®ä¾‹4ï¼šåªå°† /tar å†…çš„ éƒ¨åˆ†æ–‡ä»¶è§£å‹å‡ºæ¥</h4><p>å‘½ä»¤ï¼š</p><pre class=" language-bash"><code class="language-bash"><span class="token function">tar</span> -zxvf /home/yiibai/mylog.tar.gz log2020.log</code></pre><blockquote><p>è¯´æ˜ï¼šå¯ä»¥é€šè¿‡ <code>tar -ztvf</code>æ¥æŸ¥é˜…<code>tar</code> åŒ…å†…çš„æ–‡ä»¶åç§°ï¼Œå¦‚æœå•åªè¦ä¸€ä¸ªæ–‡ä»¶ï¼Œå°±å¯ä»¥é€è¿‡è¿™ä¸ªæ–¹å¼æ¥è§£å‹éƒ¨åˆ†æ–‡ä»¶ï¼</p></blockquote><h4 id="å®ä¾‹5ï¼šæ–‡ä»¶å¤‡ä»½ä¸‹æ¥ï¼Œå¹¶ä¸”ä¿å­˜å…¶æƒé™"><a href="#å®ä¾‹5ï¼šæ–‡ä»¶å¤‡ä»½ä¸‹æ¥ï¼Œå¹¶ä¸”ä¿å­˜å…¶æƒé™" class="headerlink" title="å®ä¾‹5ï¼šæ–‡ä»¶å¤‡ä»½ä¸‹æ¥ï¼Œå¹¶ä¸”ä¿å­˜å…¶æƒé™"></a>å®ä¾‹5ï¼šæ–‡ä»¶å¤‡ä»½ä¸‹æ¥ï¼Œå¹¶ä¸”ä¿å­˜å…¶æƒé™</h4><p>å‘½ä»¤ï¼š</p><pre class=" language-bash"><code class="language-bash"><span class="token function">tar</span> -zcvf log20.tar.gz log2018.log log2019.log</code></pre><blockquote><p>è¯´æ˜ï¼šè¿™ä¸ª -p çš„å±æ€§æ˜¯å¾ˆé‡è¦çš„ï¼Œå°¤å…¶æ˜¯å½“æ‚¨è¦ä¿ç•™åŸæœ¬æ–‡ä»¶çš„å±æ€§æ—¶</p></blockquote><h4 id="å®ä¾‹6ï¼šåœ¨æ–‡ä»¶å¤¹å½“ä¸­ï¼Œæ¯”æŸä¸ªæ—¥æœŸæ–°çš„æ–‡ä»¶æ‰å¤‡ä»½"><a href="#å®ä¾‹6ï¼šåœ¨æ–‡ä»¶å¤¹å½“ä¸­ï¼Œæ¯”æŸä¸ªæ—¥æœŸæ–°çš„æ–‡ä»¶æ‰å¤‡ä»½" class="headerlink" title="å®ä¾‹6ï¼šåœ¨æ–‡ä»¶å¤¹å½“ä¸­ï¼Œæ¯”æŸä¸ªæ—¥æœŸæ–°çš„æ–‡ä»¶æ‰å¤‡ä»½"></a>å®ä¾‹6ï¼šåœ¨æ–‡ä»¶å¤¹å½“ä¸­ï¼Œæ¯”æŸä¸ªæ—¥æœŸæ–°çš„æ–‡ä»¶æ‰å¤‡ä»½</h4><p>å‘½ä»¤ï¼š</p><pre class=" language-bash"><code class="language-bash"><span class="token function">tar</span> -N <span class="token string">"2017/11/13"</span> -zcvf log17.tar.gz /home/yiibai</code></pre><h4 id="å®ä¾‹7ï¼šå¤‡ä»½æ–‡ä»¶å¤¹å†…å®¹æ˜¯æ’é™¤éƒ¨åˆ†æ–‡ä»¶"><a href="#å®ä¾‹7ï¼šå¤‡ä»½æ–‡ä»¶å¤¹å†…å®¹æ˜¯æ’é™¤éƒ¨åˆ†æ–‡ä»¶" class="headerlink" title="å®ä¾‹7ï¼šå¤‡ä»½æ–‡ä»¶å¤¹å†…å®¹æ˜¯æ’é™¤éƒ¨åˆ†æ–‡ä»¶"></a>å®ä¾‹7ï¼šå¤‡ä»½æ–‡ä»¶å¤¹å†…å®¹æ˜¯æ’é™¤éƒ¨åˆ†æ–‡ä»¶</h4><p>å‘½ä»¤ï¼š</p><pre class=" language-bash"><code class="language-bash"><span class="token function">tar</span> --exclude project/service -zcvf project.tar.gz project/*</code></pre><h4 id="å®ä¾‹8ï¼šå‹ç¼©æ–‡ä»¶åˆ°æŒ‡å®šç›®å½•"><a href="#å®ä¾‹8ï¼šå‹ç¼©æ–‡ä»¶åˆ°æŒ‡å®šç›®å½•" class="headerlink" title="å®ä¾‹8ï¼šå‹ç¼©æ–‡ä»¶åˆ°æŒ‡å®šç›®å½•"></a>å®ä¾‹8ï¼šå‹ç¼©æ–‡ä»¶åˆ°æŒ‡å®šç›®å½•</h4><p>å‘½ä»¤ï¼š</p><pre class=" language-bash"><code class="language-bash"><span class="token function">tar</span> -cvf data/project.tar.gz -C tools/back/</code></pre><blockquote><p>è¯´æ˜:æ·»åŠ -C åå‹ç¼©åŒ…ä¸ä¼šåŒ…å«è¢«å‹ç¼©æ–‡ä»¶çš„ç›®å½•ç»“æ„ï¼Œå¦‚æœä¸ä½¿ç”¨-Cï¼Œåˆ™å‹ç¼©åŒ…åŒ…å«å‹ç¼©æ–‡ä»¶çš„ç›®å½•ç»“æ„ã€‚</p></blockquote><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> Linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æœºæ¢°é”®ç›˜é€‰ä»€ä¹ˆè½´åˆé€‚</title>
      <link href="/2019/11/20/jianpan/"/>
      <url>/2019/11/20/jianpan/</url>
      
        <content type="html"><![CDATA[<h3 id="é’è½´"><a href="#é’è½´" class="headerlink" title="é’è½´"></a>é’è½´</h3><p>æ®µè½æ„Ÿæœ€å¼ºã€Clickå£°éŸ³æœ€å¤§ï¼Œæœºæ¢°æ„Ÿæœ€å¼ºï¼Œæ˜¯æœºæ¢°é”®ç›˜çš„ä»£è¡¨è½´ï¼Œéœ€ä¸‹å‹2.4mmæ‰å¯è§¦å‘ï¼Œæ‰“å­—èŠ‚å¥æ„Ÿåè¶³ï¼Œä½†æ˜¯å£°éŸ³è¾ƒå¤§ï¼Œæ¯”è¾ƒåµ , å‹åŠ›å…‹æ•°ä¸º60gã€‚æœ‰äººå°†å…¶æ¯”å–»ä¸ºCherryçš„æ˜¥å¤©ï¼Œçˆ½å¿«æ¸…è„†çš„æ®µè½æ„Ÿå¦‚æ˜¥å¤©èˆ¬èˆ’ç•…ã€‚</p><h3 id="é»‘è½´"><a href="#é»‘è½´" class="headerlink" title="é»‘è½´"></a>é»‘è½´</h3><p>æ®µè½æ„Ÿæœ€ä¸æ˜æ˜¾ï¼Œå£°éŸ³æœ€å°ï¼Œä¸é’è½´å½¢æˆé²œæ˜å¯¹æ¯”ï¼Œç›´ä¸Šç›´ä¸‹ï¼Œä¸‹å‹1.5mmå³å¯è§¦å‘ã€‚æœ‰äººå°†å…¶æ¯”å–»ä¸ºCherryçš„å¤å¤©ï¼Œæ— è®ºä½ æƒ³å¾—åˆ°æ€¥é€Ÿæˆ–èˆ’ç¼“çš„è¾“å…¥ï¼Œé»‘è½´éƒ½èƒ½è‡ªå¦‚åº”å¯¹ï¼Œæ‰“å­—æ¸¸æˆéƒ½é€‚åˆï¼Œä½†æ˜¯ç”±äºè§¦å‘é”®ç¨‹çŸ­ï¼Œå‹åŠ›å…‹æ•°è¾ƒå¤§ï¼Œæ‰€ä»¥åœ¨æ¸¸æˆä¸­æœ‰ä¸Šä½³çš„è¡¨ç°ã€‚é»‘è½´æœºæ¢°é”®ç›˜å•ä¸ªè½´ä½¿ç”¨å¯¿å‘½é•¿è¾¾5000ä¸‡æ¬¡(å…¶ä»–ä¸º2000ä¸‡æ¬¡)ã€‚</p><h3 id="èŒ¶è½´"><a href="#èŒ¶è½´" class="headerlink" title="èŒ¶è½´"></a>èŒ¶è½´</h3><p>æ¯”èµ·é’è½´ï¼Œæ®µè½æ„Ÿè¦å¼±å¾ˆå¤šï¼Œè€Œå¯¹æ¯”é»‘è½´ï¼Œåˆä¸æ˜¯ç›´ä¸Šç›´ä¸‹çš„æ„Ÿè§‰ï¼Œ2mmå³å¯è§¦å‘ï¼Œå±äºæ¯”è¾ƒå¥¢ä¾ˆçš„æœºæ¢°è½´ã€‚èŒ¶è½´æ˜¯å‡ ç§è½´ä¸­æˆæœ¬æœ€é«˜çš„è½´ï¼Œä¸ºä¸¤æ®µå¼æ— å£°ï¼Œä¹Ÿæœ‰äººååº”ä¸è–„è†œæ‰‹æ„Ÿç›¸è¿‘ï¼ŒåŒæ—¶ï¼ŒèŒ¶è½´</p><h3 id="çº¢è½´"><a href="#çº¢è½´" class="headerlink" title="çº¢è½´"></a>çº¢è½´</h3><p>ä¸é»‘è½´ç›¸ä¼¼ã€‚ä½†å‹åŠ›å…‹æ•°æ¯”é»‘è½´å°ï¼Œèµ·35ï¼Œç»ˆ60(é»‘è½´èµ·ç‚¹ä¸º40)ï¼Œæ˜¯08å¹´å‡ºçš„æ–°è½´ï¼Œæ‰‹æ„Ÿæ¯”è¾ƒè½»ç›ˆï¼Œæ•²å‡»æ—¶æ²¡æœ‰æ®µè½æ„Ÿï¼Œç›´ä¸Šç›´ä¸‹ï¼Œè§¦å‘é”®ç¨‹ä¹ŸåŒä¸º2.0mmï¼Œæ•²å‡»æ—¶æ›´åŠ è½»æ¾ï¼Œèƒ½å¾ˆå¥½å…¼é¡¾æ¸¸æˆå’Œæ‰“å­—çš„ä½¿ç”¨éœ€æ±‚ã€‚</p><table>    <tbody><tr>        <th>é”®ç›˜è½´</th>        <th>æ“ä½œå‹åŠ›</th>        <th>å£°éŸ³</th>        <th>æ®µè½æ„Ÿ</th>        <th>å¯¿å‘½</th>        <th>é€‚ç”¨æ–¹å¼</th>    </tr>    <tr>        <td>é»‘è½´</td>        <td>58.9gÂ±14.7g</td>        <td>å£°éŸ³æœ€å°ï¼Œæ— æ˜æ˜¾å™ªå£°</td>        <td>æ²¡æœ‰æ®µè½æ„Ÿ</td>        <td>å¯¿å‘½é•¿è¾¾5000ä¸‡æ¬¡</td>        <td>æ¯”è¾ƒé€‚åˆæ‰“æ¸¸æˆï¼Œä¸é€‚åˆé•¿æ—¶é—´æ‰“æ¸¸æˆ<br>ï¼ˆæŒ‡åŠ›å¤ªå¼±åˆ™ä¸æ¨èï¼‰</td>    </tr>    <tr>        <td>é’è½´</td>        <td>58.9gÂ±14.7g</td>        <td>å£°éŸ³æ¸…è„†ï¼Œæœ‰å™ªå£°</td>        <td>æ®µè½æ„Ÿå¾ˆå¥½</td>        <td>å¯¿å‘½2000ä¸‡æ¬¡</td>        <td>æœ€é€‚åˆæ‰“å­—çš„è½´</td>    </tr>    <tr>        <td>èŒ¶è½´</td>        <td>44.1gÂ±14.7g</td>        <td>å£°éŸ³é€‚ä¸­</td>        <td>è½»å¾®çš„æ®µè½æ„Ÿ</td>        <td>å¯¿å‘½2000ä¸‡æ¬¡</td>        <td>ä»‹äºæ‰“å­—å’Œæ¸¸æˆçš„ä¸­é—´åœ°å¸¦ï¼Œå…¨é¢å…¼é¡¾</td>    </tr>    <tr>        <td>çº¢è½´</td>        <td>44.1gÂ±14.7g</td>        <td>å£°éŸ³è¾ƒå°</td>        <td>æ²¡æœ‰æ®µè½æ„Ÿ</td>        <td>å¯¿å‘½2000ä¸‡æ¬¡</td>        <td>æ‰“é€‚åˆæ¸¸æˆã€é•¿æ—¶é—´æ‰“å­—ï¼Œæ‰“å­—èˆ’é€‚å¼ºäºèŒ¶è½´</td>    </tr></tbody></table><h3 id="ä¸€èˆ¬å»ºè®®"><a href="#ä¸€èˆ¬å»ºè®®" class="headerlink" title="ä¸€èˆ¬å»ºè®®"></a>ä¸€èˆ¬å»ºè®®</h3><p><strong>æ¸¸æˆç©å®¶ï¼šé»‘è½´ï¼èŒ¶è½´ï¼çº¢è½´ï¼é’è½´</strong><br><strong>åŠå…¬æ‰“å­—ï¼šé’è½´ï¼çº¢è½´ï¼èŒ¶è½´ï¼é»‘è½´</strong></p><blockquote><p>æ¸©é¦¨è§£ç­”<span class="github-emoji" style="color: transparent;background:no-repeat url(https://github.githubassets.com/images/icons/emoji/unicode/1f438.png?v8) center/contain" data-src="https://github.githubassets.com/images/icons/emoji/unicode/1f438.png?v8">ğŸ¸</span></p></blockquote><ul><li>ä»€ä¹ˆæ˜¯æœºæ¢°é”®ç›˜çš„â€œæ®µè½æ„Ÿâ€å‘¢ï¼Ÿ<br><span class="github-emoji" style="color: transparent;background:no-repeat url(https://github.githubassets.com/images/icons/emoji/unicode/1f31d.png?v8) center/contain" data-src="https://github.githubassets.com/images/icons/emoji/unicode/1f31d.png?v8">ğŸŒ</span>è¿™å¾ˆéš¾ç”¨æ–‡å­—æè¿°ã€‚å¦‚æœä½ æ…¢æ…¢æ»šåŠ¨é¼ æ ‡æ»šè½®ï¼Œä¼šæ„Ÿè§‰æœ‰ä¸€ä¸ªåˆ»åº¦å¾®å¾®å¡ç€ï¼Œä½†æ˜¯ä½ è½»å¾®ä¸€æ¨ï¼Œåˆå¾ˆå¿«æ»šè¿‡å»ã€‚é”®ç›˜çš„æ®µè½æ„Ÿå’Œè¿™ä¸ªç›¸ä¼¼ã€‚ä½¿ç”¨è¿‡æœ‰æ®µè½æ„Ÿçš„æœºæ¢°é”®ç›˜åï¼Œå¾ˆå®¹æ˜“ç†è§£ã€‚</li></ul><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> éšç¬” </category>
          
      </categories>
      
      
        <tags>
            
            <tag> éšç¬” </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Rediså“¨å…µæ¨¡å¼</title>
      <link href="/2019/11/15/redis3/"/>
      <url>/2019/11/15/redis3/</url>
      
        <content type="html"><![CDATA[<h3 id="ä¸€ã€ä¸ºä»€ä¹ˆè¦ç”¨åˆ°å“¨å…µ"><a href="#ä¸€ã€ä¸ºä»€ä¹ˆè¦ç”¨åˆ°å“¨å…µ" class="headerlink" title="ä¸€ã€ä¸ºä»€ä¹ˆè¦ç”¨åˆ°å“¨å…µ"></a>ä¸€ã€ä¸ºä»€ä¹ˆè¦ç”¨åˆ°å“¨å…µ</h3><p>å“¨å…µ(Sentinel)ä¸»è¦æ˜¯ä¸ºäº†è§£å†³åœ¨ä¸»ä»å¤åˆ¶æ¶æ„ä¸­å‡ºç°å®•æœºçš„æƒ…å†µ,ä¸»è¦åˆ†ä¸ºä¸¤ç§æƒ…å†µ:</p><ul><li><strong>ä»Rediså®•æœº</strong><ul><li>è¿™ä¸ªç›¸å¯¹è€Œè¨€æ¯”è¾ƒç®€å•,åœ¨Redisä¸­ä»åº“é‡æ–°å¯åŠ¨åä¼šè‡ªåŠ¨åŠ å…¥åˆ°ä¸»ä»æ¶æ„ä¸­,è‡ªåŠ¨å®ŒæˆåŒæ­¥æ•°æ®ã€‚åœ¨Redis2.8ç‰ˆæœ¬å,ä¸»ä»æ–­çº¿åæ¢å¤çš„æƒ…å†µä¸‹å®ç°å¢é‡å¤åˆ¶ã€‚</li></ul></li><li><strong>ä¸»Rediså®•æœº</strong><ul><li>è¿™ä¸ªç›¸å¯¹è€Œè¨€å°±ä¼šå¤æ‚ä¸€äº›,éœ€è¦ä»¥ä¸‹2æ­¥æ‰èƒ½å®Œæˆ<ul><li>ç¬¬ä¸€æ­¥,åœ¨ä»æ•°æ®åº“ä¸­æ‰§è¡ŒSLAVEOF NO ONEå‘½ä»¤,æ–­å¼€ä¸»ä»å…³ç³»å¹¶ä¸”æå‡ä¸ºä¸»åº“ç»§ç»­æœåŠ¡</li><li>ç¬¬äºŒæ­¥,å°†ä¸»åº“é‡æ–°å¯åŠ¨å,æ‰§è¡ŒSLAVEOFå‘½ä»¤,å°†å…¶è®¾ç½®ä¸ºå…¶ä»–åº“çš„ä»åº“,è¿™æ—¶æ•°æ®å°±èƒ½æ›´æ–°å›æ¥<br>ç”±äºè¿™ä¸ªæ‰‹åŠ¨å®Œæˆæ¢å¤çš„è¿‡ç¨‹å…¶å®æ˜¯æ¯”è¾ƒéº»çƒ¦çš„å¹¶ä¸”å®¹æ˜“å‡ºé”™,æ‰€ä»¥Redisæä¾›çš„å“¨å…µ(sentinel)çš„åŠŸèƒ½æ¥è§£å†³.</li></ul></li></ul></li></ul><h3 id="äºŒã€ä»€ä¹ˆæ˜¯å“¨å…µ"><a href="#äºŒã€ä»€ä¹ˆæ˜¯å“¨å…µ" class="headerlink" title="äºŒã€ä»€ä¹ˆæ˜¯å“¨å…µ"></a>äºŒã€ä»€ä¹ˆæ˜¯å“¨å…µ</h3><p><strong>Redis-Sentinelæ˜¯ç”¨äºç®¡ç†Redisé›†ç¾¤,è¯¥ç³»ç»Ÿæ‰§è¡Œä»¥ä¸‹ä¸‰ä¸ªä»»åŠ¡:</strong></p><ul><li><strong>ç›‘æ§(Monitoring):</strong><ul><li>Sentinelä¼šä¸æ–­åœ°æ£€æŸ¥ä½ çš„ä¸»æœåŠ¡å™¨å’Œä»æœåŠ¡å™¨æ˜¯å¦è¿ä½œæ­£å¸¸;</li></ul></li><li><strong>æé†’(Notification):</strong><ul><li>å½“è¢«ç›‘æ§çš„æŸä¸ªRedisæœåŠ¡å™¨å‡ºç°é—®é¢˜æ—¶,Sentinelå¯ä»¥é€šè¿‡APIå‘ç®¡ç†å‘˜æˆ–è€…å…¶ä»–åº”ç”¨ç¨‹åºå‘é€é€šçŸ¥;</li></ul></li><li><strong>è‡ªåŠ¨æ•…éšœè¿ç§»(Automatic failover):</strong><ul><li>å½“ä¸€ä¸ªä¸»æœåŠ¡å™¨ä¸èƒ½æ­£å¸¸å·¥ä½œæ—¶,Sentinel ä¼šå¼€å§‹ä¸€æ¬¡è‡ªåŠ¨æ•…éšœè¿ç§»æ“ä½œ,å®ƒä¼šå°†å¤±æ•ˆä¸»æœåŠ¡å™¨çš„å…¶ä¸­ä¸€ä¸ªä»æœåŠ¡å™¨å‡çº§ä¸ºæ–°çš„ä¸»æœåŠ¡å™¨,å¹¶è®©å¤±æ•ˆä¸»æœåŠ¡å™¨çš„å…¶ä»–ä»æœåŠ¡å™¨æ”¹ä¸ºå¤åˆ¶æ–°çš„ä¸»æœåŠ¡å™¨;å½“å®¢æˆ·ç«¯è¯•å›¾è¿æ¥å¤±æ•ˆçš„ä¸»æœåŠ¡å™¨æ—¶,é›†ç¾¤ä¹Ÿä¼šå‘å®¢æˆ·ç«¯è¿”å›æ–°ä¸»æœåŠ¡å™¨çš„åœ°å€,ä½¿å¾—é›†ç¾¤å¯ä»¥ä½¿ç”¨æ–°ä¸»æœåŠ¡å™¨ä»£æ›¿å¤±æ•ˆæœåŠ¡å™¨.</li></ul></li></ul><h3 id="ä¸‰ã€Sentinelé›†ç¾¤æ­å»º"><a href="#ä¸‰ã€Sentinelé›†ç¾¤æ­å»º" class="headerlink" title="ä¸‰ã€Sentinelé›†ç¾¤æ­å»º"></a>ä¸‰ã€Sentinelé›†ç¾¤æ­å»º</h3><p>åœ¨ä¿è¯Redisä¸»ä»æ¶æ„é›†ç¾¤å¯ç”¨çš„å‰æä¸‹,å¤åˆ¶ä¸‰ä»½é…ç½®æ–‡ä»¶,ä¸»ä»æ¨¡å¼é…ç½®å¯å‚è€ƒï¼š<a href="https://www.faber.cc/2019/11/15/redis2/">https://www.faber.cc/2019/11/15/redis2/</a></p><pre class=" language-bash"><code class="language-bash"><span class="token comment" spellcheck="true"># è¿›å…¥redisæ‰€åœ¨ç›®å½•</span>$ <span class="token function">cd</span> /redis-5.0.6<span class="token comment" spellcheck="true"># åˆ›å»º6379ã€6380ã€6381ç›®å½•,åˆ†åˆ«å°†å®‰è£…ç›®å½•ä¸‹çš„sentinel.confæ‹·è´åˆ°è¿™ä¸‰ä¸ªç›®å½•ä¸‹</span>$ <span class="token function">mkdir</span> -p /data/redis/conf/ <span class="token operator">&amp;&amp;</span> <span class="token function">cp</span> sentinel.conf /usr/local/redis/conf/26379.conf$ <span class="token function">mkdir</span> -p /data/redis/conf/ <span class="token operator">&amp;&amp;</span> <span class="token function">cp</span> sentinel.conf /usr/local/redis/conf/26380.conf$ <span class="token function">mkdir</span> -p /data/redis/conf/ <span class="token operator">&amp;&amp;</span> <span class="token function">cp</span> sentinel.conf /usr/local/redis/conf/26381.conf</code></pre><p>åˆ†åˆ«é…ç½®å“¨å…µ,ä¿®æ”¹sentinelé…ç½®æ–‡ä»¶<code>vim /usr/local/redis/conf/6379.conf</code><br>ä¿®æ”¹å†…å®¹ï¼š</p><pre class=" language-bash"><code class="language-bash"><span class="token comment" spellcheck="true"># æ·»åŠ å®ˆæŠ¤è¿›ç¨‹æ¨¡å¼</span>daemonize <span class="token function">yes</span><span class="token comment" spellcheck="true"># æ·»åŠ æŒ‡æ˜æ—¥å¿—æ–‡ä»¶å</span>logfile <span class="token string">"/data/redis/logs/sentinel26379.log"</span><span class="token comment" spellcheck="true"># ä¿®æ”¹å·¥ä½œç›®å½•</span><span class="token function">dir</span> <span class="token string">"/usr/local/redis/6379"</span><span class="token comment" spellcheck="true"># ä¿®æ”¹å¯åŠ¨ç«¯å£</span>port 26379<span class="token comment" spellcheck="true"># æ·»åŠ å…³é—­ä¿æŠ¤æ¨¡å¼</span>protected-mode no<span class="token comment" spellcheck="true"># ä¿®æ”¹sentinel monitor</span>sentinel monitor macrog-master 127.0.0.1 6379 2<span class="token comment" spellcheck="true"># å°†é…ç½®æ–‡ä»¶ä¸­mymasterå…¨éƒ¨æ›¿æ¢macrog-master</span><span class="token comment" spellcheck="true"># åœ¨æœ«è¡Œæ¨¡å¼ä¸‹ è¾“å…¥ :%s/mymaster/macrog-master/g</span></code></pre><p>åŒä¸Šä¾æ¬¡ä¿®æ”¹26380,26381é…ç½®</p><blockquote><p>è¯´æ˜ï¼š<br>macrog-master:ç›‘æ§ä¸»æ•°æ®çš„åç§°,è‡ªå®šä¹‰å³å¯,å¯ä»¥ä½¿ç”¨å¤§å°å†™å­—æ¯å’Œâ€œ.-_â€ç¬¦å·<br>127.0.0.1:ç›‘æ§çš„ä¸»æ•°æ®åº“çš„IP<br>6379:ç›‘æ§çš„ä¸»æ•°æ®åº“çš„ç«¯å£<br>2:æœ€ä½é€šè¿‡ç¥¨æ•°</p></blockquote><p><strong>å¯åŠ¨å“¨å…µè¿›ç¨‹</strong></p><pre class=" language-bash"><code class="language-bash">$ /usr/local/redis/bin/redis-sentinel /usr/local/redis/conf/26379.conf $ /usr/local/redis/bin/redis-sentinel /usr/local/redis/conf/26380.conf$ /usr/local/redis/bin/redis-sentinel /usr/local/redis/conf/26381.conf æˆ–è€… $ /usr/local/redis/bin/redis-server /usr/local/redis/conf/26379.conf --sentinel$ /usr/local/redis/bin/redis-server /usr/local/redis/conf/26380.conf --sentinel$ /usr/local/redis/bin/redis-server /usr/local/redis/conf/26381.conf --sentinel</code></pre><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> Nosql </category>
          
      </categories>
      
      
        <tags>
            
            <tag> redis </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Redisé›†ç¾¤æ¨¡å¼</title>
      <link href="/2019/11/15/redis4/"/>
      <url>/2019/11/15/redis4/</url>
      
        <content type="html"><![CDATA[<h3 id="åˆ›å»ºèŠ‚ç‚¹"><a href="#åˆ›å»ºèŠ‚ç‚¹" class="headerlink" title="åˆ›å»ºèŠ‚ç‚¹"></a>åˆ›å»ºèŠ‚ç‚¹</h3><p>1.é¦–å…ˆåœ¨ 192.168.252.101æœºå™¨ä¸Š /opt/redis-4.0.1ç›®å½•ä¸‹åˆ›å»º redis-cluster ç›®å½•</p><pre class=" language-bash"><code class="language-bash">$ <span class="token function">mkdir</span> /opt/redis-4.0.1/redis-cluster</code></pre><p>2.åœ¨ redis-cluster ç›®å½•ä¸‹ï¼Œåˆ›å»ºåä¸º7000ã€7001ã€7002çš„ç›®å½•</p><pre class=" language-bash"><code class="language-bash">$ <span class="token function">cd</span> /opt/redis-4.0.1/redis-cluster$ <span class="token function">mkdir</span> 7000 7001 7002</code></pre><p>3.åˆ†åˆ«ä¿®æ”¹è¿™ä¸‰ä¸ªé…ç½®æ–‡ä»¶ï¼ŒæŠŠå¦‚ä¸‹redis.conf é…ç½®å†…å®¹ç²˜è´´è¿›å»</p><pre class=" language-bash"><code class="language-bash">$ <span class="token function">vi</span> 7000/redis.conf $ <span class="token function">vi</span> 7001/redis.conf$ <span class="token function">vi</span> 7002/redis.conf</code></pre><p><strong>redis.conf é…ç½®</strong></p><pre class=" language-bash"><code class="language-bash"><span class="token comment" spellcheck="true">#ç«¯å£7000,7001,7002</span>port 7000<span class="token comment" spellcheck="true">#é»˜è®¤ipä¸º127.0.0.1ï¼Œéœ€è¦æ”¹ä¸ºå…¶ä»–èŠ‚ç‚¹æœºå™¨å¯è®¿é—®çš„ipï¼Œå¦åˆ™åˆ›å»ºé›†ç¾¤æ—¶æ— æ³•è®¿é—®å¯¹åº”çš„ç«¯å£ï¼Œæ— æ³•åˆ›å»ºé›†ç¾¤</span>bind 192.168.252.101<span class="token comment" spellcheck="true">#redisåå°è¿è¡Œ</span>daemonize <span class="token function">yes</span><span class="token comment" spellcheck="true">#pidfileæ–‡ä»¶å¯¹åº”7000ï¼Œ7001ï¼Œ7002</span>pidfile /var/run/redis_7000.pid<span class="token comment" spellcheck="true">#å¼€å¯é›†ç¾¤ï¼ŒæŠŠæ³¨é‡Š#å»æ‰</span>cluster-enabled <span class="token function">yes</span><span class="token comment" spellcheck="true">#é›†ç¾¤çš„é…ç½®ï¼Œé…ç½®æ–‡ä»¶é¦–æ¬¡å¯åŠ¨è‡ªåŠ¨ç”Ÿæˆ 7000ï¼Œ7001ï¼Œ7002          </span>cluster-config-file nodes_7000.conf<span class="token comment" spellcheck="true">#è¯·æ±‚è¶…æ—¶ï¼Œé»˜è®¤15ç§’ï¼Œå¯è‡ªè¡Œè®¾ç½® </span>cluster-node-timeout 10100    <span class="token comment" spellcheck="true">#aofæ—¥å¿—å¼€å¯ï¼Œæœ‰éœ€è¦å°±å¼€å¯ï¼Œå®ƒä¼šæ¯æ¬¡å†™æ“ä½œéƒ½è®°å½•ä¸€æ¡æ—¥å¿—</span>appendonly <span class="token function">yes</span></code></pre><p>æ¥ç€åœ¨å¦å¤–ä¸¤å°æœºå™¨ä¸Š<code>(192.168.252.102ï¼Œ192.168.252.103)</code>é‡å¤ä»¥ä¸Šä¸‰æ­¥ï¼Œåªæ˜¯æŠŠç›®å½•æ”¹ä¸º<code>7003ã€7004ã€7005ã€7006ã€7007ã€7008</code>å¯¹åº”çš„é…ç½®æ–‡ä»¶ä¹ŸæŒ‰ç…§è¿™ä¸ªè§„åˆ™ä¿®æ”¹å³å¯</p><h3 id="å¯åŠ¨é›†ç¾¤"><a href="#å¯åŠ¨é›†ç¾¤" class="headerlink" title="å¯åŠ¨é›†ç¾¤"></a>å¯åŠ¨é›†ç¾¤</h3><pre class=" language-bash"><code class="language-bash"><span class="token comment" spellcheck="true">#ç¬¬ä¸€å°æœºå™¨ä¸Šæ‰§è¡Œ 3ä¸ªèŠ‚ç‚¹</span>$ <span class="token keyword">for</span><span class="token variable"><span class="token punctuation">((</span>i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;=</span><span class="token number">2</span><span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">))</span></span><span class="token punctuation">;</span> <span class="token keyword">do</span> /opt/redis-4.0.1/src/redis-server /opt/redis-4.0.1/redis-cluster/700<span class="token variable">$i</span>/redis.conf<span class="token punctuation">;</span> <span class="token keyword">done</span><span class="token comment" spellcheck="true">#ç¬¬äºŒå°æœºå™¨ä¸Šæ‰§è¡Œ 3ä¸ªèŠ‚ç‚¹</span>$ <span class="token keyword">for</span><span class="token variable"><span class="token punctuation">((</span>i<span class="token operator">=</span><span class="token number">3</span><span class="token punctuation">;</span>i<span class="token operator">&lt;=</span><span class="token number">5</span><span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">))</span></span><span class="token punctuation">;</span> <span class="token keyword">do</span> /opt/redis-4.0.1/src/redis-server /opt/redis-4.0.1/redis-cluster/700<span class="token variable">$i</span>/redis.conf<span class="token punctuation">;</span> <span class="token keyword">done</span><span class="token comment" spellcheck="true">#ç¬¬ä¸‰å°æœºå™¨ä¸Šæ‰§è¡Œ 3ä¸ªèŠ‚ç‚¹ </span>$ <span class="token keyword">for</span><span class="token variable"><span class="token punctuation">((</span>i<span class="token operator">=</span><span class="token number">6</span><span class="token punctuation">;</span>i<span class="token operator">&lt;=</span><span class="token number">8</span><span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">))</span></span><span class="token punctuation">;</span> <span class="token keyword">do</span> /opt/redis-4.0.1/src/redis-server /opt/redis-4.0.1/redis-cluster/700<span class="token variable">$i</span>/redis.conf<span class="token punctuation">;</span> <span class="token keyword">done</span></code></pre><h3 id="æ£€æŸ¥æœåŠ¡"><a href="#æ£€æŸ¥æœåŠ¡" class="headerlink" title="æ£€æŸ¥æœåŠ¡"></a>æ£€æŸ¥æœåŠ¡</h3><p>æ£€æŸ¥å„ Redis å„ä¸ªèŠ‚ç‚¹å¯åŠ¨æƒ…å†µ</p><pre class=" language-bash"><code class="language-bash">$ <span class="token function">ps</span> -ef <span class="token operator">|</span> <span class="token function">grep</span> redis           //redisæ˜¯å¦å¯åŠ¨æˆåŠŸ$ <span class="token function">netstat</span> -tnlp <span class="token operator">|</span> <span class="token function">grep</span> redis    //ç›‘å¬redisç«¯å£</code></pre><h3 id="å®‰è£…-Ruby"><a href="#å®‰è£…-Ruby" class="headerlink" title="å®‰è£… Ruby"></a>å®‰è£… Ruby</h3><pre class=" language-bash"><code class="language-bash">$ yum -y <span class="token function">install</span> ruby ruby-devel rubygems rpm-build$ gem <span class="token function">install</span> redis</code></pre><h3 id="åˆ›å»ºé›†ç¾¤"><a href="#åˆ›å»ºé›†ç¾¤" class="headerlink" title="åˆ›å»ºé›†ç¾¤"></a>åˆ›å»ºé›†ç¾¤</h3><blockquote><p>æ³¨æ„ï¼šåœ¨ä»»æ„ä¸€å°ä¸Šè¿è¡Œ ä¸è¦åœ¨æ¯å°æœºå™¨ä¸Šéƒ½è¿è¡Œï¼Œä¸€å°å°±å¤Ÿäº†</p></blockquote><p>Redis å®˜æ–¹æä¾›äº†<code>redis-trib.rb</code>è¿™ä¸ªå·¥å…·ï¼Œå°±åœ¨è§£å‹ç›®å½•çš„<code>src</code>ç›®å½•ä¸­</p><pre class=" language-bash"><code class="language-bash">$ /opt/redis-4.0.1/src/redis-trib.rb create --replicas 1 192.168.252.101:7000 192.168.252.101:7001 192.168.252.101:7002 192.168.252.102:7003 192.168.252.102:7004 192.168.252.102:7005 192.168.252.103:7006 192.168.252.103:7007 192.168.252.103:7008</code></pre><p>å‡ºç°ä»¥ä¸‹å†…å®¹</p><pre class=" language-bash"><code class="language-bash"><span class="token punctuation">[</span>root@localhost redis-cluster<span class="token punctuation">]</span><span class="token comment" spellcheck="true"># /opt/redis-4.0.1/src/redis-trib.rb create --replicas 1 192.168.252.101:7000 192.168.252.101:7001 192.168.252.101:7002 192.168.252.102:7003 192.168.252.102:7004 192.168.252.102:7005 192.168.252.103:7006 192.168.252.103:7007 192.168.252.103:7008</span><span class="token operator">>></span><span class="token operator">></span> Creating cluster<span class="token operator">>></span><span class="token operator">></span> Performing <span class="token function">hash</span> slots allocation on 9 nodes<span class="token punctuation">..</span>.Using 4 masters:192.168.252.101:7000192.168.252.102:7003192.168.252.103:7006192.168.252.101:7001Adding replica 192.168.252.102:7004 to 192.168.252.101:7000Adding replica 192.168.252.103:7007 to 192.168.252.102:7003Adding replica 192.168.252.101:7002 to 192.168.252.103:7006Adding replica 192.168.252.102:7005 to 192.168.252.101:7001Adding replica 192.168.252.103:7008 to 192.168.252.101:7000M: 7c622ac191edd40dd61d9b79b27f6f69d02a5bbf 192.168.252.101:7000   slots:0-4095 <span class="token punctuation">(</span>4096 slots<span class="token punctuation">)</span> masterM: 44c81c15b01d992cb9ede4ad35477ec853d70723 192.168.252.101:7001   slots:12288-16383 <span class="token punctuation">(</span>4096 slots<span class="token punctuation">)</span> masterS: 38f03c27af39723e1828eb62d1775c4b6e2c3638 192.168.252.101:7002   replicates f1abb62a8c9b448ea14db421bdfe3f1d8075189cM: 987965baf505a9aa43e50e46c76189c51a8f17ec 192.168.252.102:7003   slots:4096-8191 <span class="token punctuation">(</span>4096 slots<span class="token punctuation">)</span> masterS: 6555292fed9c5d52fcf5b983c441aff6f96923d5 192.168.252.102:7004   replicates 7c622ac191edd40dd61d9b79b27f6f69d02a5bbfS: 2b5ba254a0405d4efde4c459867b15176f79244a 192.168.252.102:7005   replicates 44c81c15b01d992cb9ede4ad35477ec853d70723M: f1abb62a8c9b448ea14db421bdfe3f1d8075189c 192.168.252.103:7006   slots:8192-12287 <span class="token punctuation">(</span>4096 slots<span class="token punctuation">)</span> masterS: eb4067373d36d8a8df07951f92794e67a6aac022 192.168.252.103:7007   replicates 987965baf505a9aa43e50e46c76189c51a8f17ecS: 2919e041dd3d1daf176d6800dcd262f4e727f366 192.168.252.103:7008   replicates 7c622ac191edd40dd61d9b79b27f6f69d02a5bbfCan I <span class="token keyword">set</span> the above configuration? <span class="token punctuation">(</span>type <span class="token string">'yes'</span> to accept<span class="token punctuation">)</span>: <span class="token function">yes</span></code></pre><p><strong>è¾“å…¥ yes</strong></p><pre class=" language-bash"><code class="language-bash"><span class="token operator">>></span><span class="token operator">></span> Nodes configuration updated<span class="token operator">>></span><span class="token operator">></span> Assign a different config epoch to each node<span class="token operator">>></span><span class="token operator">></span> Sending CLUSTER MEET messages to <span class="token function">join</span> the clusterWaiting <span class="token keyword">for</span> the cluster to join<span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span>.<span class="token operator">>></span><span class="token operator">></span> Performing Cluster Check <span class="token punctuation">(</span>using node 192.168.252.101:7000<span class="token punctuation">)</span>M: 7c622ac191edd40dd61d9b79b27f6f69d02a5bbf 192.168.252.101:7000   slots:0-4095 <span class="token punctuation">(</span>4096 slots<span class="token punctuation">)</span> master   2 additional replica<span class="token punctuation">(</span>s<span class="token punctuation">)</span>S: 6555292fed9c5d52fcf5b983c441aff6f96923d5 192.168.252.102:7004   slots: <span class="token punctuation">(</span>0 slots<span class="token punctuation">)</span> slave   replicates 7c622ac191edd40dd61d9b79b27f6f69d02a5bbfM: 44c81c15b01d992cb9ede4ad35477ec853d70723 192.168.252.101:7001   slots:12288-16383 <span class="token punctuation">(</span>4096 slots<span class="token punctuation">)</span> master   1 additional replica<span class="token punctuation">(</span>s<span class="token punctuation">)</span>S: 2919e041dd3d1daf176d6800dcd262f4e727f366 192.168.252.103:7008   slots: <span class="token punctuation">(</span>0 slots<span class="token punctuation">)</span> slave   replicates 7c622ac191edd40dd61d9b79b27f6f69d02a5bbfM: f1abb62a8c9b448ea14db421bdfe3f1d8075189c 192.168.252.103:7006   slots:8192-12287 <span class="token punctuation">(</span>4096 slots<span class="token punctuation">)</span> master   1 additional replica<span class="token punctuation">(</span>s<span class="token punctuation">)</span>S: eb4067373d36d8a8df07951f92794e67a6aac022 192.168.252.103:7007   slots: <span class="token punctuation">(</span>0 slots<span class="token punctuation">)</span> slave   replicates 987965baf505a9aa43e50e46c76189c51a8f17ecS: 38f03c27af39723e1828eb62d1775c4b6e2c3638 192.168.252.101:7002   slots: <span class="token punctuation">(</span>0 slots<span class="token punctuation">)</span> slave   replicates f1abb62a8c9b448ea14db421bdfe3f1d8075189cS: 2b5ba254a0405d4efde4c459867b15176f79244a 192.168.252.102:7005   slots: <span class="token punctuation">(</span>0 slots<span class="token punctuation">)</span> slave   replicates 44c81c15b01d992cb9ede4ad35477ec853d70723M: 987965baf505a9aa43e50e46c76189c51a8f17ec 192.168.252.102:7003   slots:4096-8191 <span class="token punctuation">(</span>4096 slots<span class="token punctuation">)</span> master   1 additional replica<span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">[</span>OK<span class="token punctuation">]</span> All nodes agree about slots configuration.<span class="token operator">>></span><span class="token operator">></span> Check <span class="token keyword">for</span> <span class="token function">open</span> slots<span class="token punctuation">..</span>.<span class="token operator">>></span><span class="token operator">></span> Check slots coverage<span class="token punctuation">..</span>.<span class="token punctuation">[</span>OK<span class="token punctuation">]</span> All 16384 slots covered.</code></pre><h3 id="å…³é—­é›†ç¾¤"><a href="#å…³é—­é›†ç¾¤" class="headerlink" title="å…³é—­é›†ç¾¤"></a>å…³é—­é›†ç¾¤</h3><p>è¿™æ ·ä¹Ÿå¯ä»¥ï¼Œæ¨è</p><pre class=" language-bash"><code class="language-bash">$ <span class="token function">pkill</span> redis</code></pre><p>å¾ªç¯èŠ‚ç‚¹é€ä¸ªå…³é—­</p><pre class=" language-bash"><code class="language-bash">$ <span class="token keyword">for</span><span class="token variable"><span class="token punctuation">((</span>i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;=</span><span class="token number">2</span><span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">))</span></span><span class="token punctuation">;</span> <span class="token keyword">do</span> /opt/redis-4.0.1/src/redis-cli -c -h 192.168.252.101 -p 700<span class="token variable">$i</span> <span class="token function">shutdown</span><span class="token punctuation">;</span> <span class="token keyword">done</span>$ <span class="token keyword">for</span><span class="token variable"><span class="token punctuation">((</span>i<span class="token operator">=</span><span class="token number">3</span><span class="token punctuation">;</span>i<span class="token operator">&lt;=</span><span class="token number">5</span><span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">))</span></span><span class="token punctuation">;</span> <span class="token keyword">do</span> /opt/redis-4.0.1/src/redis-cli -c -h 192.168.252.102 -p 700<span class="token variable">$i</span> <span class="token function">shutdown</span><span class="token punctuation">;</span> <span class="token keyword">done</span>$ <span class="token keyword">for</span><span class="token variable"><span class="token punctuation">((</span>i<span class="token operator">=</span><span class="token number">6</span><span class="token punctuation">;</span>i<span class="token operator">&lt;=</span><span class="token number">8</span><span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">))</span></span><span class="token punctuation">;</span> <span class="token keyword">do</span> /opt/redis-4.0.1/src/redis-cli -c -h 192.168.252.103 -p 700<span class="token variable">$i</span> <span class="token function">shutdown</span><span class="token punctuation">;</span> <span class="token keyword">done</span></code></pre><h3 id="é›†ç¾¤éªŒè¯"><a href="#é›†ç¾¤éªŒè¯" class="headerlink" title="é›†ç¾¤éªŒè¯"></a>é›†ç¾¤éªŒè¯</h3><h4 id="è¿æ¥é›†ç¾¤æµ‹è¯•"><a href="#è¿æ¥é›†ç¾¤æµ‹è¯•" class="headerlink" title="è¿æ¥é›†ç¾¤æµ‹è¯•"></a>è¿æ¥é›†ç¾¤æµ‹è¯•</h4><p>å‚æ•° -C å¯è¿æ¥åˆ°é›†ç¾¤ï¼Œå› ä¸º redis.conf å°† bind æ”¹ä¸ºäº†ipåœ°å€ï¼Œæ‰€ä»¥ -h å‚æ•°ä¸å¯ä»¥çœç•¥ï¼Œ-p å‚æ•°ä¸ºç«¯å£å·</p><ul><li>æˆ‘ä»¬åœ¨192.168.252.101æœºå™¨redis 7000 çš„èŠ‚ç‚¹set ä¸€ä¸ªkey</li></ul><pre class=" language-bash"><code class="language-bash">$ /opt/redis-4.0.1/src/redis-cli -h 192.168.252.101 -c -p 7000192.168.252.101:7000<span class="token operator">></span> <span class="token keyword">set</span> name www.ymq.io-<span class="token operator">></span> Redirected to slot <span class="token punctuation">[</span>5798<span class="token punctuation">]</span> located at 192.168.252.102:7003OK192.168.252.102:7003<span class="token operator">></span> get name<span class="token string">"www.ymq.io"</span>192.168.252.102:7003<span class="token operator">></span></code></pre><p>å‘ç°redis set name ä¹‹åé‡å®šå‘åˆ°192.168.252.102æœºå™¨ redis 7003 è¿™ä¸ªèŠ‚ç‚¹</p><ul><li>æˆ‘ä»¬åœ¨192.168.252.103æœºå™¨redis 7008 çš„èŠ‚ç‚¹getä¸€ä¸ªkey</li></ul><pre class=" language-bash"><code class="language-bash"><span class="token punctuation">[</span>root@localhost redis-cluster<span class="token punctuation">]</span><span class="token comment" spellcheck="true"># /opt/redis-4.0.1/src/redis-cli -h 192.168.252.103 -c -p 7008</span>192.168.252.103:7008<span class="token operator">></span> get name-<span class="token operator">></span> Redirected to slot <span class="token punctuation">[</span>5798<span class="token punctuation">]</span> located at 192.168.252.102:7003<span class="token string">"www.ymq.io"</span>192.168.252.102:7003<span class="token operator">></span> </code></pre><p>å‘ç°redis get name é‡å®šå‘åˆ°192.168.252.102æœºå™¨ redis 7003 è¿™ä¸ªèŠ‚ç‚¹</p><blockquote><p>å¦‚æœæ‚¨çœ‹åˆ°è¿™æ ·çš„ç°è±¡ï¼Œè¯´æ˜é›†ç¾¤å·²ç»æ˜¯å¯ç”¨çš„äº†</p></blockquote><h3 id="æ£€æŸ¥é›†ç¾¤çŠ¶æ€"><a href="#æ£€æŸ¥é›†ç¾¤çŠ¶æ€" class="headerlink" title="æ£€æŸ¥é›†ç¾¤çŠ¶æ€"></a>æ£€æŸ¥é›†ç¾¤çŠ¶æ€</h3><pre class=" language-bash"><code class="language-bash">$ /opt/redis-4.0.1/src/redis-trib.rb check 192.168.252.101:7000<span class="token operator">>></span><span class="token operator">></span> Performing Cluster Check <span class="token punctuation">(</span>using node 192.168.252.101:7000<span class="token punctuation">)</span>M: 7c622ac191edd40dd61d9b79b27f6f69d02a5bbf 192.168.252.101:7000   slots:0-4095 <span class="token punctuation">(</span>4096 slots<span class="token punctuation">)</span> master   2 additional replica<span class="token punctuation">(</span>s<span class="token punctuation">)</span>S: 6555292fed9c5d52fcf5b983c441aff6f96923d5 192.168.252.102:7004   slots: <span class="token punctuation">(</span>0 slots<span class="token punctuation">)</span> slave   replicates 7c622ac191edd40dd61d9b79b27f6f69d02a5bbfM: 44c81c15b01d992cb9ede4ad35477ec853d70723 192.168.252.101:7001   slots:12288-16383 <span class="token punctuation">(</span>4096 slots<span class="token punctuation">)</span> master   1 additional replica<span class="token punctuation">(</span>s<span class="token punctuation">)</span>S: 2919e041dd3d1daf176d6800dcd262f4e727f366 192.168.252.103:7008   slots: <span class="token punctuation">(</span>0 slots<span class="token punctuation">)</span> slave   replicates 7c622ac191edd40dd61d9b79b27f6f69d02a5bbfM: f1abb62a8c9b448ea14db421bdfe3f1d8075189c 192.168.252.103:7006   slots:8192-12287 <span class="token punctuation">(</span>4096 slots<span class="token punctuation">)</span> master   1 additional replica<span class="token punctuation">(</span>s<span class="token punctuation">)</span>S: eb4067373d36d8a8df07951f92794e67a6aac022 192.168.252.103:7007   slots: <span class="token punctuation">(</span>0 slots<span class="token punctuation">)</span> slave   replicates 987965baf505a9aa43e50e46c76189c51a8f17ecS: 38f03c27af39723e1828eb62d1775c4b6e2c3638 192.168.252.101:7002   slots: <span class="token punctuation">(</span>0 slots<span class="token punctuation">)</span> slave   replicates f1abb62a8c9b448ea14db421bdfe3f1d8075189cS: 2b5ba254a0405d4efde4c459867b15176f79244a 192.168.252.102:7005   slots: <span class="token punctuation">(</span>0 slots<span class="token punctuation">)</span> slave   replicates 44c81c15b01d992cb9ede4ad35477ec853d70723M: 987965baf505a9aa43e50e46c76189c51a8f17ec 192.168.252.102:7003   slots:4096-8191 <span class="token punctuation">(</span>4096 slots<span class="token punctuation">)</span> master   1 additional replica<span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">[</span>OK<span class="token punctuation">]</span> All nodes agree about slots configuration.<span class="token operator">>></span><span class="token operator">></span> Check <span class="token keyword">for</span> <span class="token function">open</span> slots<span class="token punctuation">..</span>.<span class="token operator">>></span><span class="token operator">></span> Check slots coverage<span class="token punctuation">..</span>.<span class="token punctuation">[</span>OK<span class="token punctuation">]</span> All 16384 slots covered.</code></pre><h3 id="åˆ—å‡ºé›†ç¾¤èŠ‚ç‚¹"><a href="#åˆ—å‡ºé›†ç¾¤èŠ‚ç‚¹" class="headerlink" title="åˆ—å‡ºé›†ç¾¤èŠ‚ç‚¹"></a>åˆ—å‡ºé›†ç¾¤èŠ‚ç‚¹</h3><p>åˆ—å‡ºé›†ç¾¤å½“å‰å·²çŸ¥çš„æ‰€æœ‰èŠ‚ç‚¹ï¼ˆnodeï¼‰ï¼Œä»¥åŠè¿™äº›èŠ‚ç‚¹çš„ç›¸å…³ä¿¡æ¯</p><pre class=" language-bash"><code class="language-bash">$ /opt/redis-4.0.1/src/redis-cli -h 192.168.252.101 -c -p 7000192.168.252.101:7000<span class="token operator">></span> cluster nodes6555292fed9c5d52fcf5b983c441aff6f96923d5 192.168.252.102:7004@17004 slave 7c622ac191edd40dd61d9b79b27f6f69d02a5bbf 0 1502815268317 5 connected44c81c15b01d992cb9ede4ad35477ec853d70723 192.168.252.101:7001@17001 master - 0 1502815268000 2 connected 12288-163832919e041dd3d1daf176d6800dcd262f4e727f366 192.168.252.103:7008@17008 slave 7c622ac191edd40dd61d9b79b27f6f69d02a5bbf 0 1502815269000 9 connected7c622ac191edd40dd61d9b79b27f6f69d02a5bbf 192.168.252.101:7000@17000 myself,master - 0 1502815269000 1 connected 0-4095f1abb62a8c9b448ea14db421bdfe3f1d8075189c 192.168.252.103:7006@17006 master - 0 1502815269000 7 connected 8192-12287eb4067373d36d8a8df07951f92794e67a6aac022 192.168.252.103:7007@17007 slave 987965baf505a9aa43e50e46c76189c51a8f17ec 0 1502815267000 8 connected38f03c27af39723e1828eb62d1775c4b6e2c3638 192.168.252.101:7002@17002 slave f1abb62a8c9b448ea14db421bdfe3f1d8075189c 0 1502815269327 7 connected2b5ba254a0405d4efde4c459867b15176f79244a 192.168.252.102:7005@17005 slave 44c81c15b01d992cb9ede4ad35477ec853d70723 0 1502815270336 6 connected987965baf505a9aa43e50e46c76189c51a8f17ec 192.168.252.102:7003@17003 master - 0 1502815271345 4 connected 4096-8191192.168.252.101:7000<span class="token operator">></span> </code></pre><h3 id="æ‰“å°é›†ç¾¤ä¿¡æ¯"><a href="#æ‰“å°é›†ç¾¤ä¿¡æ¯" class="headerlink" title="æ‰“å°é›†ç¾¤ä¿¡æ¯"></a>æ‰“å°é›†ç¾¤ä¿¡æ¯</h3><pre class=" language-bash"><code class="language-bash">$ 192.168.252.101:7000<span class="token operator">></span> cluster infocluster_state:okcluster_slots_assigned:16384cluster_slots_ok:16384cluster_slots_pfail:0cluster_slots_fail:0cluster_known_nodes:9cluster_size:4cluster_current_epoch:9cluster_my_epoch:1cluster_stats_messages_ping_sent:485cluster_stats_messages_pong_sent:485cluster_stats_messages_sent:970cluster_stats_messages_ping_received:477cluster_stats_messages_pong_received:485cluster_stats_messages_meet_received:8cluster_stats_messages_received:970192.168.252.101:7000<span class="token operator">></span> </code></pre><h3 id="é›†ç¾¤å‘½ä»¤"><a href="#é›†ç¾¤å‘½ä»¤" class="headerlink" title="é›†ç¾¤å‘½ä»¤"></a>é›†ç¾¤å‘½ä»¤</h3><p>è¯­æ³•æ ¼å¼</p><pre class=" language-bash"><code class="language-bash">redis-cli -c -p port</code></pre><h3 id="é›†ç¾¤"><a href="#é›†ç¾¤" class="headerlink" title="é›†ç¾¤"></a>é›†ç¾¤</h3><pre class=" language-bash"><code class="language-bash">cluster info ï¼šæ‰“å°é›†ç¾¤çš„ä¿¡æ¯cluster nodes ï¼šåˆ—å‡ºé›†ç¾¤å½“å‰å·²çŸ¥çš„æ‰€æœ‰èŠ‚ç‚¹ï¼ˆ nodeï¼‰ï¼Œä»¥åŠè¿™äº›èŠ‚ç‚¹çš„ç›¸å…³ä¿¡æ¯ã€‚</code></pre><h3 id="èŠ‚ç‚¹"><a href="#èŠ‚ç‚¹" class="headerlink" title="èŠ‚ç‚¹"></a>èŠ‚ç‚¹</h3><pre class=" language-bash"><code class="language-bash">cluster meet <span class="token operator">&lt;</span>ip<span class="token operator">></span> <span class="token operator">&lt;</span>port<span class="token operator">></span> ï¼šå°† ip å’Œ port æ‰€æŒ‡å®šçš„èŠ‚ç‚¹æ·»åŠ åˆ°é›†ç¾¤å½“ä¸­ï¼Œè®©å®ƒæˆä¸ºé›†ç¾¤çš„ä¸€ä»½å­ã€‚cluster forget <span class="token operator">&lt;</span>node_id<span class="token operator">></span> ï¼šä»é›†ç¾¤ä¸­ç§»é™¤ node_id æŒ‡å®šçš„èŠ‚ç‚¹ã€‚cluster replicate <span class="token operator">&lt;</span>node_id<span class="token operator">></span> ï¼šå°†å½“å‰èŠ‚ç‚¹è®¾ç½®ä¸º node_id æŒ‡å®šçš„èŠ‚ç‚¹çš„ä»èŠ‚ç‚¹ã€‚cluster saveconfig ï¼šå°†èŠ‚ç‚¹çš„é…ç½®æ–‡ä»¶ä¿å­˜åˆ°ç¡¬ç›˜é‡Œé¢ã€‚</code></pre><h3 id="æ§½-slot"><a href="#æ§½-slot" class="headerlink" title="æ§½(slot)"></a>æ§½(slot)</h3><pre class=" language-bash"><code class="language-bash">cluster addslots <span class="token operator">&lt;</span>slot<span class="token operator">></span> <span class="token punctuation">[</span>slot <span class="token punctuation">..</span>.<span class="token punctuation">]</span> ï¼šå°†ä¸€ä¸ªæˆ–å¤šä¸ªæ§½ï¼ˆ slotï¼‰æŒ‡æ´¾ï¼ˆ assignï¼‰ç»™å½“å‰èŠ‚ç‚¹ã€‚cluster delslots <span class="token operator">&lt;</span>slot<span class="token operator">></span> <span class="token punctuation">[</span>slot <span class="token punctuation">..</span>.<span class="token punctuation">]</span> ï¼šç§»é™¤ä¸€ä¸ªæˆ–å¤šä¸ªæ§½å¯¹å½“å‰èŠ‚ç‚¹çš„æŒ‡æ´¾ã€‚cluster flushslots ï¼šç§»é™¤æŒ‡æ´¾ç»™å½“å‰èŠ‚ç‚¹çš„æ‰€æœ‰æ§½ï¼Œè®©å½“å‰èŠ‚ç‚¹å˜æˆä¸€ä¸ªæ²¡æœ‰æŒ‡æ´¾ä»»ä½•æ§½çš„èŠ‚ç‚¹ã€‚cluster setslot <span class="token operator">&lt;</span>slot<span class="token operator">></span> node <span class="token operator">&lt;</span>node_id<span class="token operator">></span> ï¼šå°†æ§½ slot æŒ‡æ´¾ç»™ node_id æŒ‡å®šçš„èŠ‚ç‚¹ï¼Œå¦‚æœæ§½å·²ç»æŒ‡æ´¾ç»™å¦ä¸€ä¸ªèŠ‚ç‚¹ï¼Œé‚£ä¹ˆå…ˆè®©å¦ä¸€ä¸ªèŠ‚ç‚¹åˆ é™¤è¯¥æ§½<span class="token operator">></span>ï¼Œç„¶åå†è¿›è¡ŒæŒ‡æ´¾ã€‚cluster setslot <span class="token operator">&lt;</span>slot<span class="token operator">></span> migrating <span class="token operator">&lt;</span>node_id<span class="token operator">></span> ï¼šå°†æœ¬èŠ‚ç‚¹çš„æ§½ slot è¿ç§»åˆ° node_id æŒ‡å®šçš„èŠ‚ç‚¹ä¸­ã€‚cluster setslot <span class="token operator">&lt;</span>slot<span class="token operator">></span> importing <span class="token operator">&lt;</span>node_id<span class="token operator">></span> ï¼šä» node_id æŒ‡å®šçš„èŠ‚ç‚¹ä¸­å¯¼å…¥æ§½ slot åˆ°æœ¬èŠ‚ç‚¹ã€‚cluster setslot <span class="token operator">&lt;</span>slot<span class="token operator">></span> stable ï¼šå–æ¶ˆå¯¹æ§½ slot çš„å¯¼å…¥ï¼ˆ importï¼‰æˆ–è€…è¿ç§»ï¼ˆ migrateï¼‰ã€‚</code></pre><h3 id="é”®"><a href="#é”®" class="headerlink" title="é”®"></a>é”®</h3><pre class=" language-bash"><code class="language-bash">cluster keyslot <span class="token operator">&lt;</span>key<span class="token operator">></span> ï¼šè®¡ç®—é”® key åº”è¯¥è¢«æ”¾ç½®åœ¨å“ªä¸ªæ§½ä¸Šã€‚cluster countkeysinslot <span class="token operator">&lt;</span>slot<span class="token operator">></span> ï¼šè¿”å›æ§½ slot ç›®å‰åŒ…å«çš„é”®å€¼å¯¹æ•°é‡ã€‚cluster getkeysinslot <span class="token operator">&lt;</span>slot<span class="token operator">></span> <span class="token operator">&lt;</span>count<span class="token operator">></span> ï¼šè¿”å› count ä¸ª slot æ§½ä¸­çš„é”® ã€‚</code></pre><blockquote><p>ä½œè€…ï¼šé¹ç£Š<br>å‡ºå¤„ï¼š<a href="http://www.ymq.io" target="_blank" rel="noopener">http://www.ymq.io</a><br>Emailï¼š<a href="mailto:admin@souyunku.com" target="_blank" rel="noopener">admin@souyunku.com</a><br>å‚è€ƒé“¾æ¥ï¼š<a href="https://segmentfault.com/a/1190000010682551" target="_blank" rel="noopener">https://segmentfault.com/a/1190000010682551</a></p></blockquote><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> Nosql </category>
          
      </categories>
      
      
        <tags>
            
            <tag> redis </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Redisä¸»ä»é…ç½®</title>
      <link href="/2019/11/15/redis2/"/>
      <url>/2019/11/15/redis2/</url>
      
        <content type="html"><![CDATA[<h3 id="ä¸€ã€å®‰è£…Redis"><a href="#ä¸€ã€å®‰è£…Redis" class="headerlink" title="ä¸€ã€å®‰è£…Redis"></a>ä¸€ã€å®‰è£…Redis</h3><p>å¯ä»¥å‚è€ƒ <a href="https://www.faber.cc/2019/11/15/redis1/">redisçš„å®‰è£…ä¸ä»‹ç»</a></p><h3 id="äºŒã€ä¿®æ”¹Rdisé…ç½®æ–‡ä»¶"><a href="#äºŒã€ä¿®æ”¹Rdisé…ç½®æ–‡ä»¶" class="headerlink" title="äºŒã€ä¿®æ”¹Rdisé…ç½®æ–‡ä»¶"></a>äºŒã€ä¿®æ”¹Rdisé…ç½®æ–‡ä»¶</h3><p>è¿™é‡Œç”¨ä¸€ä¸ªä¸»åº“ã€ä¸¤ä¸ªä»åº“æ¥ä¸¾ä¾‹ï¼š<br>åˆ›å»ºä¸»åº“çš„é…ç½®æ–‡ä»¶ï¼šï¼ˆæ–‡ä»¶å­˜æ”¾ä½ç½®ä¹Ÿæœ€å¥½æ”¾åœ¨æŒ‡å®šç›®å½•ä¸‹é¢æ–¹ä¾¿æŸ¥æ‰¾ï¼‰<br>æˆ‘åœ¨é…ç½®æ–‡ä»¶ç»Ÿä¸€æ”¾ç½®åœ¨/data/redis/confä¸­</p><pre class=" language-bash"><code class="language-bash">$ <span class="token function">cd</span> /data/redis/conf$ <span class="token function">cp</span> redis.conf redis-6379.conf  $ <span class="token function">cp</span> redis.conf redis-6380.conf $ <span class="token function">cp</span> redis.conf redis-6381.conf</code></pre><p><strong>redis-6379.confé…ç½®æ–‡ä»¶å¦‚ä¸‹ï¼š</strong></p><pre class=" language-bash"><code class="language-bash"><span class="token comment" spellcheck="true">#ä¸»è¡¨çš„é…ç½®æ–‡ä»¶</span><span class="token comment" spellcheck="true"># Redisä½¿ç”¨åå°æ¨¡å¼</span>daemonize <span class="token function">yes</span><span class="token comment" spellcheck="true"># æ³¨é‡Šä»¥ä¸‹å†…å®¹å¼€å¯è¿œç¨‹è®¿é—®</span><span class="token comment" spellcheck="true"># bind 127.0.0.1</span><span class="token comment" spellcheck="true"># ä¿®æ”¹å¯åŠ¨ç«¯å£ä¸º6379</span>port 6379<span class="token comment" spellcheck="true"># ä¿®æ”¹pidfileæŒ‡å‘è·¯å¾„--Redisä»¥å®ˆæŠ¤è¿›ç¨‹æ–¹å¼è¿è¡Œæ—¶æŠŠpidå†™å…¥æ–‡ä»¶</span>pidfile /data/redis/conf/redis_6379.pid<span class="token comment" spellcheck="true">#æ•°æ®åº“çš„å­˜æ”¾ä½ç½® è‡ªå·±å®šä¹‰</span><span class="token function">dir</span> /data/redis/db/master/</code></pre><p><strong>redis-6380.confé…ç½®æ–‡ä»¶å¦‚ä¸‹ï¼š</strong></p><pre class=" language-bash"><code class="language-bash"><span class="token comment" spellcheck="true"># Redisä½¿ç”¨åå°æ¨¡å¼</span>daemonize <span class="token function">yes</span><span class="token comment" spellcheck="true"># å…³é—­ä¿æŠ¤æ¨¡å¼</span><span class="token comment" spellcheck="true">#protected-mode no</span><span class="token comment" spellcheck="true"># æ³¨é‡Šä»¥ä¸‹å†…å®¹å¼€å¯è¿œç¨‹è®¿é—®</span><span class="token comment" spellcheck="true"># bind 127.0.0.1</span><span class="token comment" spellcheck="true"># ä¿®æ”¹å¯åŠ¨ç«¯å£ä¸º6379</span>port 6380<span class="token comment" spellcheck="true"># ä¿®æ”¹pidfileæŒ‡å‘è·¯å¾„</span>pidfile /data/redis/conf/redis_6380.pid<span class="token comment" spellcheck="true">#æ•°æ®åº“çš„å­˜æ”¾ä½ç½®</span><span class="token function">dir</span> /usr/local/redis-3.0.4/db/slave_one<span class="token comment" spellcheck="true">#Slaveofå‘½ä»¤å¯ä»¥å°†å½“å‰æœåŠ¡å™¨è½¬å˜ä¸ºæŒ‡å®šæœåŠ¡å™¨çš„ä»å±æœåŠ¡å™¨(slave server)ã€‚</span>slaveof 127.0.0.1 6379</code></pre><p><strong>redis-6381.confé…ç½®æ–‡ä»¶å¦‚ä¸‹ï¼š</strong></p><pre class=" language-bash"><code class="language-bash"><span class="token comment" spellcheck="true"># Redisä½¿ç”¨åå°æ¨¡å¼</span>daemonize <span class="token function">yes</span><span class="token comment" spellcheck="true"># å…³é—­ä¿æŠ¤æ¨¡å¼</span><span class="token comment" spellcheck="true">#protected-mode no</span><span class="token comment" spellcheck="true"># æ³¨é‡Šä»¥ä¸‹å†…å®¹å¼€å¯è¿œç¨‹è®¿é—®</span><span class="token comment" spellcheck="true"># bind 127.0.0.1</span><span class="token comment" spellcheck="true"># ä¿®æ”¹å¯åŠ¨ç«¯å£ä¸º6379</span>port 6381<span class="token comment" spellcheck="true"># ä¿®æ”¹pidfileæŒ‡å‘è·¯å¾„</span>pidfile /data/redis/conf/redis_6381.pid<span class="token comment" spellcheck="true">#æ•°æ®åº“çš„å­˜æ”¾ä½ç½®</span><span class="token function">dir</span> /data/redis/db/slave_two/<span class="token comment" spellcheck="true">#Slaveofå‘½ä»¤å¯ä»¥å°†å½“å‰æœåŠ¡å™¨è½¬å˜ä¸ºæŒ‡å®šæœåŠ¡å™¨çš„ä»å±æœåŠ¡å™¨(slave server)ã€‚</span>slaveof 127.0.0.1 6379</code></pre><h3 id="ä¸‰ã€å¯åŠ¨RedisæœåŠ¡"><a href="#ä¸‰ã€å¯åŠ¨RedisæœåŠ¡" class="headerlink" title="ä¸‰ã€å¯åŠ¨RedisæœåŠ¡"></a>ä¸‰ã€å¯åŠ¨RedisæœåŠ¡</h3><p>ä½¿ç”¨æ–°åˆ›å»ºçš„é…ç½®æ–‡ä»¶å¯åŠ¨redisæœåŠ¡</p><pre class=" language-bash"><code class="language-bash">$ /data/redis/bin/redis-server /data/redis/conf/redis-6379.conf $ /data/redis/bin/redis-server /data/redis/conf/redis-6380.conf $ /data/redis/bin/redis-server /data/redis/conf/redis-6381.conf </code></pre><p>æ£€æŸ¥redisæ˜¯å¦å¯åŠ¨æˆåŠŸï¼Œå¦‚ä¸‹æ‰€ç¤ºè¡¨ç¤ºå¯åŠ¨æˆåŠŸã€‚</p><pre class=" language-bash"><code class="language-bash">$ <span class="token function">ps</span> -ef<span class="token operator">|</span><span class="token function">grep</span> redisroot    8898    1   0 20:29 ?       00:00:01  /data/redis/bin/redis-server  *:6379root    8956    1   0 20:30 ?       00:00:01  /data/redis/bin/redis-server  *:6380root    8959    1   0 20:30 ?       00:00:01  /data/redis/bin/redis-server  *:6381root   100325  2297  0 20:56 pts/1       00:00:01 <span class="token function">grep</span> redis</code></pre><h3 id="å››ã€éªŒè¯ä¸»ä»"><a href="#å››ã€éªŒè¯ä¸»ä»" class="headerlink" title="å››ã€éªŒè¯ä¸»ä»"></a>å››ã€éªŒè¯ä¸»ä»</h3><p>åˆ©ç”¨redis-cliè¿æ¥æœ¬åœ°redisè¿›è¡ŒæŸ¥çœ‹ã€‚é¦–å…ˆè¿æ¥redis-6379çš„å®¢æˆ·ç«¯ï¼š<br>åœ¨ä¸»åº“ä¸­æ’å…¥ä¸€æ¡æ•°æ®</p><pre class=" language-bash"><code class="language-bash"><span class="token comment" spellcheck="true">#é»˜è®¤è¿æ¥6379ç«¯å£</span>$ /data/redis/bin/redis-cli127.0.0.1:6379<span class="token operator">></span> <span class="token keyword">set</span> username <span class="token function">test</span>OK127.0.0.1:6379<span class="token operator">></span> get username<span class="token string">"test"</span>127.0.0.1:6379<span class="token operator">></span></code></pre><p>åˆ‡æ¢è‡³ä»åº“ã€‚æ£€æŸ¥æ•°æ®æ˜¯å¦å­˜åœ¨ã€‚å­˜åœ¨åŠé…ç½®ä¸»ä»ç”Ÿæ•ˆã€‚</p><pre class=" language-bash"><code class="language-bash"><span class="token comment" spellcheck="true">#è¿æ¥6380ä»åº“</span>/usr/local/bin/redis-cli -p 6380127.0.0.1:6379<span class="token operator">></span> get username<span class="token string">"test"</span>127.0.0.1:6379<span class="token operator">></span> quit<span class="token comment" spellcheck="true">#è¿æ¥6381ä»åº“</span>/usr/local/bin/redis-cli -p 6381127.0.0.1:6379<span class="token operator">></span> get username<span class="token string">"test"</span>127.0.0.1:6379<span class="token operator">></span> quit</code></pre><p>æˆ–è€…ç›´æ¥åœ¨rediså‘½ä»¤ä¸­è¾“å…¥ä»¥ä¸‹å†…å®¹</p><pre class=" language-bash"><code class="language-bash">$ /data/redis/bin/redis-cli127.0.0.1:6379<span class="token operator">></span> info replication<span class="token comment" spellcheck="true"># Replication</span>role:masterconnected_salves:2slave0:ip<span class="token operator">=</span>127.0.0.1,port<span class="token operator">=</span>6380,state<span class="token operator">=</span>online,offset<span class="token operator">=</span>11682,lag<span class="token operator">=</span>0slave0:ip<span class="token operator">=</span>127.0.0.1,port<span class="token operator">=</span>6381,state<span class="token operator">=</span>online,offset<span class="token operator">=</span>11682,lag<span class="token operator">=</span>0master_repl_offset:11682repl_backlog_active:1repl_backlog_size:1048567repl_backlog_first_byte_offset:2repl_backlog_histlen:11681<span class="token punctuation">..</span>.</code></pre><p>åˆ°æ­¤Redisçš„ä¸»ä»å·²ç»é…ç½®å®Œæˆ</p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> Nosql </category>
          
      </categories>
      
      
        <tags>
            
            <tag> redis </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Redisçš„å®‰è£…ä¸ä»‹ç»</title>
      <link href="/2019/11/15/redis1/"/>
      <url>/2019/11/15/redis1/</url>
      
        <content type="html"><![CDATA[<h3 id="ä¸€ã€Redisä»‹ç»"><a href="#ä¸€ã€Redisä»‹ç»" class="headerlink" title="ä¸€ã€Redisä»‹ç»"></a>ä¸€ã€Redisä»‹ç»</h3><p>Redisæ˜¯å½“å‰æ¯”è¾ƒçƒ­é—¨çš„NOSQLç³»ç»Ÿä¹‹ä¸€ï¼Œå®ƒæ˜¯ä¸€ä¸ªkey-valueå­˜å‚¨ç³»ç»Ÿã€‚å’ŒMemcacheç±»ä¼¼ï¼Œä½†å¾ˆå¤§ç¨‹åº¦è¡¥å¿äº†Memcacheçš„ä¸è¶³ï¼Œå®ƒæ”¯æŒå­˜å‚¨çš„valueç±»å‹ç›¸å¯¹æ›´å¤šï¼ŒåŒ…æ‹¬stringã€listã€setã€zsetå’Œhashã€‚è¿™äº›æ•°æ®ç±»å‹éƒ½æ”¯æŒpush/popã€add/removeåŠå–äº¤é›†å¹¶é›†å’Œå·®é›†åŠæ›´ä¸°å¯Œçš„æ“ä½œã€‚åœ¨æ­¤åŸºç¡€ä¸Šï¼ŒRedisæ”¯æŒå„ç§ä¸åŒæ–¹å¼çš„æ’åºã€‚<br><br>å’ŒMemcacheä¸€æ ·ï¼ŒRedisæ•°æ®éƒ½æ˜¯ç¼“å­˜åœ¨è®¡ç®—æœºå†…å­˜ä¸­ï¼Œä¸åŒçš„æ˜¯ï¼ŒMemcacheåªèƒ½å°†æ•°æ®ç¼“å­˜åˆ°å†…å­˜ä¸­ï¼Œæ— æ³•è‡ªåŠ¨å®šæœŸå†™å…¥ç¡¬ç›˜ï¼Œè¿™å°±è¡¨ç¤ºï¼Œä¸€æ–­ç”µæˆ–é‡å¯ï¼Œå†…å­˜æ¸…ç©ºï¼Œæ•°æ®ä¸¢å¤±ã€‚æ‰€ä»¥Memcacheçš„åº”ç”¨åœºæ™¯é€‚ç”¨äºç¼“å­˜æ— éœ€æŒä¹…åŒ–çš„æ•°æ®ã€‚è€ŒRedisä¸åŒçš„æ˜¯å®ƒä¼šå‘¨æœŸæ€§çš„æŠŠæ›´æ–°çš„æ•°æ®å†™å…¥ç£ç›˜æˆ–è€…æŠŠä¿®æ”¹æ“ä½œå†™å…¥è¿½åŠ çš„è®°å½•æ–‡ä»¶ï¼Œå®ç°æ•°æ®çš„æŒä¹…åŒ–ã€‚</p><h3 id="äºŒã€Redisçš„å®‰è£…"><a href="#äºŒã€Redisçš„å®‰è£…" class="headerlink" title="äºŒã€Redisçš„å®‰è£…"></a>äºŒã€Redisçš„å®‰è£…</h3><p>ä¸‹é¢ä»‹ç»åœ¨Linuxç¯å¢ƒä¸‹ï¼ŒRedisçš„å®‰è£…ä¸éƒ¨ç½²<br>1ã€é¦–å…ˆä¸Šå®˜ç½‘ä¸‹è½½Redis å‹ç¼©åŒ…ï¼Œåœ°å€ï¼š<a href="http://redis.io/download" target="_blank" rel="noopener">http://redis.io/download</a> ä¸‹è½½ç¨³å®šç‰ˆå³å¯ã€‚<br>2ã€é€šè¿‡è¿œç¨‹ç®¡ç†å·¥å…·ï¼Œå°†å‹ç¼©åŒ…æ‹·è´åˆ°LinuxæœåŠ¡å™¨ä¸­ï¼Œæå–å’Œç¼–è¯‘Redis</p><pre class=" language-bash"><code class="language-bash">$ <span class="token function">wget</span> http://download.redis.io/releases/redis-5.0.6.tar.gz$ <span class="token function">tar</span> xzf redis-5.0.6.tar.gz$ <span class="token function">cd</span> redis-5.0.6$ <span class="token function">make</span></code></pre><p>å®‰è£…ç»“æŸæ²¡æœ‰æŠ¥é”™å³å®‰è£…æˆåŠŸ<br>3ã€ä¸ºäº†æ–¹ä¾¿ç®¡ç†ï¼Œå°†Redisæ–‡ä»¶ä¸­çš„confé…ç½®æ–‡ä»¶å’Œå¸¸ç”¨å‘½ä»¤ç§»åŠ¨åˆ°ç»Ÿä¸€æ–‡ä»¶ä¸­ï¼Œåˆ›å»ºbinå’Œredis.confæ–‡ä»¶ï¼š</p><pre class=" language-bash"><code class="language-bash">$ <span class="token function">mkdir</span> -p /data/redis/bin$ <span class="token function">mkdir</span> -p /data/redis/conf$ <span class="token function">mv</span> /redis-5.0.6/redis.conf /data/redis/conf$ <span class="token function">cd</span> /redis-5.0.6/src$ <span class="token function">mv</span> mkreleasdhdr.sh redis-benchmark redis-check-aof redis-check-dump redis-cli redis-server /data/redis/bin</code></pre><p>4ã€ç¼–è¾‘confæ–‡ä»¶ï¼Œå°†daemonizeå±æ€§æ”¹ä¸ºyesï¼ˆè¡¨æ˜éœ€è¦åœ¨åå°è¿è¡Œï¼‰</p><pre class=" language-bash"><code class="language-bash"><span class="token comment" spellcheck="true">#æ˜¯å¦åœ¨åå°æ‰§è¡Œï¼Œyesï¼šåå°è¿è¡Œï¼›noï¼šä¸æ˜¯åå°è¿è¡Œï¼ˆè€ç‰ˆæœ¬é»˜è®¤ï¼‰</span>daemonize <span class="token function">yes</span></code></pre><p>5ã€æ‰§è¡Œ<code>Redis-server</code>å‘½ä»¤ï¼Œå¯åŠ¨RedisæœåŠ¡</p><pre class=" language-bash"><code class="language-bash">$ /data/redis/bin/redis-server /data/redis/conf/redis.conf</code></pre><p>6ã€å¯ä»¥ä½¿ç”¨å†…ç½®å®¢æˆ·ç«¯ä¸Redisè¿›è¡Œäº¤äº’</p><pre class=" language-bash"><code class="language-bash">$ /data/redis/bin/redis-cli$ 127.0.0.1:6379<span class="token operator">></span> </code></pre><h3 id="ä¸‰ã€Redisé…ç½®è¯¦è§£"><a href="#ä¸‰ã€Redisé…ç½®è¯¦è§£" class="headerlink" title="ä¸‰ã€Redisé…ç½®è¯¦è§£"></a>ä¸‰ã€Redisé…ç½®è¯¦è§£</h3><pre class=" language-bash"><code class="language-bash"><span class="token comment" spellcheck="true">######################### é€šç”¨ #########################</span><span class="token comment" spellcheck="true"># æ˜¯å¦åœ¨åå°æ‰§è¡Œï¼Œyesï¼šåå°è¿è¡Œï¼›noï¼šä¸æ˜¯åå°è¿è¡Œ</span>daemonize <span class="token function">yes</span><span class="token comment" spellcheck="true"># åå°è¿›ç¨‹çš„pidæ–‡ä»¶å­˜å‚¨ä½ç½®</span>pidfile /var/run/redis.pid<span class="token comment" spellcheck="true"># é»˜è®¤ç›‘å¬ç«¯å£</span>port 6379<span class="token comment" spellcheck="true"># åœ¨é«˜å¹¶å‘çš„ç¯å¢ƒä¸­ï¼Œä¸ºé¿å…æ…¢å®¢æˆ·ç«¯çš„è¿æ¥é—®é¢˜ï¼Œéœ€è¦è®¾ç½®ä¸€ä¸ªé«˜é€Ÿåå°æ—¥å¿—</span>tcp-backlog 511<span class="token comment" spellcheck="true"># åªæ¥å—ä»¥ä¸‹ç»‘å®šçš„IPè¯·æ±‚</span><span class="token comment" spellcheck="true"># Examples:</span><span class="token comment" spellcheck="true"># bind 192.168.1.100 10.0.0.1</span>bind 127.0.0.1<span class="token comment" spellcheck="true"># è®¾ç½®unixç›‘å¬ï¼Œé»˜è®¤ä¸ºç©º</span><span class="token comment" spellcheck="true"># unixsocket /tmp/redis.sock</span><span class="token comment" spellcheck="true"># unixsocketperm 700</span><span class="token comment" spellcheck="true">#å®¢æˆ·ç«¯ç©ºé—²å¤šé•¿æ—¶é—´ï¼Œå…³é—­é“¾æ¥ï¼Œ0è¡¨ç¤ºä¸å…³é—­</span><span class="token function">timeout</span> 0<span class="token comment" spellcheck="true"># TCP keepalive.</span><span class="token comment" spellcheck="true"># å¦‚æœæ˜¯éé›¶å€¼ï¼Œå½“å¤±å»é“¾æ¥æ—¶ï¼Œä¼šä½¿ç”¨SO_KEEPALIVEå‘é€TCP ACKs åˆ°å®¢æˆ·ç«¯ã€‚</span><span class="token comment" spellcheck="true"># è¿™ä¸ªå‚æ•°æœ‰ä¸¤ä¸ªä½œç”¨:</span><span class="token comment" spellcheck="true"># 1.æ£€æµ‹æ–­ç‚¹ã€‚</span><span class="token comment" spellcheck="true"># 2.ä»ç½‘ç»œä¸­é—´è®¾å¤‡æ¥çœ‹ï¼Œå°±æ˜¯ä¿æŒé“¾æ¥</span><span class="token comment" spellcheck="true"># åœ¨Linuxä¸Šï¼Œè®¾å®šçš„æ—¶é—´å°±æ˜¯å‘é€ACKsçš„å‘¨æœŸã€‚</span><span class="token comment" spellcheck="true"># æ³¨æ„ï¼šè¾¾åˆ°åŒå€çš„è®¾å®šæ—¶é—´æ‰ä¼šå…³é—­é“¾æ¥ã€‚åœ¨å…¶ä»–å†…æ ¸ä¸Šï¼Œå‘¨æœŸä¾èµ–äºå†…æ ¸è®¾ç½®ã€‚</span><span class="token comment" spellcheck="true"># ä¸€ä¸ªæ¯”è¾ƒåˆç†çš„å€¼ä¸º60s</span>tcp-keepalive 0<span class="token comment" spellcheck="true"># æŒ‡å®šæ—¥å¿—çº§åˆ«ï¼Œä»¥ä¸‹è®°å½•ä¿¡æ¯ä¾æ¬¡é€’å‡</span><span class="token comment" spellcheck="true"># debugç”¨äºå¼€å‘/æµ‹è¯•</span><span class="token comment" spellcheck="true"># verboseæ²¡debugé‚£ä¹ˆè¯¦ç»†</span><span class="token comment" spellcheck="true"># noticeé€‚ç”¨äºç”Ÿäº§çº¿</span><span class="token comment" spellcheck="true"># warningåªè®°å½•éå¸¸é‡è¦çš„ä¿¡æ¯</span>loglevel notice<span class="token comment" spellcheck="true">#æ—¥å¿—æ–‡ä»¶åç§°ï¼Œå¦‚æœä¸ºstdoutåˆ™è¾“å‡ºåˆ°æ ‡å‡†è¾“å‡ºç«¯ï¼Œå¦‚æœæ˜¯ä»¥åå°è¿›ç¨‹è¿è¡Œåˆ™ä¸äº§ç”Ÿæ—¥å¿—</span>logfile <span class="token string">""</span><span class="token comment" spellcheck="true"># è¦æƒ³å¯ç”¨ç³»ç»Ÿæ—¥å¿—è®°å½•å™¨ï¼Œè®¾ç½®ä¸€ä¸‹é€‰é¡¹ä¸ºyes</span><span class="token comment" spellcheck="true"># syslog-enabled no</span><span class="token comment" spellcheck="true"># æŒ‡æ˜syslogèº«ä»½</span><span class="token comment" spellcheck="true"># syslog-ident redis</span><span class="token comment" spellcheck="true"># æŒ‡æ˜syslogè®¾å¤‡ã€‚å¿…é¡»æ˜¯ä¸€ä¸ªç”¨æˆ·æˆ–è€…æ˜¯local0 ~ local7ä¹‹ä¸€</span><span class="token comment" spellcheck="true"># syslog-facility local0</span><span class="token comment" spellcheck="true">#è®¾ç½®æ•°æ®åº“æ•°ç›®ï¼Œç¬¬ä¸€ä¸ªæ•°æ®åº“ç¼–å·ä¸ºï¼š0</span>databases 16<span class="token comment" spellcheck="true">######################### å¿«ç…§ #########################</span><span class="token comment" spellcheck="true"># åœ¨ä»€ä¹ˆæ¡ä»¶ä¸‹ä¿å­˜æ•°æ®åº“åˆ°ç£ç›˜ï¼Œæ¡ä»¶å¯ä»¥æœ‰å¾ˆå¤šä¸ªï¼Œæ»¡è¶³ä»»ä½•ä¸€ä¸ªæ¡ä»¶éƒ½ä¼šè¿›è¡Œå¿«ç…§å­˜å‚¨</span><span class="token comment" spellcheck="true"># åœ¨900ç§’ä¹‹å†…æœ‰ä¸€æ¬¡keyçš„å˜åŒ–</span>save 900 1<span class="token comment" spellcheck="true"># åœ¨300ç§’ä¹‹å†…ï¼Œæœ‰10ä¸ªkeyçš„å˜åŒ–</span>save 300 10<span class="token comment" spellcheck="true"># åœ¨60ç§’ä¹‹å†…æœ‰10000ä¸ªkeyå˜åŒ–</span>save 60 10000<span class="token comment" spellcheck="true"># å½“æŒä¹…åŒ–å¤±è´¥çš„æ—¶å€™ï¼Œæ˜¯å¦ç»§ç»­æä¾›æœåŠ¡</span>stop-writes-on-bgsave-error <span class="token function">yes</span><span class="token comment" spellcheck="true"># å½“å†™å…¥ç£ç›˜æ—¶ï¼Œæ˜¯å¦ä½¿ç”¨LZFç®—æ³•å‹ç¼©æ•°æ®ï¼Œé»˜è®¤ä¸ºyes</span>rdbcompression <span class="token function">yes</span><span class="token comment" spellcheck="true"># æ˜¯å¦æ·»åŠ CRC64æ ¡éªŒåˆ°æ¯ä¸ªæ–‡ä»¶æœ«å°¾--èŠ±è´¹æ—¶é—´ä¿è¯å®‰å…¨</span>rdbchecksum <span class="token function">yes</span><span class="token comment" spellcheck="true"># ç£ç›˜ä¸Šæ•°æ®åº“çš„ä¿å­˜åç§°</span>dbfilename dump.rdb<span class="token comment" spellcheck="true"># Rediså·¥ä½œç›®å½•ï¼Œä»¥ä¸Šæ•°æ®åº“ä¿å­˜æ–‡ä»¶å’ŒAOFæ—¥å¿—éƒ½ä¼šå†™å…¥æ­¤ç›®å½•</span><span class="token function">dir</span> ./<span class="token comment" spellcheck="true">######################### ä¸»ä»åŒæ­¥ #########################</span><span class="token comment" spellcheck="true"># ä¸»ä»å¤åˆ¶ï¼Œå½“æœ¬æœºæ˜¯slaveæ—¶é…ç½®</span><span class="token comment" spellcheck="true"># slaveof &lt;masterip> &lt;masterport></span><span class="token comment" spellcheck="true"># å½“ä¸»æœºéœ€è¦å¯†ç éªŒè¯æ—¶å€™é…ç½®</span><span class="token comment" spellcheck="true"># masterauth &lt;master-password></span><span class="token comment" spellcheck="true"># å½“slaveå’Œmasterä¸¢å¤±é“¾æ¥ï¼Œæˆ–æ­£å¤„äºåŒæ­¥è¿‡ç¨‹ä¸­ã€‚æ˜¯å¦å“åº”å®¢æˆ·ç«¯è¯·æ±‚</span><span class="token comment" spellcheck="true"># è®¾ç½®ä¸ºyesè¡¨ç¤ºå“åº”</span><span class="token comment" spellcheck="true"># è®¾ç½®ä¸ºnoï¼Œç›´æ¥è¿”å›"SYNC with master in progress"ï¼ˆæ­£åœ¨å’Œä¸»æœåŠ¡å™¨åŒæ­¥ä¸­ï¼‰</span>slave-serve-stale-data <span class="token function">yes</span><span class="token comment" spellcheck="true"># è®¾ç½®slaveæ˜¯å¦ä¸ºåªè¯»ã€‚</span><span class="token comment" spellcheck="true"># æ³¨æ„ï¼šå³ä½¿slaveè®¾ç½®ä¸ºåªè¯»ï¼Œä¹Ÿä¸èƒ½ä»¤å…¶æš´éœ²åœ¨ä¸å—ä¿¡ä»»çš„ç½‘ç»œç¯å¢ƒä¸­</span>slave-read-only <span class="token function">yes</span><span class="token comment" spellcheck="true"># æ— ç¡¬ç›˜å¤åˆ¶åŠŸèƒ½</span>repl-diskless-sync no<span class="token comment" spellcheck="true"># ç­‰å¾…å¤šä¸ªslaveä¸€èµ·æ¥è¯·æ±‚ä¹‹é—´çš„é—´éš”æ—¶é—´</span>repl-diskless-sync-delay 5<span class="token comment" spellcheck="true"># è®¾ç½®slaveç»™masterå‘é€pingçš„æ—¶é—´é—´éš”</span><span class="token comment" spellcheck="true"># repl-ping-slave-period 10</span><span class="token comment" spellcheck="true"># è®¾ç½®æ•°æ®ä¼ è¾“I/Oï¼Œä¸»æœºæ•°æ®ã€pingå“åº”è¶…æ—¶æ—¶é—´ï¼Œé»˜è®¤60s</span><span class="token comment" spellcheck="true"># è¿™ä¸ªæ—¶é—´ä¸€å®šè¦æ¯”repl-ping-slave-periodå¤§ï¼Œå¦åˆ™ä¼šä¸æ–­æ£€æµ‹åˆ°è¶…æ—¶</span><span class="token comment" spellcheck="true"># repl-timeout 60</span><span class="token comment" spellcheck="true"># æ˜¯å¦åœ¨SYNCåslave socketä¸Šç¦ç”¨TCP_NODELAYï¼Ÿ</span><span class="token comment" spellcheck="true"># å¦‚æœä½ è®¾ç½®ä¸ºyesï¼ŒRedisä¼šä½¿ç”¨å°‘é‡TCPæŠ¥æ–‡å’Œå°‘é‡å¸¦å®½å‘é€æ•°æ®ç»™slaveã€‚</span><span class="token comment" spellcheck="true"># ä½†æ˜¯è¿™æ ·ä¼šåœ¨slaveç«¯å‡ºç°å»¶è¿Ÿã€‚å¦‚æœä½¿ç”¨Linuxå†…æ ¸çš„é»˜è®¤è®¾ç½®ï¼Œå¤§æ¦‚40æ¯«ç§’ã€‚</span><span class="token comment" spellcheck="true"># å¦‚æœä½ è®¾ç½®ä¸ºnoï¼Œé‚£ä¹ˆåœ¨slaveç«¯ç ”ç©¶å°±ä¼šå‡å°‘ä½†æ˜¯åŒæ­¥å¸¦å®½è¦å¢åŠ ã€‚</span><span class="token comment" spellcheck="true"># é»˜è®¤æˆ‘ä»¬æ˜¯ä¸ºä½å»¶è¿Ÿä¼˜åŒ–çš„ã€‚</span><span class="token comment" spellcheck="true"># ä½†æ˜¯å¦‚æœæµé‡ç‰¹åˆ«å¤§æˆ–è€…ä¸»ä»æœåŠ¡å™¨ç›¸è·æ¯”è¾ƒè¿œï¼Œè®¾ç½®ä¸ºyesæ¯”è¾ƒåˆç†ã€‚</span>repl-disable-tcp-nodelay no<span class="token comment" spellcheck="true"># è®¾ç½®å¤åˆ¶çš„åå°æ—¥å¿—å¤§å°ã€‚</span><span class="token comment" spellcheck="true"># å¤åˆ¶çš„åå°æ—¥å¿—è¶Šå¤§ï¼Œ slave æ–­å¼€è¿æ¥åŠåæ¥å¯èƒ½æ‰§è¡Œéƒ¨åˆ†å¤åˆ¶èŠ±çš„æ—¶é—´å°±è¶Šé•¿ã€‚</span><span class="token comment" spellcheck="true"># åå°æ—¥å¿—åœ¨è‡³å°‘æœ‰ä¸€ä¸ª slave è¿æ¥æ—¶ï¼Œä»…ä»…åˆ†é…ä¸€æ¬¡ã€‚</span><span class="token comment" spellcheck="true"># repl-backlog-size 1mb</span><span class="token comment" spellcheck="true"># åœ¨ master ä¸å†è¿æ¥ slave åï¼Œåå°æ—¥å¿—å°†è¢«é‡Šæ”¾ã€‚ä¸‹é¢çš„é…ç½®å®šä¹‰ä»æœ€åä¸€ä¸ª slave æ–­å¼€è¿æ¥åéœ€è¦é‡Šæ”¾çš„æ—¶é—´ï¼ˆç§’ï¼‰ã€‚</span><span class="token comment" spellcheck="true"># 0 æ„å‘³ç€ä»ä¸é‡Šæ”¾åå°æ—¥å¿—</span><span class="token comment" spellcheck="true"># repl-backlog-ttl 3600</span><span class="token comment" spellcheck="true"># è®¾ç½®slaveä¼˜å…ˆçº§ï¼Œé»˜è®¤ä¸º100</span><span class="token comment" spellcheck="true"># å½“ä¸»æœåŠ¡å™¨ä¸èƒ½æ­£ç¡®å·¥ä½œçš„æ—¶å€™ï¼Œæ•°å­—ä½çš„é¦–å…ˆè¢«æå‡ä¸ºä¸»æœåŠ¡å™¨ï¼Œä½†æ˜¯0æ˜¯ç¦ç”¨é€‰æ‹©</span>slave-priority 100<span class="token comment" spellcheck="true"># å¦‚æœå°‘äº N ä¸ª slave è¿æ¥ï¼Œä¸”å»¶è¿Ÿæ—¶é—´ &lt;=M ç§’ï¼Œåˆ™ master å¯é…ç½®åœæ­¢æ¥å—å†™æ“ä½œã€‚</span><span class="token comment" spellcheck="true"># ä¾‹å¦‚éœ€è¦è‡³å°‘ 3 ä¸ª slave è¿æ¥ï¼Œä¸”å»¶è¿Ÿ &lt;=10 ç§’çš„é…ç½®ï¼š</span><span class="token comment" spellcheck="true"># min-slaves-to-write 3</span><span class="token comment" spellcheck="true"># min-slaves-max-lag 10</span><span class="token comment" spellcheck="true"># è®¾ç½® 0 ä¸ºç¦ç”¨</span><span class="token comment" spellcheck="true"># é»˜è®¤ min-slaves-to-write ä¸º 0 ï¼ˆç¦ç”¨ï¼‰ï¼Œ min-slaves-max-lag ä¸º 10</span><span class="token comment" spellcheck="true">######################### å®‰å…¨ #########################</span><span class="token comment" spellcheck="true"># è®¾ç½®å®¢æˆ·ç«¯è¿æ¥å¯†ç ï¼Œå› ä¸ºRediså“åº”é€Ÿåº¦å¯ä»¥è¾¾åˆ°æ¯ç§’100wæ¬¡ï¼Œæ‰€ä»¥å¯†ç è¦ç‰¹åˆ«å¤æ‚</span><span class="token comment" spellcheck="true"># requirepass 1413</span><span class="token comment" spellcheck="true"># å‘½ä»¤é‡æ–°å‘½åï¼Œæˆ–è€…ç¦ç”¨ã€‚</span><span class="token comment" spellcheck="true"># é‡å‘½åå‘½ä»¤ä¸ºç©ºå­—ç¬¦ä¸²å¯ä»¥ç¦ç”¨ä¸€äº›å±é™©å‘½ä»¤æ¯”å¦‚ï¼šFLUSHALLåˆ é™¤æ‰€æœ‰æ•°æ®</span><span class="token comment" spellcheck="true"># éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå†™å…¥AOFæ–‡ä»¶æˆ–ä¼ é€ç»™slaveçš„å‘½ä»¤åˆ«åä¹Ÿè®¸ä¼šå¼•èµ·ä¸€äº›é—®é¢˜</span><span class="token comment" spellcheck="true"># rename-command CONFIG ""</span><span class="token comment" spellcheck="true"># è®¾ç½®å®¢æˆ·ç«¯è¿æ¥å¯†ç ï¼Œå› ä¸ºRediså“åº”é€Ÿåº¦å¯ä»¥è¾¾åˆ°æ¯ç§’100wæ¬¡ï¼Œæ‰€ä»¥å¯†ç è¦ç‰¹åˆ«å¤æ‚</span>requirepass 1413<span class="token comment" spellcheck="true"># å‘½ä»¤é‡æ–°å‘½åï¼Œæˆ–è€…ç¦ç”¨ã€‚</span><span class="token comment" spellcheck="true"># é‡å‘½åå‘½ä»¤ä¸ºç©ºå­—ç¬¦ä¸²å¯ä»¥ç¦ç”¨ä¸€äº›å±é™©å‘½ä»¤æ¯”å¦‚ï¼šFLUSHALLåˆ é™¤æ‰€æœ‰æ•°æ®</span><span class="token comment" spellcheck="true"># éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå†™å…¥AOFæ–‡ä»¶æˆ–ä¼ é€ç»™slaveçš„å‘½ä»¤åˆ«åä¹Ÿè®¸ä¼šå¼•èµ·ä¸€äº›é—®é¢˜</span><span class="token comment" spellcheck="true"># rename-command CONFIG ""</span><span class="token comment" spellcheck="true">######################### é™åˆ¶ #########################</span><span class="token comment" spellcheck="true"># è®¾ç½®æœ€å¤šé“¾æ¥å®¢æˆ·ç«¯æ•°é‡ï¼Œé»˜è®¤ä¸º10000ã€‚</span><span class="token comment" spellcheck="true"># å®é™…å¯ä»¥æ¥å—çš„è¯·æ±‚æ•°ç›®ä¸ºè®¾ç½®å€¼å‡å»32ï¼Œè¿™32æ˜¯Redisä¸ºå†…éƒ¨æ–‡ä»¶æè¿°ç¬¦ä¿ç•™çš„</span><span class="token comment" spellcheck="true"># maxclients 10000</span><span class="token comment" spellcheck="true"># è®¾ç½®æœ€å¤šé“¾æ¥å®¢æˆ·ç«¯æ•°é‡ï¼Œé»˜è®¤ä¸º10000ã€‚</span><span class="token comment" spellcheck="true"># å®é™…å¯ä»¥æ¥å—çš„è¯·æ±‚æ•°ç›®ä¸ºè®¾ç½®å€¼å‡å»32ï¼Œè¿™32æ˜¯Redisä¸ºå†…éƒ¨æ–‡ä»¶æè¿°ç¬¦ä¿ç•™çš„</span><span class="token comment" spellcheck="true"># maxclients 10000</span><span class="token comment" spellcheck="true"># è®¾ç½®æœ€å¤§ä½¿ç”¨å†…å­˜æ•°é‡ï¼Œåœ¨æŠŠRediså½“ä½œLRUç¼“å­˜æ—¶ç‰¹åˆ«æœ‰ç”¨ã€‚</span><span class="token comment" spellcheck="true"># è®¾ç½®çš„å€¼è¦æ¯”ç³»ç»Ÿèƒ½ä½¿ç”¨çš„å€¼è¦å°</span><span class="token comment" spellcheck="true"># å› ä¸ºå½“å¯ç”¨åˆ é™¤ç®—æ³•æ—¶ï¼Œslaveè¾“å‡ºç¼“å­˜ä¹Ÿè¦å ç”¨å†…å­˜</span><span class="token comment" spellcheck="true"># maxmemory &lt;bytes></span><span class="token comment" spellcheck="true">#è¾¾åˆ°æœ€å¤§å†…å­˜é™åˆ¶æ—¶ï¼Œä½¿ç”¨ä½•ç§åˆ é™¤ç®—æ³•</span><span class="token comment" spellcheck="true"># volatile-lru  ä½¿ç”¨LRUç®—æ³•ç§»é™¤å¸¦æœ‰è¿‡æœŸæ ‡è‡´çš„key</span><span class="token comment" spellcheck="true"># allkeys-lru -> ä½¿ç”¨LRUç®—æ³•ç§»é™¤ä»»ä½•key</span><span class="token comment" spellcheck="true"># volatile-random -> éšæœºç§»é™¤ä¸€ä¸ªå¸¦æœ‰è¿‡æœŸæ ‡è‡´çš„key</span><span class="token comment" spellcheck="true"># allkeys-random ->  éšæœºç§»é™¤ä¸€ä¸ªkey</span><span class="token comment" spellcheck="true"># volatile-ttl -> ç§»é™¤æœ€è¿‘è¦è¿‡æœŸçš„key</span><span class="token comment" spellcheck="true"># noeviction -> ä¸åˆ é™¤keyï¼Œå½“æœ‰å†™è¯·æ±‚æ—¶ï¼Œè¿”å›é”™è¯¯</span><span class="token comment" spellcheck="true">#é»˜è®¤è®¾ç½®ä¸ºvolatile-lru</span><span class="token comment" spellcheck="true"># maxmemory-policy noeviction</span><span class="token comment" spellcheck="true"># LRUå’Œæœ€å°TTLç®—æ³•æ²¡æœ‰ç²¾ç¡®çš„å®ç°</span><span class="token comment" spellcheck="true"># ä¸ºäº†èŠ‚çœå†…å­˜åªåœ¨ä¸€ä¸ªæ ·æœ¬èŒƒå›´å†…é€‰æ‹©ä¸€ä¸ªæœ€è¿‘æœ€å°‘ä½¿ç”¨çš„keyï¼Œå¯ä»¥è®¾ç½®è¿™ä¸ªæ ·æœ¬å¤§å°</span><span class="token comment" spellcheck="true"># maxmemory-samples 5</span><span class="token comment" spellcheck="true">######################### AOæ¨¡å¼ #########################</span><span class="token comment" spellcheck="true"># AOFå’ŒRDBæŒä¹…åŒ–å¯ä»¥åŒæ—¶å¯ç”¨</span><span class="token comment" spellcheck="true"># Rediså¯åŠ¨æ—¶å€™ä¼šè¯»å–AOFæ–‡ä»¶ï¼ŒAOFæ–‡ä»¶æœ‰æ›´å¥½çš„æŒä¹…åŒ–ä¿è¯</span>appendonly no<span class="token comment" spellcheck="true"># AOFçš„ä¿å­˜åç§°ï¼Œé»˜è®¤ä¸ºappendonly.aof</span>appendfilename <span class="token string">"appendonly.aof"</span><span class="token comment" spellcheck="true"># è®¾ç½®ä½•æ—¶å†™å…¥è¿½åŠ æ—¥å¿—ï¼Œåˆä¸‰ç§æ¨¡å¼</span><span class="token comment" spellcheck="true"># noï¼šè¡¨ç¤ºç”±æ“ä½œç³»ç»Ÿå†³å®šä½•æ—¶å†™å…¥ã€‚æ€§èƒ½æœ€å¥½ï¼Œä½†å¯é æ€§æœ€ä½</span><span class="token comment" spellcheck="true"># everysecï¼šè¡¨ç¤ºæ¯ç§’æ‰§è¡Œä¸€æ¬¡å†™å…¥ã€‚æŠ˜ä¸­æ–¹æ¡ˆï¼Œæ¨è</span><span class="token comment" spellcheck="true"># alwaysï¼šè¡¨ç¤ºæ¯æ¬¡éƒ½å†™å…¥ç£ç›˜ã€‚æ€§èƒ½æœ€å·®ï¼Œæ¯”ä¸Šé¢çš„å®‰å…¨ä¸€äº›</span><span class="token comment" spellcheck="true"># appendfsync always</span>appendfsync everysec<span class="token comment" spellcheck="true"># appendfsync no</span><span class="token comment" spellcheck="true"># å½“AOFåŒæ­¥ç­–ç•¥è®¾å®šä¸ºalwayæˆ–everysec</span><span class="token comment" spellcheck="true"># å½“åå°å­˜å‚¨è¿›ç¨‹ï¼ˆåå°å­˜å‚¨æˆ–è€…AOFæ—¥å¿—åå°å†™å…¥ï¼‰ä¼šäº§ç”Ÿå¾ˆå¤šç£ç›˜å¼€é”€</span><span class="token comment" spellcheck="true"># æŸäº›Linuxé…ç½®ä¼šä½¿Rediså› ä¸ºfsync()è°ƒç”¨äº§ç”Ÿé˜»å¡å¾ˆä¹…</span><span class="token comment" spellcheck="true"># ç°åœ¨è¿˜æ²¡æœ‰ä¿®å¤è¡¥ä¸ï¼Œç”šè‡³ä½¿ç”¨ä¸åŒçº¿ç¨‹è¿›è¡Œfsyncéƒ½ä¼šé˜»å¡æˆ‘ä»¬çš„åŒæ­¥write(2)è°ƒç”¨ã€‚</span><span class="token comment" spellcheck="true"># ä¸ºäº†ç¼“è§£è¿™ä¸ªé—®é¢˜ï¼Œä½¿ç”¨ä»¥ä¸‹é€‰é¡¹åœ¨ä¸€ä¸ªBGSAVEæˆ–BGREWRITEAOFè¿è¡Œçš„æ—¶å€™</span><span class="token comment" spellcheck="true"># å¯ä»¥é˜»æ­¢fsync()åœ¨ä¸»ç¨‹åºä¸­è¢«è°ƒç”¨ï¼Œ</span>no-appendfsync-on-rewrite no<span class="token comment" spellcheck="true"># AOFè‡ªåŠ¨é‡å†™ï¼ˆåˆå¹¶å‘½ä»¤ï¼Œå‡å°‘æ—¥å¿—å¤§å°ï¼‰</span><span class="token comment" spellcheck="true"># å½“AOFæ—¥å¿—å¤§å°å¢åŠ åˆ°ä¸€ä¸ªç‰¹å®šæ¯”ç‡ï¼ŒRedisè°ƒç”¨BGREWRITEAOFè‡ªåŠ¨é‡å†™æ—¥å¿—æ–‡ä»¶</span><span class="token comment" spellcheck="true"># åŸç†ï¼šRedis ä¼šè®°å½•ä¸Šæ¬¡é‡å†™åAOFæ–‡ä»¶çš„æ–‡ä»¶å¤§å°ã€‚</span><span class="token comment" spellcheck="true"># å¦‚æœåˆšå¯åŠ¨ï¼Œåˆ™è®°å½•å¯åŠ¨æ—¶AOFå¤§å°</span><span class="token comment" spellcheck="true"># è¿™ä¸ªåŸºæœ¬å¤§å°ä¼šç”¨æ¥å’Œå½“å‰å¤§å°æ¯”è¾ƒã€‚å¦‚æœå½“å‰å¤§å°æ¯”ç‰¹å®šæ¯”ç‡å¤§ï¼Œå°±ä¼šè§¦å‘é‡å†™ã€‚</span><span class="token comment" spellcheck="true"># ä½ ä¹Ÿéœ€è¦æŒ‡å®šä¸€ä¸ªAOFéœ€è¦è¢«é‡å†™çš„æœ€å°å€¼ï¼Œè¿™æ ·ä¼šé¿å…è¾¾åˆ°äº†æ¯”ç‡ã€‚</span><span class="token comment" spellcheck="true"># ä½†æ˜¯AOFæ–‡ä»¶è¿˜å¾ˆå°çš„æƒ…å†µä¸‹é‡å†™AOFæ–‡ä»¶ã€‚</span><span class="token comment" spellcheck="true"># è®¾ç½®ä¸º0ç¦ç”¨è‡ªåŠ¨é‡å†™</span>auto-aof-rewrite-percentage 100auto-aof-rewrite-min-size 64mb<span class="token comment" spellcheck="true">#redisåœ¨å¯åŠ¨æ—¶å¯ä»¥åŠ è½½è¢«æˆªæ–­çš„AOFæ–‡ä»¶ï¼Œè€Œä¸éœ€è¦å…ˆæ‰§è¡Œ redis-check-aof å·¥å…·</span>aof-load-truncated <span class="token function">yes</span><span class="token comment" spellcheck="true">######################### LUAè„šæœ¬ #########################</span><span class="token comment" spellcheck="true"># Luaè„šæœ¬çš„æœ€å¤§æ‰§è¡Œæ—¶é—´ï¼Œå•ä½æ¯«ç§’</span><span class="token comment" spellcheck="true"># è¶…æ—¶åä¼šæŠ¥é”™ï¼Œå¹¶ä¸”è®¡å…¥æ—¥å¿—</span><span class="token comment" spellcheck="true"># å½“ä¸€ä¸ªè„šæœ¬è¿è¡Œæ—¶é—´è¶…è¿‡äº†æœ€å¤§æ‰§è¡Œæ—¶é—´</span><span class="token comment" spellcheck="true"># åªæœ‰SCRIPT KILLå’Œ SHUTDOWN NOSAVEä¸¤ä¸ªå‘½ä»¤å¯ä»¥ä½¿ç”¨ã€‚</span><span class="token comment" spellcheck="true"># SCRIPT KILLç”¨äºåœæ­¢æ²¡æœ‰è°ƒç”¨å†™å‘½ä»¤çš„è„šæœ¬ã€‚</span><span class="token comment" spellcheck="true"># SHUTDOWN NOSAVEæ˜¯å”¯ä¸€çš„ä¸€ä¸ªï¼Œåœ¨è„šæœ¬çš„å†™å‘½ä»¤æ­£åœ¨æ‰§è¡Œ</span><span class="token comment" spellcheck="true"># ç”¨æˆ·åˆä¸æƒ³ç­‰å¾…è„šæœ¬çš„æ­£å¸¸ç»“æŸçš„æƒ…å†µä¸‹ï¼Œå…³é—­æœåŠ¡å™¨çš„æ–¹æ³•ã€‚</span><span class="token comment" spellcheck="true"># ä»¥ä¸‹é€‰é¡¹è®¾ç½®ä¸º0æˆ–è´Ÿæ•°å°±ä¼šå–æ¶ˆè„šæœ¬æ‰§è¡Œæ—¶é—´é™åˆ¶</span>lua-time-limit 5000<span class="token comment" spellcheck="true">####################### redisé›†ç¾¤  ########################</span><span class="token comment" spellcheck="true"># æ˜¯å¦å¯ç”¨é›†ç¾¤</span><span class="token comment" spellcheck="true"># cluster-enabled yes</span><span class="token comment" spellcheck="true"># é›†ç¾¤é…ç½®æ–‡ä»¶</span><span class="token comment" spellcheck="true"># é›†ç¾¤é…ç½®å˜æ›´åä¼šè‡ªåŠ¨å†™å…¥æ”¹æ–‡ä»¶</span><span class="token comment" spellcheck="true"># cluster-config-file nodes-6379.conf</span><span class="token comment" spellcheck="true"># èŠ‚ç‚¹äº’è¿è¶…æ—¶çš„é˜€å€¼</span><span class="token comment" spellcheck="true"># èŠ‚ç‚¹è¶…æ—¶æ—¶é—´ï¼Œè¶…è¿‡è¯¥æ—¶é—´æ— æ³•è¿æ¥ä¸»è¦MasterèŠ‚ç‚¹åï¼Œä¼šåœæ­¢æ¥å—æŸ¥è¯¢æœåŠ¡</span><span class="token comment" spellcheck="true"># cluster-node-timeout 15000</span><span class="token comment" spellcheck="true"># æ§åˆ¶ä»èŠ‚ç‚¹FailOverç›¸å…³çš„è®¾ç½®,è®¾ä¸º0ï¼Œä»èŠ‚ç‚¹ä¼šä¸€ç›´å°è¯•å¯åŠ¨FailOver.</span><span class="token comment" spellcheck="true"># è®¾ä¸ºæ­£æ•°ï¼Œå¤±è”å¤§äºä¸€å®šæ—¶é—´ï¼ˆfactor*èŠ‚ç‚¹TimeOutï¼‰ï¼Œä¸å†è¿›è¡ŒFailOver</span><span class="token comment" spellcheck="true"># cluster-slave-validity-factor 10</span><span class="token comment" spellcheck="true"># æœ€å°ä»èŠ‚ç‚¹è¿æ¥æ•°</span><span class="token comment" spellcheck="true"># cluster-migration-barrier 1</span><span class="token comment" spellcheck="true"># é»˜è®¤ä¸ºYes,ä¸¢å¤±ä¸€å®šæ¯”ä¾‹Keyåï¼ˆå¯èƒ½Nodeæ— æ³•è¿æ¥æˆ–è€…æŒ‚æ‰ï¼‰ï¼Œé›†ç¾¤åœæ­¢æ¥å—å†™æ“ä½œ</span><span class="token comment" spellcheck="true"># è®¾ç½®ä¸ºNoï¼Œé›†ç¾¤ä¸¢å¤±Keyçš„æƒ…å†µä¸‹ä»æä¾›æŸ¥è¯¢æœåŠ¡</span><span class="token comment" spellcheck="true"># cluster-require-full-coverage yes</span><span class="token comment" spellcheck="true">######################### æ…¢æŸ¥è¯¢ #########################</span><span class="token comment" spellcheck="true"># Redisæ…¢æŸ¥è¯¢æ—¥å¿—è®°å½•è¶…è¿‡è®¾å®šæ—¶é—´çš„æŸ¥è¯¢ï¼Œä¸”åªè®°å½•æ‰§è¡Œå‘½ä»¤çš„æ—¶é—´</span><span class="token comment" spellcheck="true"># ä¸è®°å½•I/Oæ“ä½œï¼Œæ¯”å¦‚ï¼šå’Œå®¢æˆ·ç«¯äº¤äº’ï¼Œå‘é€å›å¤ç­‰ã€‚</span><span class="token comment" spellcheck="true"># æ—¶é—´å•ä½ä¸ºå¾®å¦™ï¼Œ1000000å¾®å¦™ = 1 ç§’</span><span class="token comment" spellcheck="true"># è®¾ç½®ä¸ºè´Ÿæ•°ä¼šç¦ç”¨æ…¢æŸ¥è¯¢æ—¥å¿—ï¼Œè®¾ç½®ä¸º0ä¼šè®°å½•æ‰€æœ‰æŸ¥è¯¢å‘½ä»¤</span>slowlog-log-slower-than 10000<span class="token comment" spellcheck="true"># æ—¥å¿—é•¿åº¦æ²¡æœ‰é™åˆ¶ï¼Œä½†æ˜¯ä¼šæ¶ˆè€—å†…å­˜ã€‚è¶…è¿‡æ—¥å¿—é•¿åº¦åï¼Œæœ€æ—§çš„è®°å½•ä¼šè¢«ç§»é™¤</span><span class="token comment" spellcheck="true"># ä½¿ç”¨SLOWLOG RESETå‘½ä»¤å¯ä»¥å›æ”¶å†…å­˜</span>slowlog-max-len 128<span class="token comment" spellcheck="true">######################### å»¶è¿Ÿç›‘æµ‹ #########################</span><span class="token comment" spellcheck="true"># ç³»ç»Ÿåªè®°å½•è¶…è¿‡è®¾å®šå€¼çš„æ“ä½œï¼Œå•ä½æ˜¯æ¯«ç§’ï¼Œ0è¡¨ç¤ºç¦ç”¨è¯¥åŠŸèƒ½  </span><span class="token comment" spellcheck="true"># å¯ä»¥é€šè¿‡å‘½ä»¤â€œCONFIG SET latency-monitor-threshold &lt;milliseconds>â€ ç›´æ¥è®¾ç½®è€Œä¸éœ€è¦é‡å¯redis  </span>latency-monitor-threshold 0<span class="token comment" spellcheck="true">######################### äº‹ä»¶é€šçŸ¥ #########################</span><span class="token comment" spellcheck="true">#  å½“äº‹ä»¶å‘ç”Ÿæ—¶ï¼Œ Redis å¯ä»¥é€šçŸ¥ Pub/Sub å®¢æˆ·ç«¯ã€‚</span><span class="token comment" spellcheck="true">#  å¯ä»¥åœ¨ä¸‹è¡¨ä¸­é€‰æ‹© Redis è¦é€šçŸ¥çš„äº‹ä»¶ç±»å‹ã€‚äº‹ä»¶ç±»å‹ç”±å•ä¸ªå­—ç¬¦æ¥æ ‡è¯†ï¼š</span><span class="token comment" spellcheck="true"># K     Keyspace äº‹ä»¶ï¼Œä»¥ _keyspace@&lt;db>_ çš„å‰ç¼€æ–¹å¼å‘å¸ƒ</span><span class="token comment" spellcheck="true"># E     Keyevent äº‹ä»¶ï¼Œä»¥ _keysevent@&lt;db>_ çš„å‰ç¼€æ–¹å¼å‘å¸ƒ</span><span class="token comment" spellcheck="true"># g     é€šç”¨äº‹ä»¶ï¼ˆä¸æŒ‡å®šç±»å‹ï¼‰ï¼Œåƒ DEL, EXPIRE, RENAME, â€¦</span><span class="token comment" spellcheck="true"># $     String å‘½ä»¤</span><span class="token comment" spellcheck="true"># s     Set å‘½ä»¤</span><span class="token comment" spellcheck="true"># h     Hash å‘½ä»¤</span><span class="token comment" spellcheck="true"># z     æœ‰åºé›†åˆå‘½ä»¤</span><span class="token comment" spellcheck="true"># x     è¿‡æœŸäº‹ä»¶ï¼ˆæ¯æ¬¡ key è¿‡æœŸæ—¶ç”Ÿæˆï¼‰</span><span class="token comment" spellcheck="true"># e     æ¸…é™¤äº‹ä»¶ï¼ˆå½“ key åœ¨å†…å­˜è¢«æ¸…é™¤æ—¶ç”Ÿæˆï¼‰</span><span class="token comment" spellcheck="true"># A     g$lshzxe çš„åˆ«ç§°ï¼Œå› æ­¤ â€AKEâ€ æ„å‘³ç€æ‰€æœ‰çš„äº‹ä»¶</span><span class="token comment" spellcheck="true"># notify-keyspace-events å¸¦ä¸€ä¸ªç”± 0 åˆ°å¤šä¸ªå­—ç¬¦ç»„æˆçš„å­—ç¬¦ä¸²å‚æ•°ã€‚ç©ºå­—ç¬¦ä¸²æ„æ€æ˜¯é€šçŸ¥è¢«ç¦ç”¨ã€‚</span><span class="token comment" spellcheck="true">#  ä¾‹å­ï¼šå¯ç”¨ list å’Œé€šç”¨äº‹ä»¶ï¼š</span><span class="token comment" spellcheck="true"># notify-keyspace-events Elg</span><span class="token comment" spellcheck="true">#  é»˜è®¤æ‰€ç”¨çš„é€šçŸ¥è¢«ç¦ç”¨ï¼Œå› ä¸ºç”¨æˆ·é€šå¸¸ä¸éœ€è¦æ”¹ç‰¹æ€§ï¼Œå¹¶ä¸”è¯¥ç‰¹æ€§ä¼šæœ‰æ€§èƒ½æŸè€—ã€‚</span><span class="token comment" spellcheck="true">#  æ³¨æ„å¦‚æœä½ ä¸æŒ‡å®šè‡³å°‘ K æˆ– E ä¹‹ä¸€ï¼Œä¸ä¼šå‘é€ä»»ä½•äº‹ä»¶ã€‚</span>notify-keyspace-events <span class="token string">""</span><span class="token comment" spellcheck="true">#notify-keyspace-events AKE</span><span class="token comment" spellcheck="true">######################### é«˜çº§è®¾ç½® #########################</span><span class="token comment" spellcheck="true"># å½“æœ‰å°‘é‡æ¡ç›®çš„æ—¶å€™ï¼Œå“ˆå¸Œä½¿ç”¨é«˜æ•ˆå†…å­˜æ•°æ®ç»“æ„ã€‚æœ€å¤§çš„æ¡ç›®ä¹Ÿä¸èƒ½è¶…è¿‡è®¾å®šçš„é˜ˆå€¼ã€‚# â€œå°‘é‡â€å®šä¹‰å¦‚ä¸‹ï¼š</span>hash-max-ziplist-entries 512hash-max-ziplist-value 64<span class="token comment" spellcheck="true"># å’Œå“ˆå¸Œç¼–ç ä¸€æ ·ï¼Œå°‘é‡åˆ—è¡¨ä¹Ÿä»¥ç‰¹æ®Šæ–¹å¼ç¼–ç èŠ‚çœå†…å­˜ã€‚â€œå°‘é‡â€è®¾å®šå¦‚ä¸‹ï¼š</span>list-max-ziplist-entries 512list-max-ziplist-value 64<span class="token comment" spellcheck="true"># é›†åˆåªåœ¨ä»¥ä¸‹æƒ…å†µä¸‹ä½¿ç”¨ç‰¹æ®Šç¼–ç æ¥èŠ‚çœå†…å­˜</span><span class="token comment" spellcheck="true"># -->é›†åˆå…¨éƒ¨ç”±64ä½å¸¦ç¬¦å·10è¿›åˆ¶æ•´æ•°æ„æˆçš„å­—ç¬¦ä¸²ç»„æˆ</span><span class="token comment" spellcheck="true"># ä¸‹é¢çš„é€‰é¡¹è®¾ç½®è¿™ä¸ªç‰¹æ®Šé›†åˆçš„å¤§å°ã€‚</span>set-max-intset-entries 512<span class="token comment" spellcheck="true"># å½“æœ‰åºé›†åˆçš„é•¿åº¦å’Œå…ƒç´ è®¾å®šä¸ºä»¥ä¸‹æ•°å­—æ—¶ï¼Œåˆç‰¹æ®Šç¼–ç èŠ‚çœå†…å­˜</span>zset-max-ziplist-entries 128zset-max-ziplist-value 64<span class="token comment" spellcheck="true"># HyperLogLog ç¨€ç–è¡¨ç¤ºå­—èŠ‚é™åˆ¶</span><span class="token comment" spellcheck="true"># è¿™ä¸ªé™åˆ¶åŒ…å«äº†16ä¸ªå­—èŠ‚çš„å¤´éƒ¨ï¼Œå½“ä¸€ä¸ªHyperLogLogä½¿ç”¨sparse representation</span><span class="token comment" spellcheck="true"># è¶…è¿‡äº†è¿™ä¸ªæ˜¾ç¤ºï¼Œå®ƒå°±ä¼šè½¬æ¢åˆ°dense representationä¸Š</span>hll-sparse-max-bytes 3000<span class="token comment" spellcheck="true"># å“ˆå¸Œåˆ·æ–°ä½¿ç”¨æ¯100ä¸ªCPUæ¯«ç§’ä¸­çš„1æ¯«ç§’æ¥å¸®åŠ©åˆ·æ–°ä¸»å“ˆå¸Œè¡¨ï¼ˆé¡¶çº§é”®å€¼æ˜ å°„è¡¨ï¼‰ã€‚</span><span class="token comment" spellcheck="true">#  Rediså“ˆå¸Œè¡¨ä½¿ç”¨å»¶è¿Ÿåˆ·æ–°æœºåˆ¶ï¼Œè¶Šå¤šæ“ä½œï¼Œè¶Šå¤šåˆ·æ–°ã€‚</span><span class="token comment" spellcheck="true"># å¦‚æœæœåŠ¡å™¨ç©ºé—²ï¼Œåˆ·æ–°æ“ä½œå°±ä¸ä¼šè¿›è¡Œï¼Œæ›´å¤šå†…å­˜ä¼šè¢«å“ˆå¸Œè¡¨å ç”¨</span><span class="token comment" spellcheck="true"># é»˜è®¤æ¯ç§’è¿›è¡Œ10æ¬¡ä¸»å­—å…¸åˆ·æ–°ï¼Œé‡Šæ”¾å†…å­˜ã€‚</span><span class="token comment" spellcheck="true"># å¦‚æœä½ æœ‰ç¡¬æ€§å»¶è¿Ÿéœ€æ±‚ï¼Œå¶å°”2æ¯«ç§’çš„å»¶è¿Ÿæ— æ³•å¿å—çš„è¯ã€‚è®¾ç½®ä¸ºno</span><span class="token comment" spellcheck="true"># å¦åˆ™è®¾ç½®ä¸ºyes</span>activerehashing <span class="token function">yes</span><span class="token comment" spellcheck="true"># å®¢æˆ·ç«¯è¾“å‡ºç¼“å­˜é™åˆ¶å¼ºè¿«æ–­å¼€è¯»å–é€Ÿåº¦æ¯”è¾ƒæ…¢çš„å®¢æˆ·ç«¯</span><span class="token comment" spellcheck="true"># æœ‰ä¸‰ç§ç±»å‹çš„é™åˆ¶</span><span class="token comment" spellcheck="true"># normal -> æ­£å¸¸</span><span class="token comment" spellcheck="true"># slave  -> slaveå’Œ MONITOR</span><span class="token comment" spellcheck="true"># pubsub -> å®¢æˆ·ç«¯è‡³å°‘è®¢é˜…äº†ä¸€ä¸ªé¢‘é“æˆ–è€…æ¨¡å¼</span><span class="token comment" spellcheck="true"># å®¢æˆ·ç«¯è¾“å‡ºç¼“å­˜é™åˆ¶è¯­æ³•å¦‚ä¸‹ï¼ˆæ—¶é—´å•ä½ï¼šç§’ï¼‰</span><span class="token comment" spellcheck="true"># client-output-buffer-limit &lt;ç±»åˆ«> &lt;å¼ºåˆ¶é™åˆ¶> &lt;è½¯æ€§é™åˆ¶> &lt;è½¯æ€§æ—¶é—´></span><span class="token comment" spellcheck="true"># è¾¾åˆ°å¼ºåˆ¶é™åˆ¶ç¼“å­˜å¤§å°ï¼Œç«‹åˆ»æ–­å¼€é“¾æ¥ã€‚</span><span class="token comment" spellcheck="true"># è¾¾åˆ°è½¯æ€§é™åˆ¶ï¼Œä»ç„¶ä¼šæœ‰è½¯æ€§æ—¶é—´å¤§å°çš„é“¾æ¥æ—¶é—´</span><span class="token comment" spellcheck="true"># é»˜è®¤æ­£å¸¸å®¢æˆ·ç«¯æ— é™åˆ¶ï¼Œåªæœ‰è¯·æ±‚åï¼Œå¼‚æ­¥å®¢æˆ·ç«¯æ•°æ®è¯·æ±‚é€Ÿåº¦å¿«äºå®ƒèƒ½è¯»å–æ•°æ®çš„é€Ÿåº¦</span><span class="token comment" spellcheck="true"># è®¢é˜…æ¨¡å¼å’Œä¸»ä»å®¢æˆ·ç«¯åˆé»˜è®¤é™åˆ¶ï¼Œå› ä¸ºå®ƒä»¬éƒ½æ¥å—æ¨é€ã€‚</span><span class="token comment" spellcheck="true"># å¼ºåˆ¶é™åˆ¶å’Œè½¯æ€§é™åˆ¶éƒ½å¯ä»¥è®¾ç½®ä¸º0æ¥ç¦ç”¨è¿™ä¸ªç‰¹æ€§</span>client-output-buffer-limit normal 0 0 0client-output-buffer-limit slave 256mb 64mb 60client-output-buffer-limit pubsub 32mb 8mb 60<span class="token comment" spellcheck="true"># è®¾ç½®Redisåå°ä»»åŠ¡æ‰§è¡Œé¢‘ç‡ï¼Œæ¯”å¦‚æ¸…é™¤è¿‡æœŸé”®ä»»åŠ¡ã€‚</span><span class="token comment" spellcheck="true"># è®¾ç½®èŒƒå›´ä¸º1åˆ°500ï¼Œé»˜è®¤ä¸º10.è¶Šå¤§CPUæ¶ˆè€—è¶Šå¤§ï¼Œå»¶è¿Ÿè¶Šå°ã€‚</span><span class="token comment" spellcheck="true"># å»ºè®®ä¸è¦è¶…è¿‡100</span>hz 10<span class="token comment" spellcheck="true"># å½“å­è¿›ç¨‹é‡å†™AOFæ–‡ä»¶ï¼Œä»¥ä¸‹é€‰é¡¹å¼€å¯æ—¶ï¼ŒAOFæ–‡ä»¶ä¼šæ¯äº§ç”Ÿ32Mæ•°æ®åŒæ­¥ä¸€æ¬¡ã€‚</span><span class="token comment" spellcheck="true"># è¿™æœ‰åŠ©äºæ›´å¿«å†™å…¥æ–‡ä»¶åˆ°ç£ç›˜é¿å…å»¶è¿Ÿ</span>aof-rewrite-incremental-fsync <span class="token function">yes</span></code></pre><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> Nosql </category>
          
      </categories>
      
      
        <tags>
            
            <tag> redis </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Redisçš„ä¸‰ç§æ¨¡å¼</title>
      <link href="/2019/11/14/mianshi/"/>
      <url>/2019/11/14/mianshi/</url>
      
        <content type="html"><![CDATA[<h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><p>Redisæ˜¯ä¸€ä¸ªå¼€æºçš„ä½¿ç”¨ANSI Cè¯­è¨€ç¼–å†™ã€æ”¯æŒç½‘ç»œã€å¯åŸºäºå†…å­˜äº¦å¯æŒä¹…åŒ–çš„æ—¥å¿—å‹ã€Key-Valueæ•°æ®åº“ï¼Œå¹¶æä¾›å¤šç§è¯­è¨€çš„APIã€‚æ™®éç”¨äºç›®å‰ä¸»æµçš„åˆ†å¸ƒå¼æ¶æ„ç³»ç»Ÿä¸­ï¼Œå…³äºredisçš„è¯¦ç»†ä»‹ç»ï¼Œè§å¦ä¸€ç¯‡æ–‡ç« ï¼š<a href="https://www.faber.cc/2019/11/15/redis1/">redisçš„å®‰è£…ä¸ä»‹ç»</a></p><p>redisçš„å¤šæœºæ•°æ®åº“å®ç°ï¼Œä¸»è¦åˆ†ä¸ºä»¥ä¸‹ä¸‰ç§ï¼š</p><ol><li><a href="https://www.faber.cc/2019/11/15/redis3/">Rediså“¨å…µï¼ˆSentinelï¼‰</a></li><li><a href="https://www.faber.cc/2019/11/15/redis2/">Rediså¤åˆ¶ï¼ˆä¸»ä»ï¼‰</a></li><li><a href="https://www.faber.cc/2019/11/15/redis4/">Redisé›†ç¾¤</a><blockquote><ul><li>æ¸©é¦¨æç¤ºï¼šç‚¹å‡»æŸ¥çœ‹è¯¦ç»†éƒ¨ç½²é…ç½®</li></ul></blockquote></li></ol><h3 id="ä¸€ã€Redisçš„ä¸»ä»å¤åˆ¶"><a href="#ä¸€ã€Redisçš„ä¸»ä»å¤åˆ¶" class="headerlink" title="ä¸€ã€Redisçš„ä¸»ä»å¤åˆ¶"></a>ä¸€ã€Redisçš„ä¸»ä»å¤åˆ¶</h3><p>é€šè¿‡æ‰§è¡Œslaveofå‘½ä»¤æˆ–è®¾ç½®slaveofé€‰é¡¹ï¼Œè®©ä¸€ä¸ªæœåŠ¡å™¨å»å¤åˆ¶å¦ä¸€ä¸ªæœåŠ¡å™¨çš„æ•°æ®ã€‚è¢«å¤åˆ¶çš„æœåŠ¡å™¨ç§°ä¸ºï¼š<code>Master</code>ä¸»æœåŠ¡ï¼›å¯¹ä¸»æœåŠ¡å™¨è¿›è¡Œå¤åˆ¶çš„æœåŠ¡å™¨ç§°ä¸ºï¼š<code>Slave</code>ä»æœåŠ¡å™¨ã€‚ä¸»æ•°æ®åº“å¯ä»¥è¿›è¡Œè¯»å†™æ“ä½œï¼Œå½“å†™æ“ä½œå¯¼è‡´æ•°æ®å˜åŒ–æ—¶ä¼šè‡ªåŠ¨å°†æ•°æ®åŒæ­¥ç»™ä»æ•°æ®åº“ã€‚è€Œä»æ•°æ®åº“ä¸€èˆ¬æ˜¯åªè¯»çš„ï¼Œå¹¶æ¥å—ä¸»æ•°æ®åº“åŒæ­¥è¿‡æ¥çš„æ•°æ®ã€‚ä¸€ä¸ªä¸»æ•°æ®åº“å¯ä»¥æ‹¥æœ‰å¤šä¸ªä»æ•°æ®åº“ï¼Œè€Œä¸€ä¸ªä»æ•°æ®åº“åªèƒ½æ‹¥æœ‰ä¸€ä¸ªä¸»æ•°æ®åº“ã€‚<br><br>ä¸»ä»å¤åˆ¶é—®é¢˜ï¼šå½“<code>master</code>downï¼Œéœ€è¦æ‰‹åŠ¨å°†ä¸€å°<code>slave</code>ä½¿ç”¨<code>slaveof no one</code>æå‡ä¸º<code>master</code>è¦å®ç°è‡ªåŠ¨ï¼Œå°±éœ€è¦rediså“¨å…µã€‚<br><br><strong>å®ç°åŸç†æ­¥éª¤ï¼š</strong></p><ul><li>ä»æœåŠ¡å™¨è¿æ¥ä¸»æœåŠ¡å™¨ï¼Œå‘é€SYNCå‘½ä»¤ï¼› </li><li>ä¸»æœåŠ¡å™¨æ¥æ”¶åˆ°SYNCå‘½ååï¼Œå¼€å§‹æ‰§è¡ŒBGSAVEå‘½ä»¤ç”ŸæˆRDBæ–‡ä»¶å¹¶ä½¿ç”¨ç¼“å†²åŒºè®°å½•æ­¤åæ‰§è¡Œçš„æ‰€æœ‰å†™å‘½ä»¤ï¼› </li><li>ä¸»æœåŠ¡å™¨BGSAVEæ‰§è¡Œå®Œåï¼Œå‘æ‰€æœ‰ä»æœåŠ¡å™¨å‘é€å¿«ç…§æ–‡ä»¶ï¼Œå¹¶åœ¨å‘é€æœŸé—´ç»§ç»­è®°å½•è¢«æ‰§è¡Œçš„å†™å‘½ä»¤ï¼› </li><li>ä»æœåŠ¡å™¨æ”¶åˆ°å¿«ç…§æ–‡ä»¶åä¸¢å¼ƒæ‰€æœ‰æ—§æ•°æ®ï¼Œè½½å…¥æ”¶åˆ°çš„å¿«ç…§ï¼› </li><li>ä¸»æœåŠ¡å™¨å¿«ç…§å‘é€å®Œæ¯•åå¼€å§‹å‘ä»æœåŠ¡å™¨å‘é€ç¼“å†²åŒºä¸­çš„å†™å‘½ä»¤ï¼› </li><li>ä»æœåŠ¡å™¨å®Œæˆå¯¹å¿«ç…§çš„è½½å…¥ï¼Œå¼€å§‹æ¥æ”¶å‘½ä»¤è¯·æ±‚ï¼Œå¹¶æ‰§è¡Œæ¥è‡ªä¸»æœåŠ¡å™¨ç¼“å†²åŒºçš„å†™å‘½ä»¤ï¼›ï¼ˆä»æœåŠ¡å™¨åˆå§‹åŒ–å®Œæˆï¼‰</li><li>ä¸»æœåŠ¡å™¨æ¯æ‰§è¡Œä¸€ä¸ªå†™å‘½ä»¤å°±ä¼šå‘ä»æœåŠ¡å™¨å‘é€ç›¸åŒçš„å†™å‘½ä»¤ï¼Œä»æœåŠ¡å™¨æ¥æ”¶å¹¶æ‰§è¡Œæ”¶åˆ°çš„å†™å‘½ä»¤ï¼ˆä»æœåŠ¡å™¨åˆå§‹åŒ–å®Œæˆåçš„æ“ä½œ</li></ul><p><strong>ä¸»ä»å¤åˆ¶ä¼˜ç¼ºç‚¹ï¼š</strong></p><p><strong>ä¼˜ç‚¹ï¼š</strong></p><ul><li>æ”¯æŒä¸»ä»å¤åˆ¶ï¼Œä¸»æœºä¼šè‡ªåŠ¨å°†æ•°æ®åŒæ­¥åˆ°ä»æœºï¼Œå¯ä»¥è¿›è¡Œè¯»å†™åˆ†ç¦»</li><li>ä¸ºäº†åˆ†è½½Masterçš„è¯»æ“ä½œå‹åŠ›ï¼ŒSlaveæœåŠ¡å™¨å¯ä»¥ä¸ºå®¢æˆ·ç«¯æä¾›åªè¯»æ“ä½œçš„æœåŠ¡ï¼Œå†™æœåŠ¡ä»ç„¶å¿…é¡»ç”±Masteræ¥å®Œæˆ</li><li>SlaveåŒæ ·å¯ä»¥æ¥å—å…¶å®ƒSlavesçš„è¿æ¥å’ŒåŒæ­¥è¯·æ±‚ï¼Œè¿™æ ·å¯ä»¥æœ‰æ•ˆçš„åˆ†è½½Masterçš„åŒæ­¥å‹åŠ›ã€‚</li><li>Master Serveræ˜¯ä»¥éé˜»å¡çš„æ–¹å¼ä¸ºSlavesæä¾›æœåŠ¡ã€‚æ‰€ä»¥åœ¨Master-SlaveåŒæ­¥æœŸé—´ï¼Œå®¢æˆ·ç«¯ä»ç„¶å¯ä»¥æäº¤æŸ¥è¯¢æˆ–ä¿®æ”¹è¯·æ±‚ã€‚</li><li>Slave ServeråŒæ ·æ˜¯ä»¥éé˜»å¡çš„æ–¹å¼å®Œæˆæ•°æ®åŒæ­¥ã€‚åœ¨åŒæ­¥æœŸé—´ï¼Œå¦‚æœæœ‰å®¢æˆ·ç«¯æäº¤æŸ¥è¯¢è¯·æ±‚ï¼ŒRedisåˆ™è¿”å›åŒæ­¥ä¹‹å‰çš„æ•°æ®</li></ul><p><strong>ç¼ºç‚¹ï¼š</strong></p><ul><li>Redisä¸å…·å¤‡è‡ªåŠ¨å®¹é”™å’Œæ¢å¤åŠŸèƒ½ï¼Œä¸»æœºä»æœºçš„å®•æœºéƒ½ä¼šå¯¼è‡´å‰ç«¯éƒ¨åˆ†è¯»å†™è¯·æ±‚å¤±è´¥ï¼Œéœ€è¦ç­‰å¾…æœºå™¨é‡å¯æˆ–è€…æ‰‹åŠ¨åˆ‡æ¢å‰ç«¯çš„IPæ‰èƒ½æ¢å¤ã€‚</li><li>ä¸»æœºå®•æœºï¼Œå®•æœºå‰æœ‰éƒ¨åˆ†æ•°æ®æœªèƒ½åŠæ—¶åŒæ­¥åˆ°ä»æœºï¼Œåˆ‡æ¢IPåè¿˜ä¼šå¼•å…¥æ•°æ®ä¸ä¸€è‡´çš„é—®é¢˜ï¼Œé™ä½äº†ç³»ç»Ÿçš„å¯ç”¨æ€§ã€‚</li><li>Redisè¾ƒéš¾æ”¯æŒåœ¨çº¿æ‰©å®¹ï¼Œåœ¨é›†ç¾¤å®¹é‡è¾¾åˆ°ä¸Šé™æ—¶åœ¨çº¿æ‰©å®¹ä¼šå˜å¾—å¾ˆå¤æ‚ã€‚</li></ul><h3 id="äºŒã€Redisçš„å“¨å…µï¼ˆSentinelï¼‰"><a href="#äºŒã€Redisçš„å“¨å…µï¼ˆSentinelï¼‰" class="headerlink" title="äºŒã€Redisçš„å“¨å…µï¼ˆSentinelï¼‰"></a>äºŒã€Redisçš„å“¨å…µï¼ˆSentinelï¼‰</h3><p>å½“ä¸»æœåŠ¡å™¨ä¸­æ–­æœåŠ¡åï¼Œå¯ä»¥å°†ä¸€ä¸ªä»æœåŠ¡å™¨å‡çº§ä¸ºä¸»æœåŠ¡å™¨ï¼Œä»¥ä¾¿ç»§ç»­æä¾›æœåŠ¡ï¼Œä½†æ˜¯è¿™ä¸ªè¿‡ç¨‹éœ€è¦äººå·¥æ‰‹åŠ¨æ¥æ“ä½œã€‚ ä¸ºæ­¤ï¼ŒRedis 2.8ä¸­æä¾›äº†å“¨å…µå·¥å…·æ¥å®ç°è‡ªåŠ¨åŒ–çš„ç³»ç»Ÿç›‘æ§å’Œæ•…éšœæ¢å¤åŠŸèƒ½ã€‚<br><br>å“¨å…µçš„ä½œç”¨å°±æ˜¯ç›‘æ§Redisç³»ç»Ÿçš„è¿è¡ŒçŠ¶å†µã€‚å®ƒçš„åŠŸèƒ½åŒ…æ‹¬ä»¥ä¸‹ä¸¤ä¸ªã€‚<br>    ï¼ˆ1ï¼‰ç›‘æ§ä¸»æœåŠ¡å™¨å’Œä»æœåŠ¡å™¨æ˜¯å¦æ­£å¸¸è¿è¡Œã€‚<br>    ï¼ˆ2ï¼‰ä¸»æœåŠ¡å™¨å‡ºç°æ•…éšœæ—¶è‡ªåŠ¨å°†ä»æœåŠ¡å™¨è½¬æ¢ä¸ºä¸»æœåŠ¡å™¨ã€‚</p><p><strong>å“¨å…µçš„å·¥ä½œæ–¹å¼ï¼š</strong></p><ul><li>æ¯ä¸ªSentinelï¼ˆå“¨å…µï¼‰è¿›ç¨‹ä»¥æ¯ç§’é’Ÿä¸€æ¬¡çš„é¢‘ç‡å‘æ•´ä¸ªé›†ç¾¤ä¸­çš„<code>Master</code>ä¸»æœåŠ¡å™¨ï¼Œ<code>Slave</code>ä»æœåŠ¡å™¨ä»¥åŠå…¶ä»–Sentinelï¼ˆå“¨å…µï¼‰è¿›ç¨‹å‘é€ä¸€ä¸ª PING å‘½ä»¤ã€‚</li><li>å¦‚æœä¸€ä¸ªå®ä¾‹ï¼ˆinstanceï¼‰è·ç¦»æœ€åä¸€æ¬¡æœ‰æ•ˆå›å¤<code>PING</code>å‘½ä»¤çš„æ—¶é—´è¶…è¿‡<code>down-after-milliseconds</code>é€‰é¡¹æ‰€æŒ‡å®šçš„å€¼ï¼Œ åˆ™è¿™ä¸ªå®ä¾‹ä¼šè¢«<code>Sentinelï¼ˆå“¨å…µ</code>è¿›ç¨‹æ ‡è®°ä¸ºä¸»è§‚ä¸‹çº¿ï¼ˆSDOWNï¼‰</li><li>å¦‚æœä¸€ä¸ª<code>Master</code>ä¸»æœåŠ¡å™¨è¢«æ ‡è®°ä¸ºä¸»è§‚ä¸‹çº¿ï¼ˆSDOWNï¼‰ï¼Œåˆ™æ­£åœ¨ç›‘è§†è¿™ä¸ª<code>Master</code>ä¸»æœåŠ¡å™¨çš„æ‰€æœ‰<code>Sentinelï¼ˆå“¨å…µï¼‰</code>è¿›ç¨‹è¦ä»¥æ¯ç§’ä¸€æ¬¡çš„é¢‘ç‡ç¡®è®¤Masterä¸»æœåŠ¡å™¨çš„ç¡®è¿›å…¥äº†ä¸»è§‚ä¸‹çº¿çŠ¶æ€</li><li>å½“æœ‰è¶³å¤Ÿæ•°é‡çš„ Sentinelï¼ˆå“¨å…µï¼‰è¿›ç¨‹ï¼ˆå¤§äºç­‰äºé…ç½®æ–‡ä»¶æŒ‡å®šçš„å€¼ï¼‰åœ¨æŒ‡å®šçš„æ—¶é—´èŒƒå›´å†…ç¡®è®¤Masterä¸»æœåŠ¡å™¨è¿›å…¥äº†ä¸»è§‚ä¸‹çº¿çŠ¶æ€ï¼ˆSDOWNï¼‰ï¼Œ åˆ™Masterä¸»æœåŠ¡å™¨ä¼šè¢«æ ‡è®°ä¸ºå®¢è§‚ä¸‹çº¿ï¼ˆODOWNï¼‰</li><li>åœ¨ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œ æ¯ä¸ª<code>Sentinelï¼ˆå“¨å…µï¼‰</code>è¿›ç¨‹ä¼šä»¥æ¯ 10 ç§’ä¸€æ¬¡çš„é¢‘ç‡å‘é›†ç¾¤ä¸­çš„æ‰€æœ‰Masterä¸»æœåŠ¡å™¨ã€Slaveä»æœåŠ¡å™¨å‘é€ INFO å‘½ä»¤ã€‚</li><li>å½“Masterä¸»æœåŠ¡å™¨è¢«<code>Sentinelï¼ˆå“¨å…µï¼‰</code>è¿›ç¨‹æ ‡è®°ä¸ºå®¢è§‚ä¸‹çº¿ï¼ˆODOWNï¼‰æ—¶ï¼ŒSentinelï¼ˆå“¨å…µï¼‰è¿›ç¨‹å‘ä¸‹çº¿çš„<code>Master</code>ä¸»æœåŠ¡å™¨çš„æ‰€æœ‰<code>Slave</code>ä»æœåŠ¡å™¨å‘é€<code>INFO</code>å‘½ä»¤çš„é¢‘ç‡ä¼šä» <code>10</code>ç§’ä¸€æ¬¡æ”¹ä¸ºæ¯ç§’ä¸€æ¬¡ã€‚</li><li>è‹¥æ²¡æœ‰è¶³å¤Ÿæ•°é‡çš„ <code>Sentinelï¼ˆå“¨å…µï¼‰</code>è¿›ç¨‹åŒæ„<code>Master</code>ä¸»æœåŠ¡å™¨ä¸‹çº¿ï¼Œ<code>Master</code>ä¸»æœåŠ¡å™¨çš„å®¢è§‚ä¸‹çº¿çŠ¶æ€å°±ä¼šè¢«ç§»é™¤ã€‚è‹¥<code>Master</code>ä¸»æœåŠ¡å™¨é‡æ–°å‘<code>Sentinelï¼ˆå“¨å…µï¼‰</code>è¿›ç¨‹å‘é€ <code>PING</code> å‘½ä»¤è¿”å›æœ‰æ•ˆå›å¤ï¼ŒMasterä¸»æœåŠ¡å™¨çš„ä¸»è§‚ä¸‹çº¿çŠ¶æ€å°±ä¼šè¢«ç§»é™¤ã€‚</li></ul><p><strong>å“¨å…µæ¨¡å¼çš„ä¼˜ç¼ºç‚¹</strong></p><p><strong>ä¼˜ç‚¹ï¼š</strong></p><ul><li>å“¨å…µæ¨¡å¼æ˜¯åŸºäºä¸»ä»æ¨¡å¼çš„ï¼Œæ‰€æœ‰ä¸»ä»çš„ä¼˜ç‚¹ï¼Œå“¨å…µæ¨¡å¼éƒ½å…·æœ‰ã€‚</li><li>ä¸»ä»å¯ä»¥è‡ªåŠ¨åˆ‡æ¢ï¼Œç³»ç»Ÿæ›´å¥å£®ï¼Œå¯ç”¨æ€§æ›´é«˜ã€‚</li></ul><p><strong>ç¼ºç‚¹ï¼š</strong></p><ul><li>Redisè¾ƒéš¾æ”¯æŒåœ¨çº¿æ‰©å®¹ï¼Œåœ¨é›†ç¾¤å®¹é‡è¾¾åˆ°ä¸Šé™æ—¶åœ¨çº¿æ‰©å®¹ä¼šå˜å¾—å¾ˆå¤æ‚ã€‚</li></ul><h3 id="ä¸‰ã€Redisé›†ç¾¤"><a href="#ä¸‰ã€Redisé›†ç¾¤" class="headerlink" title="ä¸‰ã€Redisé›†ç¾¤"></a>ä¸‰ã€Redisé›†ç¾¤</h3><p>redisçš„å“¨å…µæ¨¡å¼åŸºæœ¬å·²ç»å¯ä»¥å®ç°é«˜å¯ç”¨ï¼Œè¯»å†™åˆ†ç¦» ï¼Œä½†æ˜¯åœ¨è¿™ç§æ¨¡å¼ä¸‹æ¯å°redisæœåŠ¡å™¨éƒ½å­˜å‚¨ç›¸åŒçš„æ•°æ®ï¼Œå¾ˆæµªè´¹å†…å­˜ï¼Œæ‰€ä»¥åœ¨redis3.0ä¸ŠåŠ å…¥äº†clusteræ¨¡å¼ï¼Œå®ç°çš„redisçš„åˆ†å¸ƒå¼å­˜å‚¨ï¼Œä¹Ÿå°±æ˜¯è¯´æ¯å°redisèŠ‚ç‚¹ä¸Šå­˜å‚¨ä¸åŒçš„å†…å®¹ã€‚<br><br>Redis-Clusteré‡‡ç”¨æ— ä¸­å¿ƒç»“æ„,å®ƒçš„ç‰¹ç‚¹å¦‚ä¸‹ï¼š</p><ul><li>æ‰€æœ‰çš„redisèŠ‚ç‚¹å½¼æ­¤äº’è”(PING-PONGæœºåˆ¶),å†…éƒ¨ä½¿ç”¨äºŒè¿›åˆ¶åè®®ä¼˜åŒ–ä¼ è¾“é€Ÿåº¦å’Œå¸¦å®½ã€‚</li><li>èŠ‚ç‚¹çš„failæ˜¯é€šè¿‡é›†ç¾¤ä¸­è¶…è¿‡åŠæ•°çš„èŠ‚ç‚¹æ£€æµ‹å¤±æ•ˆæ—¶æ‰ç”Ÿæ•ˆã€‚</li><li>å®¢æˆ·ç«¯ä¸redisèŠ‚ç‚¹ç›´è¿,ä¸éœ€è¦ä¸­é—´ä»£ç†å±‚.å®¢æˆ·ç«¯ä¸éœ€è¦è¿æ¥é›†ç¾¤æ‰€æœ‰èŠ‚ç‚¹,è¿æ¥é›†ç¾¤ä¸­ä»»ä½•ä¸€ä¸ªå¯ç”¨èŠ‚ç‚¹å³å¯ã€‚</li></ul><p><strong>å·¥ä½œæ–¹å¼ï¼š</strong><br>åœ¨redisçš„æ¯ä¸€ä¸ªèŠ‚ç‚¹ä¸Šï¼Œéƒ½æœ‰è¿™ä¹ˆä¸¤ä¸ªä¸œè¥¿ï¼Œä¸€ä¸ªæ˜¯æ’æ§½ï¼ˆslotï¼‰ï¼Œå®ƒçš„çš„å–å€¼èŒƒå›´æ˜¯ï¼š<code>0-16383</code>ã€‚è¿˜æœ‰ä¸€ä¸ªå°±æ˜¯clusterï¼Œå¯ä»¥ç†è§£ä¸ºæ˜¯ä¸€ä¸ªé›†ç¾¤ç®¡ç†çš„æ’ä»¶ã€‚å½“æˆ‘ä»¬çš„å­˜å–çš„keyåˆ°è¾¾çš„æ—¶å€™ï¼Œredisä¼šæ ¹æ®crc16çš„ç®—æ³•å¾—å‡ºä¸€ä¸ªç»“æœï¼Œç„¶åæŠŠç»“æœå¯¹<code>16384</code> æ±‚ä½™æ•°ï¼Œè¿™æ ·æ¯ä¸ª<code>key</code>éƒ½ä¼šå¯¹åº”ä¸€ä¸ªç¼–å·åœ¨<code>0-16383</code>ä¹‹é—´çš„å“ˆå¸Œæ§½ï¼Œé€šè¿‡è¿™ä¸ªå€¼ï¼Œå»æ‰¾åˆ°å¯¹åº”çš„æ’æ§½æ‰€å¯¹åº”çš„èŠ‚ç‚¹ï¼Œç„¶åç›´æ¥è‡ªåŠ¨è·³è½¬åˆ°è¿™ä¸ªå¯¹åº”çš„èŠ‚ç‚¹ä¸Šè¿›è¡Œå­˜å–æ“ä½œã€‚<br><br>ä¸ºäº†ä¿è¯é«˜å¯ç”¨ï¼Œredis-clusteré›†ç¾¤å¼•å…¥äº†ä¸»ä»æ¨¡å¼ï¼Œä¸€ä¸ªä¸»èŠ‚ç‚¹å¯¹åº”ä¸€ä¸ªæˆ–è€…å¤šä¸ªä»èŠ‚ç‚¹ï¼Œå½“ä¸»èŠ‚ç‚¹å®•æœºçš„æ—¶å€™ï¼Œå°±ä¼šå¯ç”¨ä»èŠ‚ç‚¹ã€‚å½“å…¶å®ƒä¸»èŠ‚ç‚¹<code>ping</code>ä¸€ä¸ªä¸»èŠ‚ç‚¹Aæ—¶ï¼Œå¦‚æœåŠæ•°ä»¥ä¸Šçš„ä¸»èŠ‚ç‚¹ä¸Aé€šä¿¡è¶…æ—¶ï¼Œé‚£ä¹ˆè®¤ä¸ºä¸»èŠ‚ç‚¹Aå®•æœºäº†ã€‚å¦‚æœä¸»èŠ‚ç‚¹Aå’Œå®ƒçš„ä»èŠ‚ç‚¹A1éƒ½å®•æœºäº†ï¼Œé‚£ä¹ˆè¯¥é›†ç¾¤å°±æ— æ³•å†æä¾›æœåŠ¡äº†ã€‚</p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> Nosql </category>
          
      </categories>
      
      
        <tags>
            
            <tag> redis </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åå…«ä¸ªè‡ªç„¶æ•ˆåº”</title>
      <link href="/2019/11/12/xiaoying/"/>
      <url>/2019/11/12/xiaoying/</url>
      
        <content type="html"><![CDATA[<h1 id="é…’ä¸æ±¡æ°´å®šå¾‹"><a href="#é…’ä¸æ±¡æ°´å®šå¾‹" class="headerlink" title="é…’ä¸æ±¡æ°´å®šå¾‹"></a>é…’ä¸æ±¡æ°´å®šå¾‹</h1><hr style="border: 1px solid #000000"><font size="4px" color="#993333" ;="">é…’ä¸æ±¡æ°´å®šå¾‹æ˜¯æŒ‡ï¼Œå¦‚æœæŠŠä¸€åŒ™é…’å€’è¿›ä¸€æ¡¶æ±¡æ°´ä¸­ï¼Œä½ å¾—åˆ°çš„æ˜¯ä¸€æ¡¶æ±¡æ°´ï¼›å¦‚æœæŠŠä¸€åŒ™æ±¡æ°´å€’è¿›ä¸€æ¡¶é…’ä¸­ï¼Œä½ å¾—åˆ°çš„è¿˜æ˜¯ä¸€æ¡¶æ±¡æ°´ã€‚</font><br><p><strong>å¯è¿ªï¼šä¸€ä¸ªæ­£ç›´èƒ½å¹²çš„å¹´è½»äººè¿›å»ä¸€ä¸ªæ··ä¹±çš„éƒ¨é—¨ï¼Œå¯èƒ½ä¼šè¢«åæ²¡ï¼Œå¹´è½»äººè¦å¤šæ¥è§¦ä¸€äº›ç¾å¥½çš„ä¸œè¥¿ï¼Œé˜²å¾®æœæ¸ï¼Œåšå†³æ‘’å¼ƒä¸‘æ¶çš„ä¸œè¥¿ã€‚</strong></p><h1 id="é©¬å¤ªæ•ˆåº”"><a href="#é©¬å¤ªæ•ˆåº”" class="headerlink" title="é©¬å¤ªæ•ˆåº”"></a>é©¬å¤ªæ•ˆåº”</h1><hr style="border: 1px solid #000000"><font size="4px" color="#993333" ;="">æŒ‡å¼ºè€…æ„ˆå¼ºã€å¼±è€…æ„ˆå¼±çš„ç°è±¡ï¼Œåå­—æ¥è‡ªåœ£ç»ã€Šæ–°çº¦Â·é©¬å¤ªç¦éŸ³ã€‹ä¸€åˆ™å¯“è¨€ï¼š â€œå‡¡æœ‰çš„ï¼Œè¿˜è¦åŠ å€ç»™ä»–å«ä»–å¤šä½™ï¼›æ²¡æœ‰çš„ï¼Œè¿ä»–æ‰€æœ‰çš„ä¹Ÿè¦å¤ºè¿‡æ¥â€ã€‚</font><br><p><strong>å¯è¿ªï¼šè¦ä¿æŒåœ¨æŸä¸ªé¢†åŸŸæœ‰ä¸å¯æ›¿ä»£çš„ä¼˜åŠ¿ï¼Œå°±èƒ½å¤Ÿå°†å¤§éƒ¨åˆ†æœ‰åˆ©çš„èµ„æºèšæ‹¢åœ¨ä½ çš„èº«è¾¹ã€‚å†è€…ï¼Œå½“ç›®æ ‡é¢†åŸŸæœ‰å¼ºå¤§å¯¹æ‰‹çš„æƒ…å†µä¸‹ï¼Œå°±è¦å¦è¾Ÿè¹Šå¾„ï¼Œæ‰¾å‡†å¯¹æ‰‹çš„å¼±é¡¹å’Œè‡ªå·±çš„ä¼˜åŠ¿ã€‚</strong></p><h1 id="ç³–æœæ•ˆåº”"><a href="#ç³–æœæ•ˆåº”" class="headerlink" title="ç³–æœæ•ˆåº”"></a>ç³–æœæ•ˆåº”</h1><hr style="border: 1px solid #000000"><font size="4px" color="#993333" ;="">å¿ƒç†å­¦å®¶æµ‹è¯•ä¸€ç¾¤4å²çš„å­©å­èƒ½å¦åšæŒåœ¨20åˆ†é’Ÿååƒç³–ï¼Œç»è¿‡12å¹´è¿½è¸ªï¼Œå‘ç°è¡¨ç°ä¸åŒçš„å­©å­é•¿å¤§åä¸ªæ€§ä¸åŒã€‚ä»å°æ—¶å€™çš„è‡ªæ§ã€åˆ¤æ–­ã€è‡ªä¿¡çš„å°å®éªŒä¸­èƒ½é¢„æµ‹å‡ºä»–é•¿å¤§åä¸ªæ€§çš„æ•ˆåº”ï¼Œå°±å«ç³–æœæ•ˆåº”ã€‚</font><br><p><strong>å¯è¿ªï¼šè¦å–„äºæŠµåˆ¶è¯±æƒ‘ï¼Œä¸è¢«çœ¼å‰åˆ©ç›Šæ‰€è¿·æƒ‘ã€‚åˆ«æŒ‡æœ›è‡ªåˆ¶åŠ›ä¼šéšç€å¹´é¾„çš„é•¿å¤§è€Œå¢é•¿ï¼Œéœ€è¦æœ‰æ„è¯†åœ°å»é”»ç‚¼ã€‚</strong></p><h1 id="èšå…‰ç¯æ•ˆåº”"><a href="#èšå…‰ç¯æ•ˆåº”" class="headerlink" title="èšå…‰ç¯æ•ˆåº”"></a>èšå…‰ç¯æ•ˆåº”</h1><hr style="border: 1px solid #000000"><font size="4px" color="#993333" ;="">æœ‰æ—¶å€™æˆ‘ä»¬æ€»æ˜¯ä¸ç»æ„çš„æŠŠè‡ªå·±çš„é—®é¢˜æ”¾åˆ°æ— é™å¤§ï¼Œå½“æˆ‘ä»¬å‡ºä¸‘æ—¶æ€»ä»¥ä¸ºäººå®¶ä¼šæ³¨æ„åˆ°ï¼Œå…¶å®å¹¶ä¸æ˜¯è¿™æ ·çš„ï¼Œäººå®¶æˆ–è®¸å½“æ—¶ä¼šæ³¨æ„åˆ°å¯æ˜¯äº‹åé©¬ä¸Šå°±å¿˜äº†ã€‚</font><br><p><strong>å¯è¿ªï¼šä¸ç”¨å¤ªåœ¨ä¹åˆ«äººçš„çœ‹æ³•ã€‚ä½ æ„Ÿè§‰è‡ªå·±åœ¨ä»–ä»¬çœ¼ä¸­æ˜¯å¤±è´¥çš„ã€æ¶ˆæçš„ï¼Œå…¶å®ä¸æ˜¯çš„ï¼Œå‹‡æ•¢æŠ›æ‰è¿™äº›ä¸æ­£ç¡®çš„â€œå‡è®¾â€ï¼Œå› ä¸ºè¿™äº›æƒ³æ³•æœ¬æ¥å°±æ˜¯ä¸åˆ‡å®é™…çš„ã€‚</strong></p><h1 id="è˜‘è‡å®šå¾‹"><a href="#è˜‘è‡å®šå¾‹" class="headerlink" title="è˜‘è‡å®šå¾‹"></a>è˜‘è‡å®šå¾‹</h1><hr style="border: 1px solid #000000"><font size="4px" color="#993333" ;="">æŒ‡åˆå…¥ä¸–è€…å¸¸å¸¸ä¼šè¢«ç½®äºé˜´æš—çš„è§’è½ï¼Œä¸å—é‡è§†æˆ–æ‰“æ‚è·‘è…¿ï¼Œå°±åƒè˜‘è‡åŸ¹è‚²ä¸€æ ·è¿˜è¦è¢«æµ‡ä¸Šå¤§ç²ªï¼Œæ¥å—å„ç§æ— ç«¯çš„æ‰¹è¯„ã€æŒ‡è´£ï¼Œå¾—ä¸åˆ°å¿…è¦çš„æŒ‡å¯¼å’Œææºï¼Œå¤„äºè‡ªç”Ÿè‡ªç­è¿‡ç¨‹ä¸­ã€‚è˜‘è‡ç”Ÿé•¿å¿…é¡»ç»å†è¿™æ ·ä¸€ä¸ªè¿‡ç¨‹ï¼Œäººçš„æˆé•¿ä¹Ÿè‚¯å®šä¼šç»å†è¿™æ ·ä¸€ä¸ªè¿‡ç¨‹ã€‚</font><br><p><strong>å¯è¿ªï¼šå½“å‡ å¤©è˜‘è‡ï¼Œèƒ½è®©æˆ‘ä»¬æ¶ˆé™¤å¾ˆå¤šä¸åˆ‡å®é™…çš„æƒ³æ³•ï¼Œè®©æˆ‘ä»¬æ›´åŠ æ¥è¿‘ç°å®ã€‚</strong></p><h1 id="é£è½®æ•ˆåº”"><a href="#é£è½®æ•ˆåº”" class="headerlink" title="é£è½®æ•ˆåº”"></a>é£è½®æ•ˆåº”</h1><hr style="border: 1px solid #000000"><font size="4px" color="#993333" ;="">ä¸ºäº†ä½¿é™æ­¢çš„é£è½®è½¬åŠ¨èµ·æ¥ï¼Œä¸€å¼€å§‹ä½ å¿…é¡»ä½¿å¾ˆå¤§çš„åŠ›æ°”ï¼Œä¸€åœˆä¸€åœˆåå¤åœ°æ¨ï¼Œè¾¾åˆ°æŸä¸€ä¸´ç•Œç‚¹åï¼Œé£è½®çš„é‡åŠ›å’Œå†²åŠ›ä¼šæˆä¸ºæ¨åŠ¨åŠ›çš„ä¸€éƒ¨åˆ†ã€‚è¿™æ—¶ï¼Œä½ æ— é¡»å†è´¹æ›´å¤§çš„åŠ›æ°”ï¼Œé£è½®ä¾æ—§ä¼šå¿«é€Ÿè½¬åŠ¨ï¼Œè€Œä¸”ä¸åœåœ°è½¬åŠ¨ã€‚</font><br><p><strong>å¯è¿ªï¼šäººåœ¨è¿›å…¥æŸä¸€æ–°çš„æˆ–é™Œç”Ÿçš„é¢†åŸŸçš„æ—¶å€™ï¼Œéƒ½ä¼šç»å†è¿™ä¸€è¿‡ç¨‹ã€‚å¦‚æœè¦è®©é£è½®è½¬èµ·æ¥ä¸èŠ±å¤ªå¤§åŠ›æ°”ï¼Œæ¡ä»¶æ˜¯è¦æœ‰è¶³å¤Ÿçš„åšæŒï¼Œè¿™ä¹Ÿæ„å‘³ç€å¾—ç”¨æ—¶é—´è¶³å¤Ÿæ¥ä¿è¯ã€‚</strong></p><h1 id="é…¸è‘¡è„æ•ˆåº”"><a href="#é…¸è‘¡è„æ•ˆåº”" class="headerlink" title="é…¸è‘¡è„æ•ˆåº”"></a>é…¸è‘¡è„æ•ˆåº”</h1><hr style="border: 1px solid #000000"><font size="4px" color="#993333" ;="">å½“è‡ªå·±çœŸæ­£çš„éœ€æ±‚æ— æ³•å¾—åˆ°æ»¡è¶³äº§ç”ŸæŒ«æŠ˜æ„Ÿæ—¶ï¼Œä¸ºäº†è§£é™¤å†…å¿ƒä¸å®‰ï¼Œç¼–é€ ä¸€äº›â€œç†ç”±â€è‡ªæˆ‘å®‰æ…°ï¼Œä»¥æ¶ˆé™¤ç´§å¼ ï¼Œå‡è½»å‹åŠ›ï¼Œä½¿è‡ªå·±ä»ä¸æ»¡ã€ä¸å®‰ç­‰æ¶ˆæå¿ƒç†çŠ¶æ€ä¸­è§£è„±å‡ºæ¥ï¼Œä¿æŠ¤è‡ªå·±å…å—ä¼¤å®³ã€‚</font><br><p><strong>å¯è¿ªï¼šä»»ä½•ä¸€ç§äº‹ç‰©éƒ½ä¼šæœ‰æ­£åä¸¤ç§æ„ä¹‰ï¼Œåªè¦èµ·åˆ°æš‚ç¼“å¿ƒç†å‹åŠ›ä½œç”¨ï¼Œä½¿å¿ƒç†å¾—ä»¥å¹³è¡¡ï¼Œå°±æœ‰å…¶å®é™…æ„ä¹‰ï¼Œå³â€åˆç†åŒ–â€çš„é…¸è‘¡è„æ•ˆåº”ã€‚å½“ç„¶ï¼Œæˆ‘ä»¬ä¸èƒ½æ€»æ˜¯åœç•™åœ¨æ­¤ï¼Œäº‹ååº”é‡‡å–ç§¯ææªæ–½ï¼Œè§£å†³é—®é¢˜ã€‚</strong></p><h1 id="å‡¡å‹ƒä¼¦æ•ˆåº”"><a href="#å‡¡å‹ƒä¼¦æ•ˆåº”" class="headerlink" title="å‡¡å‹ƒä¼¦æ•ˆåº”"></a>å‡¡å‹ƒä¼¦æ•ˆåº”</h1><hr style="border: 1px solid #000000"><font size="4px" color="#993333" ;="">å•†å“ä»·æ ¼å®šå¾—è¶Šé«˜ï¼Œè¶Šèƒ½å—åˆ°æ¶ˆè´¹è€…çš„é’çã€‚å•†å“ä»·æ ¼è¶Šé«˜æ¶ˆè´¹è€…åè€Œè¶Šæ„¿æ„è´­ä¹°çš„æ¶ˆè´¹å€¾å‘ï¼Œæœ€æ—©ç”±ç¾å›½ç»æµå­¦å®¶å‡¡å‹ƒä¼¦æ³¨æ„åˆ°ï¼Œå› æ­¤è¢«å‘½åä¸ºâ€œå‡¡å‹ƒä¼¦æ•ˆåº”â€ã€‚</font><br><p><strong>å¯è¿ªï¼šäººä¹Ÿæ˜¯ä¸€æ ·çš„ï¼Œè¦æƒ³å¾—åˆ°â€œå¥½ä»·é’±â€ï¼Œå°±åº”è¯¥æŠŠè‡ªå·±é›•ç¢æˆå™¨ï¼Œæ”¾åœ¨æ­£ç¡®çš„åœ°æ–¹å¾…ä»·è€Œæ²½ã€‚</strong></p><h1 id="å—é£æ•ˆåº”"><a href="#å—é£æ•ˆåº”" class="headerlink" title="å—é£æ•ˆåº”"></a>å—é£æ•ˆåº”</h1><hr style="border: 1px solid #000000"><font size="4px" color="#993333" ;="">æºäºä¸€åˆ™æ³•å›½å¯“è¨€ï¼ŒåŒ—é£å’Œå—é£æ¯”å¨åŠ›ï¼Œçœ‹è°èƒ½æŠŠè¡Œäººèº«ä¸Šçš„å¤§è¡£è„±æ‰ã€‚åŒ—é£å‘¼å•¸ï¼Œç»“æœè¡Œäººä¸ºäº†æŠµå¾¡å¯’å†·ï¼Œä¾¿æŠŠå¤§è¡£è£¹å¾—ç´§ç´§çš„ã€‚å—é£åˆ™å¾å¾å¹åŠ¨ï¼Œé¡¿æ—¶é£å’Œæ—¥ä¸½ï¼Œè¡Œäººå› ä¸ºè§‰å¾—æ¸©æš–ï¼Œç»§è€Œè„±æ‰å¤§è¡£ï¼Œå—é£è·å¾—äº†èƒœåˆ©ã€‚</font><br><p><strong>å¯è¿ªï¼šåœ¨å¤„ç†äººä¸äººä¹‹é—´å…³ç³»æ—¶ï¼Œè¦ç‰¹åˆ«æ³¨æ„è®²ç©¶æ–¹æ³•ã€‚åŒ—é£å’Œå—é£éƒ½è¦ä½¿è¡Œäººè„±æ‰å¤§è¡£ï¼Œä½†ç”±äºæ–¹æ³•ä¸ä¸€æ ·ï¼Œç»“æœå¤§ç›¸å¾„åº­ã€‚</strong></p><h1 id="ä¸‰æ˜æ²»æ•ˆåº”"><a href="#ä¸‰æ˜æ²»æ•ˆåº”" class="headerlink" title="ä¸‰æ˜æ²»æ•ˆåº”"></a>ä¸‰æ˜æ²»æ•ˆåº”</h1><hr style="border: 1px solid #000000"><font size="4px" color="#993333" ;="">åœ¨æ‰¹è¯„å¿ƒç†å­¦ä¸­ï¼Œäººä»¬æŠŠæ‰¹è¯„çš„å†…å®¹å¤¹åœ¨ä¸¤ä¸ªè¡¨æ‰¬ä¹‹ä¸­ä»è€Œä½¿å—æ‰¹è¯„è€…æ„‰å¿«åœ°æ¥å—æ‰¹è¯„çš„ç°è±¡ï¼Œç§°ä¹‹ä¸ºä¸‰æ˜æ²»æ•ˆåº”ã€‚</font><br><p><strong>å¯è¿ªï¼šåœ¨å»ºè®®å’Œæ‰¹è¯„çš„åŒæ—¶ï¼Œä¸å¿˜è®¤åŒã€è‚¯å®šã€èµè¯†å¯¹æ–¹ï¼Œå¯ä»¥ä½¿æ¥å—æ‰¹è¯„è€…ç§¯æåœ°æ¥å—æ‰¹è¯„ï¼Œå¹¶æ”¹æ­£è‡ªå·±çš„ä¸è¶³ä¹‹å¤„ã€‚</strong></p><h1 id="æ›å…‰æ•ˆåº”"><a href="#æ›å…‰æ•ˆåº”" class="headerlink" title="æ›å…‰æ•ˆåº”"></a>æ›å…‰æ•ˆåº”</h1><hr style="border: 1px solid #000000"><font size="4px" color="#993333" ;="">è¿™æ˜¯ä¸€ç§å¿ƒç†ç°è±¡ï¼ŒæŒ‡çš„æ˜¯æˆ‘ä»¬ä¼šåå¥½è‡ªå·±ç†Ÿæ‚‰çš„äº‹ç‰©ï¼Œç¤¾ä¼šå¿ƒç†å­¦åˆæŠŠè¿™ç§æ•ˆåº”å«åšç†Ÿæ‚‰å®šå¾‹ï¼Œæˆ‘ä»¬æŠŠè¿™ç§åªè¦ç»å¸¸å‡ºç°å°±èƒ½å¢åŠ å–œæ¬¢ç¨‹åº¦çš„ç°è±¡å«åšæ›å…‰æ•ˆåº”ã€‚</font><br><p><strong>å¯è¿ªï¼šè‹¥æƒ³å¢å¼ºäººé™…å¸å¼•ï¼Œå°±è¦ç•™å¿ƒè‡ªå·±åœ¨åˆ«äººé¢å‰çš„ç†Ÿæ‚‰åº¦ï¼Œåœ¨æŸäººé¢å‰æ··ä¸ªè„¸ç†Ÿä¼šèµ¢å¾—å¥½æ„Ÿã€‚</strong></p><h1 id="é¦–å› æ•ˆåº”"><a href="#é¦–å› æ•ˆåº”" class="headerlink" title="é¦–å› æ•ˆåº”"></a>é¦–å› æ•ˆåº”</h1><hr style="border: 1px solid #000000"><font size="4px" color="#993333" ;="">é¦–å› æ•ˆåº”æ˜¯æŒ‡ä¸ªä½“åœ¨ç¤¾ä¼šè®¤çŸ¥è¿‡ç¨‹ä¸­ï¼Œé€šè¿‡â€œç¬¬ä¸€å°è±¡â€æœ€å…ˆè¾“å…¥çš„ä¿¡æ¯å¯¹å®¢ä½“ä»¥åçš„è®¤çŸ¥äº§ç”Ÿçš„å½±å“ä½œç”¨ã€‚</font><br><p><strong>å¯è¿ªï¼šåœ¨æ—¥å¸¸äº¤å¾€è¿‡ç¨‹ä¸­ï¼Œå°¤å…¶æ˜¯åˆæ¬¡äº¤å¾€æ—¶ï¼Œè¦æ³¨æ„ç»™äººç•™ä¸‹ç¾å¥½çš„å°è±¡ã€‚é¦–å…ˆï¼Œè¦æ³¨é‡ä»ªè¡¨é£åº¦ï¼Œâ€”èˆ¬æƒ…å†µä¸‹äººä»¬éƒ½æ„¿æ„åŒè¡£ç€å¹²å‡€æ•´é½ã€è½è½å¤§æ–¹çš„äººæ¥è§¦å’Œäº¤å¾€ã€‚å…¶æ¬¡ï¼Œè¦æ³¨æ„è¨€è°ˆä¸¾æ­¢ï¼Œä¸¾æ­¢ä¼˜é›…ï¼Œä¼šç»™äººç•™ä¸‹å¥½çš„å°è±¡ã€‚</strong></p><h1 id="æœ¨æ¡¶æ•ˆåº”"><a href="#æœ¨æ¡¶æ•ˆåº”" class="headerlink" title="æœ¨æ¡¶æ•ˆåº”"></a>æœ¨æ¡¶æ•ˆåº”</h1><hr style="border: 1px solid #000000"><font size="4px" color="#993333" ;="">ç”±ä¸€äº›æœ¨æ¿é’‰æˆçš„æœ¨æ¡¶ï¼Œå®ƒç››æ°´çš„å¤šå°‘ï¼Œåªç”±æœ€çŸ­çš„é‚£å—æœ¨æ¿å†³å®šã€‚è¦æƒ³ä½¿æœ¨æ¡¶å¤šç››æ°´ï¼Œå°±è¦ä¸‹åŠŸå¤«å¼¥è¡¥æœ€çŸ­çš„é‚£å—æœ¨æ¿ã€‚</font><br><p><strong>å¯è¿ªï¼šä»»ä½•ä¸€ä¸ªç»„ç»‡ï¼Œå¯èƒ½é¢ä¸´çš„ä¸€ä¸ªå…±åŒé—®é¢˜ï¼Œå³æ„æˆç»„ç»‡çš„å„ä¸ªéƒ¨åˆ†å¾€å¾€æ˜¯ä¼˜åŠ£ä¸é½çš„ï¼Œè€ŒåŠ£åŠ¿éƒ¨åˆ†å¾€å¾€å†³å®šæ•´ä¸ªç»„ç»‡çš„æ°´å¹³ã€‚å› æ­¤ï¼Œæ•´ä¸ªç¤¾ä¼šä¸æˆ‘ä»¬æ¯ä¸ªäººéƒ½åº”æ€è€ƒä¸€ä¸‹è‡ªå·±çš„â€œçŸ­æ¿â€ï¼Œå¹¶å°½æ—©è¡¥è¶³å®ƒã€‚</strong></p><h1 id="ç ´çª—æ•ˆåº”"><a href="#ç ´çª—æ•ˆåº”" class="headerlink" title="ç ´çª—æ•ˆåº”"></a>ç ´çª—æ•ˆåº”</h1><hr style="border: 1px solid #000000"><font size="4px" color="#993333" ;="">å¦‚æœæœ‰äººæ‰“åäº†ä¸€å¹¢å»ºç­‘ç‰©çš„çª—æˆ·ç»ç’ƒï¼Œè€Œè¿™æ‰‡çª—æˆ·åˆå¾—ä¸åˆ°åŠæ—¶çš„ç»´ä¿®ï¼Œåˆ«äººå°±å¯èƒ½å—åˆ°æŸäº›æš—ç¤ºæ€§çš„çºµå®¹å»æ‰“çƒ‚æ›´å¤šçš„çª—æˆ·ã€‚</font><br><p><strong>å¯è¿ªï¼šä»»ä½•ä¸€ç§ä¸è‰¯ç°è±¡çš„å­˜åœ¨ï¼Œéƒ½åœ¨ä¼ é€’ç€ä¸€ç§ä¿¡æ¯ï¼Œè¿™ç§ä¿¡æ¯ä¼šå¯¼è‡´ä¸è‰¯ç°è±¡çš„æ— é™æ‰©å±•ã€‚åŒæ—¶å¿…é¡»é«˜åº¦è­¦è§‰é‚£äº›çœ‹èµ·æ¥æ˜¯å¶ç„¶çš„ã€ä¸ªåˆ«çš„ã€è½»å¾®çš„â€œè¿‡é”™â€ï¼Œå¦‚æœå¯¹è¿™ç§è¡Œä¸ºä¸é—»ä¸é—®çº æ­£ä¸åŠ›ï¼Œå°±ä¼šçºµå®¹æ›´å¤šçš„äººâ€œå»æ‰“çƒ‚æ›´å¤šçš„çª—æˆ·ç»ç’ƒâ€ã€‚</strong></p><h1 id="ç™»é—¨æ§›æ•ˆåº”"><a href="#ç™»é—¨æ§›æ•ˆåº”" class="headerlink" title="ç™»é—¨æ§›æ•ˆåº”"></a>ç™»é—¨æ§›æ•ˆåº”</h1><hr style="border: 1px solid #000000"><font size="4px" color="#993333" ;="">æŒ‡ä¸€ä¸ªäººä¸€æ—¦æ¥å—äº†ä»–äººçš„ä¸€ä¸ªå¾®ä¸è¶³é“çš„è¦æ±‚ï¼Œä¸ºäº†é¿å…è®¤çŸ¥ä¸Šçš„ä¸åè°ƒï¼Œæˆ–æƒ³ç»™ä»–äººä»¥å‰åä¸€è‡´çš„å°è±¡ï¼Œå°±æœ‰å¯èƒ½æ¥å—æ›´å¤§çš„è¦æ±‚ã€‚è¿™ç§ç°è±¡ï¼ŒçŠ¹å¦‚ç™»é—¨åæ—¶è¦ä¸€çº§å°é˜¶ä¸€çº§å°é˜¶åœ°ç™»ï¼Œè¿™æ ·èƒ½æ›´å®¹æ˜“æ›´é¡ºåˆ©åœ°ç™»ä¸Šé«˜å¤„ã€‚</font><br><p><strong>å¯è¿ªï¼šåœ¨è¦æ±‚åˆ«äººåšæŸä»¶è¾ƒéš¾çš„äº‹æƒ…è€Œåˆæ‹…å¿ƒä»–ä¸æ„¿æ„åšæ—¶ï¼Œå¯ä»¥å…ˆå‘ä»–æå‡ºåšä¸€ä»¶ç±»ä¼¼çš„è¾ƒå°çš„äº‹æƒ…ã€‚å½“ä»–ä»¬è¾¾åˆ°è¿™ä¸ªè¦æ±‚åï¼Œå†é€šè¿‡é¼“åŠ±ï¼Œé€æ­¥å‘å…¶æå‡ºæ›´é«˜çš„è¦æ±‚ï¼Œè¿™æ ·åˆ«äººå®¹æ˜“æ¥å—ï¼Œé¢„æœŸç›®æ ‡ä¹Ÿå®¹æ˜“å®ç°ã€‚</strong></p><h1 id="é¸Ÿç¬¼æ•ˆåº”"><a href="#é¸Ÿç¬¼æ•ˆåº”" class="headerlink" title="é¸Ÿç¬¼æ•ˆåº”"></a>é¸Ÿç¬¼æ•ˆåº”</h1><hr style="border: 1px solid #000000"><font size="4px" color="#993333" ;="">å‡å¦‚ä¸€ä¸ªäººä¹°äº†ä¸€åªç©ºé¸Ÿç¬¼æ”¾åœ¨å®¶é‡Œï¼Œé‚£ä¹ˆä¸€æ®µæ—¶é—´åï¼Œä»–ä¸€èˆ¬ä¼šä¸ºäº†ç”¨è¿™åªç¬¼å­å†ä¹°ä¸€åªé¸Ÿå›æ¥å…»è€Œä¸ä¼šæŠŠç¬¼å­ä¸¢æ‰ï¼Œä¹Ÿå°±æ˜¯è¿™ä¸ªäººåè€Œè¢«ç¬¼å­ç»™å¼‚åŒ–æ‰äº†ï¼Œæˆä¸ºç¬¼å­çš„ä¿˜è™ ã€‚</font><br><p><strong>å¯è¿ªï¼šé¸Ÿç¬¼æ•ˆåº”å‘Šè¯‰æˆ‘ä»¬çœ‹å¾…ä»»ä½•äº‹ç‰©éƒ½ä¸è¦ç»å¯¹åŒ–ï¼Œåˆç†çš„ä¸œè¥¿é‡Œé¢ä¼šæœ‰ä¸åˆç†çš„å› ç´ ï¼Œè²Œä¼¼ä¸åˆç†çš„ä¸œè¥¿å…¶å®ä¹Ÿä¼šè•´è—ç€åˆç†çš„å› ç´ ã€‚</strong></p><h1 id="æ¯›æ¯›è™«æ•ˆåº”"><a href="#æ¯›æ¯›è™«æ•ˆåº”" class="headerlink" title="æ¯›æ¯›è™«æ•ˆåº”"></a>æ¯›æ¯›è™«æ•ˆåº”</h1><hr style="border: 1px solid #000000"><font size="4px" color="#993333" ;="">ç§‘å­¦å®¶é€šè¿‡ç ”ç©¶ï¼ŒæŠŠè·Ÿç€å‰é¢çš„è·¯çº¿èµ°çš„ä¹ æƒ¯ç§°ä¹‹ä¸ºâ€œè·Ÿéšè€…â€çš„ä¹ æƒ¯ï¼ŒæŠŠç›²ç›®è·Ÿä»ä¹ æƒ¯å’Œæ€ç»´æƒ¯æ€§è€Œåšå‡ºååº”å¯¼è‡´å¤±è´¥ç»“æœçš„ç°è±¡ç§°ä¸ºâ€œæ¯›æ¯›è™«æ•ˆåº”â€ã€‚</font><br><p><strong>å¯è¿ªï¼šæ— è®ºåœ¨å·¥ä½œã€ç”Ÿæ´»è¿˜æ˜¯å­¦ä¹ ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸ä¼šçŠ¯æ¯›æ¯›è™«ä¼¼çš„é”™è¯¯ï¼Œä¸€æ˜¯æ€ç»´å­˜åœ¨æƒ°æ€§ï¼ŒäºŒæ˜¯ç›®å…‰çŸ­æµ…ï¼Œä¸‰æ˜¯å®³æ€•é£é™©ï¼Œå››æ˜¯ç¼ºä¹èƒ†è¯†å’Œé­„åŠ›ï¼Œäº”æ˜¯ç¼ºä¹åˆ›æ–°çš„æ€æƒ³ï¼Œå…­æ˜¯ç¼ºä¹å¯è¡Œæ€§ç›®æ ‡ã€‚</strong></p><h1 id="é‡é©¬ç»“å±€"><a href="#é‡é©¬ç»“å±€" class="headerlink" title="é‡é©¬ç»“å±€"></a>é‡é©¬ç»“å±€</h1><hr style="border: 1px solid #000000"><font size="4px" color="#993333" ;="">æŒ‡å› èŠéº»å°äº‹è€Œå¤§åŠ¨è‚ç«ï¼Œä»¥è‡´å› åˆ«äººçš„è¿‡å¤±è€Œä¼¤å®³è‡ªå·±çš„ç°è±¡ã€‚åŠ¨è¾„ç”Ÿæ°”çš„äººå¾ˆéš¾å¥åº·ã€é•¿å¯¿ï¼Œå¾ˆå¤šäººå…¶å®æ˜¯â€œæ°”æ­»çš„â€ã€‚</font><br><p><strong>å¯è¿ªï¼šæƒ…ç»ªæ˜¯è‡ªèº«é€‰æ‹©çš„ç»“æœã€‚å¤–åœ¨äº‹ç‰©å¹¶ä¸èƒ½ä¼¤å®³æˆ‘ä»¬ã€‚å€’æ˜¯æˆ‘ä»¬è‡ªå·±å¯¹è¿™äº›äº‹ç‰©çš„ä¿¡å¿µä¸æ€åº¦è®©è‡ªå·±å—åˆ°äº†ä¼¤å®³ã€‚æ‰€ä»¥ï¼Œæˆ‘ä»¬åº”è¯¥å­¦ä¼šç®¡ç†å¥½è‡ªå·±çš„æƒ…ç»ªã€‚</strong></p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> éšç¬” </category>
          
      </categories>
      
      
        <tags>
            
            <tag> éšç¬” </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Centos7ä¸‹SambaæœåŠ¡å®‰è£…ä¸é…ç½®</title>
      <link href="/2019/11/12/samba/"/>
      <url>/2019/11/12/samba/</url>
      
        <content type="html"><![CDATA[<h3 id="1-Sambaç®€ä»‹"><a href="#1-Sambaç®€ä»‹" class="headerlink" title="1. Sambaç®€ä»‹"></a>1. Sambaç®€ä»‹</h3><p>Sambaæ˜¯åœ¨Linuxå’ŒUNIXç³»ç»Ÿä¸Šå®ç°SMBåè®®çš„ä¸€ä¸ªå…è´¹è½¯ä»¶ï¼Œç”±æœåŠ¡å™¨åŠå®¢æˆ·ç«¯ç¨‹åºæ„æˆã€‚SMBï¼ˆServer Messages Blockï¼Œä¿¡æ¯æœåŠ¡å—ï¼‰æ˜¯ä¸€ç§åœ¨å±€åŸŸç½‘ä¸Šå…±äº«æ–‡ä»¶å’Œæ‰“å°æœºçš„ä¸€ç§é€šä¿¡åè®®ï¼Œå®ƒä¸ºå±€åŸŸç½‘å†…çš„ä¸åŒè®¡ç®—æœºä¹‹é—´æä¾›æ–‡ä»¶åŠæ‰“å°æœºç­‰èµ„æºçš„å…±äº«æœåŠ¡ã€‚SMBåè®®æ˜¯å®¢æˆ·æœº/æœåŠ¡å™¨å‹åè®®ï¼Œå®¢æˆ·æœºé€šè¿‡è¯¥åè®®å¯ä»¥è®¿é—®æœåŠ¡å™¨ä¸Šçš„å…±äº«æ–‡ä»¶ç³»ç»Ÿã€æ‰“å°æœºåŠå…¶ä»–èµ„æºã€‚é€šè¿‡è®¾ç½®â€œNetBIOS over TCP/IPâ€ä½¿å¾—Sambaä¸ä½†èƒ½ä¸å±€åŸŸç½‘ç»œä¸»æœºåˆ†äº«èµ„æºï¼Œè¿˜èƒ½ä¸å…¨ä¸–ç•Œçš„ç”µè„‘åˆ†äº«èµ„æºã€‚<br><br>Sambaæœ€å¤§çš„åŠŸèƒ½å°±æ˜¯å¯ä»¥ç”¨äºLinuxä¸windowsç³»ç»Ÿç›´æ¥çš„æ–‡ä»¶å…±äº«å’Œæ‰“å°å…±äº«ï¼ŒSambaæ—¢å¯ä»¥ç”¨äºwindowsä¸Linuxä¹‹é—´çš„æ–‡ä»¶å…±äº«ï¼Œä¹Ÿå¯ä»¥ç”¨äºLinuxä¸Linuxä¹‹é—´çš„èµ„æºå…±äº«ã€‚<br><br>Sambaç”±ä¸¤ä¸ªä¸»è¦ç¨‹åºç»„æˆï¼Œå®ƒä»¬æ˜¯<code>smbd</code>å’Œ<code>nmbd</code>ã€‚è¿™ä¸¤ä¸ªå®ˆæŠ¤è¿›ç¨‹åœ¨æœåŠ¡å™¨å¯åŠ¨åˆ°åœæ­¢æœŸé—´æŒç»­è¿è¡Œï¼ŒåŠŸèƒ½å„å¼‚ã€‚<code>Smbd</code>å’Œ<code>nmbd</code>ä½¿ç”¨çš„å…¨éƒ¨é…ç½®ä¿¡æ¯å…¨éƒ½ä¿å­˜åœ¨smb.confæ–‡ä»¶ä¸­ã€‚Smb.confå‘<code>smbd</code>å’Œ<code>nmbd</code>ä¸¤ä¸ªå®ˆæŠ¤è¿›ç¨‹è¯´æ˜è¾“å‡ºä»€ä¹ˆä»¥ä¾¿å…±äº«ï¼Œå…±äº«è¾“å‡ºç»™è°åŠå¦‚ä½•è¿›è¡Œè¾“å‡ºã€‚<br><br>Sambaæä¾›äº†åŸºäºCIFSçš„å››ä¸ªæœåŠ¡ï¼šæ–‡ä»¶å’Œæ‰“å°æœåŠ¡ã€æˆæƒä¸è¢«æˆæƒã€åç§°è§£æã€æµè§ˆæœåŠ¡ã€‚å‰ä¸¤é¡¹æœåŠ¡ç”±<code>smbd</code>æä¾›ï¼Œåä¸¤é¡¹æœåŠ¡åˆ™ç”±nmbdæä¾›ã€‚ ç®€å•åœ°è¯´ï¼Œ<code>smbd</code>è¿›ç¨‹çš„ä½œç”¨æ˜¯å¤„ç†åˆ°æ¥çš„SMBè½¯ä»¶åŒ…ï¼Œä¸ºä½¿ç”¨è¯¥è½¯ä»¶åŒ…çš„èµ„æºä¸Linuxè¿›è¡Œåå•†ï¼Œ<code>nmbd</code>è¿›ç¨‹ä½¿ä¸»æœº(æˆ–å·¥ä½œç«™)èƒ½æµè§ˆLinuxæœåŠ¡å™¨ã€‚</p><h3 id="2-Sambaå®‰è£…ä¸é…ç½®"><a href="#2-Sambaå®‰è£…ä¸é…ç½®" class="headerlink" title="2. Sambaå®‰è£…ä¸é…ç½®"></a>2. Sambaå®‰è£…ä¸é…ç½®</h3><h4 id="2-1-Sambaå®‰è£…ä¸æŸ¥çœ‹"><a href="#2-1-Sambaå®‰è£…ä¸æŸ¥çœ‹" class="headerlink" title="2.1 Sambaå®‰è£…ä¸æŸ¥çœ‹"></a>2.1 Sambaå®‰è£…ä¸æŸ¥çœ‹</h4><ul><li><p>å®‰è£…sambaåº”ç”¨</p><pre class=" language-bash"><code class="language-bash">yum -y <span class="token function">install</span> samba samba-client </code></pre></li><li><p>å¯åŠ¨Sambaåº”ç”¨</p><pre class=" language-bash"><code class="language-bash">systemctl start smb nmb</code></pre></li><li><p>æŸ¥çœ‹SambaæœåŠ¡è¿›ç¨‹</p><pre class=" language-bash"><code class="language-bash"><span class="token punctuation">[</span>root@samba ~<span class="token punctuation">]</span><span class="token comment" spellcheck="true"># ps -ef | grep -E 'smb|nmb'</span>root      9885     1  0 14:48 ?        00:00:00 /usr/sbin/nmbdroot      9887     1  0 14:48 ?        00:00:00 /usr/sbin/smbdroot      9888  9887  0 14:48 ?        00:00:00 /usr/sbin/smbdroot      9889  9887  0 14:48 ?        00:00:00 /usr/sbin/smbdroot      9890  9887  0 14:48 ?        00:00:00 /usr/sbin/smbdroot      9959  9627  0 15:02 pts/0    00:00:00 <span class="token function">grep</span> --color<span class="token operator">=</span>auto -E smb<span class="token operator">|</span>nmb</code></pre></li><li><p>æŸ¥çœ‹Sambaåº”ç”¨æœåŠ¡ç«¯å£<br>smbdåº”ç”¨è¿›ç¨‹ä¸»è¦ç›‘å¬139å’Œ445ç«¯å£ï¼Œ nmbdåº”ç”¨è¿›ç¨‹ä¸»è¦ç›‘å¬137ä¸138ç«¯å£ã€‚</p><pre class=" language-bash"><code class="language-bash"><span class="token punctuation">[</span>root@samba ~<span class="token punctuation">]</span><span class="token comment" spellcheck="true"># netstat -tunlp | grep -E 'smbd|nmbd'</span>tcp        0      0 0.0.0.0:139             0.0.0.0:*               LISTEN      9887/smbd           tcp        0      0 0.0.0.0:445             0.0.0.0:*               LISTEN      9887/smbd           tcp6       0      0 :::139                  :::*                    LISTEN      9887/smbd           tcp6       0      0 :::445                  :::*                    LISTEN      9887/smbd           udp        0      0 192.168.6.255:137       0.0.0.0:*                           9885/nmbd           udp        0      0 192.168.6.186:137       0.0.0.0:*                           9885/nmbd           udp        0      0 0.0.0.0:137             0.0.0.0:*                           9885/nmbd           udp        0      0 192.168.6.255:138       0.0.0.0:*                           9885/nmbd           udp        0      0 192.168.6.186:138       0.0.0.0:*                           9885/nmbd           udp        0      0 0.0.0.0:138             0.0.0.0:*                           9885/nmbd           </code></pre><h4 id="2-2-SambaæœåŠ¡é…ç½®ä»‹ç»"><a href="#2-2-SambaæœåŠ¡é…ç½®ä»‹ç»" class="headerlink" title="2.2 SambaæœåŠ¡é…ç½®ä»‹ç»"></a>2.2 SambaæœåŠ¡é…ç½®ä»‹ç»</h4><p>1ã€æŸ¥çœ‹Sambaé…ç½®æ–‡ä»¶<br>sambaæ–‡ä»¶å…±äº«é»˜è®¤é…ç½®æ–‡ä»¶å­˜æ”¾äº/etc/samba/smb.confä¸‹ï¼Œ ç”¨äºé…ç½®SambaæœåŠ¡å†…å®¹ã€‚</p><pre class=" language-bash"><code class="language-bash"><span class="token function">cat</span> /etc/samba/smb.conf<span class="token punctuation">[</span>global<span class="token punctuation">]</span>   workgroup <span class="token operator">=</span> SAMBA   security <span class="token operator">=</span> user   passdb backend <span class="token operator">=</span> tdbsam   printing <span class="token operator">=</span> cups   <span class="token function">printcap</span> name <span class="token operator">=</span> cups   load printers <span class="token operator">=</span> <span class="token function">yes</span>   cups options <span class="token operator">=</span> raw<span class="token punctuation">[</span>homes<span class="token punctuation">]</span>   comment <span class="token operator">=</span> Home Directories   valid <span class="token function">users</span> <span class="token operator">=</span> %S, %D%w%S   browseable <span class="token operator">=</span> No   <span class="token function">read</span> only <span class="token operator">=</span> No   inherit acls <span class="token operator">=</span> Yes<span class="token punctuation">[</span>printers<span class="token punctuation">]</span>   comment <span class="token operator">=</span> All Printers   path <span class="token operator">=</span> /var/tmp   printable <span class="token operator">=</span> Yes   create mask <span class="token operator">=</span> 0600   browseable <span class="token operator">=</span> No<span class="token punctuation">[</span>print$<span class="token punctuation">]</span>   comment <span class="token operator">=</span> Printer Drivers   path <span class="token operator">=</span> /var/lib/samba/drivers   <span class="token function">write</span> list <span class="token operator">=</span> root   create mask <span class="token operator">=</span> 0664   directory mask <span class="token operator">=</span> 0775</code></pre></li></ul><ol start="2"><li>Sambaé…ç½®æ–‡ä»¶è¯¦è§£</li></ol><ul><li><p><strong>å…¨å±€å‚æ•° [global]</strong></p></li><li><p><code>config file = /usr/local/samba/lib/smb.conf.%m</code><br>è¯´æ˜ï¼šconfig fileå¯ä»¥è®©ä½ ä½¿ç”¨å¦ä¸€ä¸ªé…ç½®æ–‡ä»¶æ¥è¦†ç›–ç¼ºçœçš„é…ç½®æ–‡ä»¶ã€‚å¦‚æœæ–‡ä»¶ ä¸å­˜åœ¨ï¼Œåˆ™è¯¥é¡¹æ— æ•ˆã€‚è¿™ä¸ªå‚æ•°å¾ˆæœ‰ç”¨ï¼Œå¯ä»¥ä½¿å¾—sambaé…ç½®æ›´çµæ´»ï¼Œå¯ä»¥è®©ä¸€å°sambaæœåŠ¡å™¨æ¨¡æ‹Ÿå¤šå°ä¸åŒé…ç½®çš„æœåŠ¡å™¨ã€‚æ¯”å¦‚ï¼Œä½ æƒ³è®©PC1ï¼ˆä¸»æœºåï¼‰è¿™å°ç”µè„‘åœ¨è®¿é—®Samba Serveræ—¶ä½¿ç”¨å®ƒè‡ªå·±çš„é…ç½®æ–‡ä»¶ï¼Œé‚£ä¹ˆå…ˆåœ¨/etc/samba/host/ä¸‹ä¸ºPC1é…ç½®ä¸€ä¸ªåä¸ºsmb.conf.pc1çš„æ–‡ä»¶ï¼Œç„¶ååœ¨smb.confä¸­åŠ å…¥ï¼šconfig file=/etc/samba/host/smb.conf.%mã€‚è¿™æ ·å½“PC1è¯·æ±‚è¿æ¥Samba Serveræ—¶ï¼Œsmb.conf.%må°±è¢«æ›¿æ¢æˆsmb.conf.pc1ã€‚è¿™æ ·ï¼Œå¯¹äºPC1æ¥è¯´ï¼Œå®ƒæ‰€ä½¿ç”¨çš„SambaæœåŠ¡å°±æ˜¯ç”±smb.conf.pc1å®šä¹‰çš„ï¼Œè€Œå…¶ä»–æœºå™¨è®¿é—®Samba Serveråˆ™è¿˜æ˜¯åº”ç”¨smb.confã€‚</p></li><li><p><code>workgroup = WORKGROUP</code><br>è¯´æ˜ï¼šè®¾å®š Samba Server æ‰€è¦åŠ å…¥çš„å·¥ä½œç»„æˆ–è€…åŸŸã€‚</p></li><li><p><code>server string = Samba Server Version %v</code><br>è¯´æ˜ï¼šè®¾å®š Samba Server çš„æ³¨é‡Šï¼Œå¯ä»¥æ˜¯ä»»ä½•å­—ç¬¦ä¸²ï¼Œä¹Ÿå¯ä»¥ä¸å¡«ã€‚å®%vè¡¨ç¤ºæ˜¾ç¤ºSambaçš„ç‰ˆæœ¬å·ã€‚</p></li><li><p><code>netbios name = smbserver</code><br>è¯´æ˜ï¼šè®¾ç½®Samba Serverçš„NetBIOSåç§°ã€‚å¦‚æœä¸å¡«ï¼Œåˆ™é»˜è®¤ä¼šä½¿ç”¨è¯¥æœåŠ¡å™¨çš„DNSåç§°çš„ç¬¬ä¸€éƒ¨åˆ†ã€‚netbios nameå’Œworkgroupåå­—ä¸è¦è®¾ç½®æˆä¸€æ ·äº†ã€‚</p></li><li><p><code>interfaces = lo eth0 192.168.12.2/24 192.168.13.2/24</code><br>è¯´æ˜ï¼šè®¾ç½®Samba Serverç›‘å¬å“ªäº›ç½‘å¡ï¼Œå¯ä»¥å†™ç½‘å¡åï¼Œä¹Ÿå¯ä»¥å†™è¯¥ç½‘å¡çš„IPåœ°å€ã€‚</p></li><li><p><code>hosts allow = 127. 192.168.1. 192.168.10.1</code><br>è¯´æ˜ï¼šè¡¨ç¤ºå…è®¸è¿æ¥åˆ°Samba Serverçš„å®¢æˆ·ç«¯ï¼Œå¤šä¸ªå‚æ•°ä»¥ç©ºæ ¼éš”å¼€ã€‚å¯ä»¥ç”¨ä¸€ä¸ªIPè¡¨ç¤ºï¼Œä¹Ÿå¯ä»¥ç”¨ä¸€ä¸ªç½‘æ®µè¡¨ç¤ºã€‚hosts deny ä¸hosts allow åˆšå¥½ç›¸åã€‚</p></li></ul><p>ä¾‹å¦‚ï¼š</p><pre class=" language-bash"><code class="language-bash"><span class="token comment" spellcheck="true"># è¡¨ç¤ºå®¹è®¸æ¥è‡ª172.17.2.*.*çš„ä¸»æœºè¿æ¥ï¼Œä½†æ’é™¤172.17.2.50</span>hosts allow<span class="token operator">=</span>172.17.2.EXCEPT172.17.2.50<span class="token comment" spellcheck="true"># è¡¨ç¤ºå®¹è®¸æ¥è‡ª172.17.2.0/255.255.0.0å­ç½‘ä¸­çš„æ‰€æœ‰ä¸»æœºè¿æ¥</span>hosts allow<span class="token operator">=</span>172.17.2.0/255.255.0.0<span class="token comment" spellcheck="true"># è¡¨ç¤ºå®¹è®¸æ¥è‡ªM1å’ŒM2ä¸¤å°è®¡ç®—æœºè¿æ¥</span>hosts allow<span class="token operator">=</span>M1ï¼ŒM2<span class="token comment" spellcheck="true"># è¡¨ç¤ºå®¹è®¸æ¥è‡ªSCåŸŸçš„æ‰€æœ‰è®¡ç®—æœºè¿æ¥</span>hosts allow<span class="token operator">=</span>@SC</code></pre><ul><li><p><code>max connections = 0</code><br>è¯´æ˜ï¼šmax connectionsç”¨æ¥æŒ‡å®šè¿æ¥Samba Serverçš„æœ€å¤§è¿æ¥æ•°ç›®ã€‚å¦‚æœè¶…å‡ºè¿æ¥æ•°ç›®ï¼Œåˆ™æ–°çš„è¿æ¥è¯·æ±‚å°†è¢«æ‹’ç»ã€‚0è¡¨ç¤ºä¸é™åˆ¶ã€‚</p></li><li><p><code>deadtime = 0</code><br>è¯´æ˜ï¼šdeadtimeç”¨æ¥è®¾ç½®æ–­æ‰ä¸€ä¸ªæ²¡æœ‰æ‰“å¼€ä»»ä½•æ–‡ä»¶çš„è¿æ¥çš„æ—¶é—´ã€‚å•ä½æ˜¯åˆ†é’Ÿï¼Œ0ä»£è¡¨Samba Serverä¸è‡ªåŠ¨åˆ‡æ–­ä»»ä½•è¿æ¥ã€‚</p></li><li><p><code>time server = yes/no</code><br>è¯´æ˜ï¼štime serverç”¨æ¥è®¾ç½®è®©nmdbæˆä¸ºwindowså®¢æˆ·ç«¯çš„æ—¶é—´æœåŠ¡å™¨ã€‚</p></li><li><p><code>log file = /var/log/samba/log.%m</code><br>è¯´æ˜ï¼šè®¾ç½®Samba Serveræ—¥å¿—æ–‡ä»¶çš„å­˜å‚¨ä½ç½®ä»¥åŠæ—¥å¿—æ–‡ä»¶åç§°ã€‚åœ¨æ–‡ä»¶åååŠ ä¸ªå®%mï¼ˆä¸»æœºåï¼‰ï¼Œè¡¨ç¤ºå¯¹æ¯å°è®¿é—®Samba Serverçš„æœºå™¨éƒ½å•ç‹¬è®°å½•ä¸€ä¸ªæ—¥å¿—æ–‡ä»¶ã€‚å¦‚æœpc1ã€pc2è®¿é—®è¿‡Samba Serverï¼Œå°±ä¼šåœ¨/var/log/sambaç›®å½•ä¸‹ç•™ä¸‹log.pc1å’Œlog.pc2ä¸¤ä¸ªæ—¥å¿—æ–‡ä»¶ã€‚</p></li><li><p><code>max log size = 50</code><br>è¯´æ˜ï¼šè®¾ç½®Samba Serveræ—¥å¿—æ–‡ä»¶çš„æœ€å¤§å®¹é‡ï¼Œå•ä½ä¸ºkBï¼Œ0ä»£è¡¨ä¸é™åˆ¶ã€‚</p></li><li><p><code>security = user</code><br>è¯´æ˜ï¼šè®¾ç½®ç”¨æˆ·è®¿é—®Samba Serverçš„éªŒè¯æ–¹å¼ï¼Œä¸€å…±æœ‰å››ç§éªŒè¯æ–¹å¼ã€‚</p></li></ul><ol><li><em>share</em>ï¼šç”¨æˆ·è®¿é—®Samba Serverä¸éœ€è¦æä¾›ç”¨æˆ·åå’Œå£ä»¤, å®‰å…¨æ€§èƒ½è¾ƒä½ã€‚</li><li><em>user</em>ï¼šSamba Serverå…±äº«ç›®å½•åªèƒ½è¢«æˆæƒçš„ç”¨æˆ·è®¿é—®,ç”±Samba Serverè´Ÿè´£æ£€æŸ¥è´¦å·å’Œå¯†ç çš„æ­£ç¡®æ€§ã€‚è´¦å·å’Œå¯†ç è¦åœ¨æœ¬Samba Serverä¸­å»ºç«‹ã€‚</li><li><em>server</em>ï¼šä¾é å…¶ä»–Windows NT/2000æˆ–Samba Serveræ¥éªŒè¯ç”¨æˆ·çš„è´¦å·å’Œå¯†ç ,æ˜¯ä¸€ç§ä»£ç†éªŒè¯ã€‚æ­¤ç§å®‰å…¨æ¨¡å¼ä¸‹,ç³»ç»Ÿç®¡ç†å‘˜å¯ä»¥æŠŠæ‰€æœ‰çš„Windowsç”¨æˆ·å’Œå£ä»¤é›†ä¸­åˆ°ä¸€ä¸ªNTç³»ç»Ÿä¸Š,ä½¿ç”¨Windows NTè¿›è¡ŒSambaè®¤è¯, è¿œç¨‹æœåŠ¡å™¨å¯ä»¥è‡ªåŠ¨è®¤è¯å…¨éƒ¨ç”¨æˆ·å’Œå£ä»¤,å¦‚æœè®¤è¯å¤±è´¥,Sambaå°†ä½¿ç”¨ç”¨æˆ·çº§å®‰å…¨æ¨¡å¼ä½œä¸ºæ›¿ä»£çš„æ–¹å¼ã€‚</li><li><em>domain</em>ï¼šåŸŸå®‰å…¨çº§åˆ«,ä½¿ç”¨ä¸»åŸŸæ§åˆ¶å™¨(PDC)æ¥å®Œæˆè®¤è¯ã€‚</li></ol><ul><li><code>passdb backend = tdbsam</code><br>è¯´æ˜ï¼špassdb backendå°±æ˜¯ç”¨æˆ·åå°çš„æ„æ€ã€‚ç›®å‰æœ‰ä¸‰ç§åå°ï¼šsmbpasswdã€tdbsamå’Œldapsamã€‚samåº”è¯¥æ˜¯security account managerï¼ˆå®‰å…¨è´¦æˆ·ç®¡ç†ï¼‰çš„ç®€å†™ã€‚</li></ul><ol><li><p><em>smbpasswd</em>ï¼šè¯¥æ–¹å¼æ˜¯ä½¿ç”¨smbè‡ªå·±çš„å·¥å…·smbpasswdæ¥ç»™ç³»ç»Ÿç”¨æˆ·ï¼ˆçœŸå®<br>ç”¨æˆ·æˆ–è€…è™šæ‹Ÿç”¨æˆ·ï¼‰è®¾ç½®ä¸€ä¸ªSambaå¯†ç ï¼Œå®¢æˆ·ç«¯å°±ç”¨è¿™ä¸ªå¯†ç æ¥è®¿é—®Sambaçš„èµ„æºã€‚smbpasswdæ–‡ä»¶é»˜è®¤åœ¨/etc/sambaç›®å½•ä¸‹ï¼Œä¸è¿‡æœ‰æ—¶å€™è¦æ‰‹å·¥å»ºç«‹è¯¥æ–‡ä»¶ã€‚</p></li><li><p><em>tdbsam</em>ï¼šè¯¥æ–¹å¼åˆ™æ˜¯ä½¿ç”¨ä¸€ä¸ªæ•°æ®åº“æ–‡ä»¶æ¥å»ºç«‹ç”¨æˆ·æ•°æ®åº“ã€‚æ•°æ®åº“æ–‡ä»¶å«passdb.tdbï¼Œé»˜è®¤åœ¨/etc/sambaç›®å½•ä¸‹ã€‚passdb.tdbç”¨æˆ·æ•°æ®åº“å¯ä»¥ä½¿ç”¨smbpasswd â€“aæ¥å»ºç«‹Sambaç”¨æˆ·ï¼Œä¸è¿‡è¦å»ºç«‹çš„Sambaç”¨æˆ·å¿…é¡»å…ˆæ˜¯ç³»ç»Ÿç”¨æˆ·ã€‚æˆ‘ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨pdbeditå‘½ä»¤æ¥å»ºç«‹Sambaè´¦æˆ·ã€‚pdbeditå‘½ä»¤çš„å‚æ•°å¾ˆå¤šï¼Œæˆ‘ä»¬åˆ—å‡ºå‡ ä¸ªä¸»è¦çš„ã€‚</p></li></ol><blockquote><p>pdbedit â€“a usernameï¼šæ–°å»ºSambaè´¦æˆ·ã€‚<br>pdbedit â€“x usernameï¼šåˆ é™¤Sambaè´¦æˆ·ã€‚<br>pdbedit â€“Lï¼šåˆ—å‡ºSambaç”¨æˆ·åˆ—è¡¨ï¼Œè¯»å–passdb.tdbæ•°æ®åº“æ–‡ä»¶ã€‚<br>pdbedit â€“Lvï¼šåˆ—å‡ºSambaç”¨æˆ·åˆ—è¡¨çš„è¯¦ç»†ä¿¡æ¯ã€‚<br>pdbedit â€“c â€œ[D]â€ â€“u usernameï¼šæš‚åœè¯¥Sambaç”¨æˆ·çš„è´¦å·ã€‚<br>pdbedit â€“c â€œ[]â€ â€“u usernameï¼šæ¢å¤è¯¥Sambaç”¨æˆ·çš„è´¦å·ã€‚</p></blockquote><ol start="3"><li><em>ldapsam</em>ï¼šè¯¥æ–¹å¼åˆ™æ˜¯åŸºäºLDAPçš„è´¦æˆ·ç®¡ç†æ–¹å¼æ¥éªŒè¯ç”¨æˆ·ã€‚é¦–å…ˆè¦å»ºç«‹LDAPæœåŠ¡ï¼Œç„¶åè®¾ç½®â€œpassdb backend = ldapsam:ldap://LDAP Serverâ€</li></ol><ul><li><p><code>encrypt passwords = yes/no</code><br>è¯´æ˜ï¼šæ˜¯å¦å°†è®¤è¯å¯†ç åŠ å¯†ã€‚å› ä¸ºç°åœ¨windowsæ“ä½œç³»ç»Ÿéƒ½æ˜¯ä½¿ç”¨åŠ å¯†å¯†ç ï¼Œæ‰€ä»¥ä¸€èˆ¬è¦å¼€å¯æ­¤é¡¹ã€‚ä¸è¿‡é…ç½®æ–‡ä»¶é»˜è®¤å·²å¼€å¯ã€‚</p></li><li><p><code>smb passwd file = /etc/samba/smbpasswd</code><br>è¯´æ˜ï¼šç”¨æ¥å®šä¹‰sambaç”¨æˆ·çš„å¯†ç æ–‡ä»¶ã€‚smbpasswdæ–‡ä»¶å¦‚æœæ²¡æœ‰é‚£å°±è¦æ‰‹å·¥æ–°å»ºã€‚</p></li><li><p><code>username map = /etc/samba/smbusers</code><br>è¯´æ˜ï¼šç”¨æ¥å®šä¹‰ç”¨æˆ·åæ˜ å°„ï¼Œæ¯”å¦‚å¯ä»¥å°†rootæ¢æˆadministratorã€adminç­‰ã€‚ä¸è¿‡è¦äº‹å…ˆåœ¨smbusersæ–‡ä»¶ä¸­å®šä¹‰å¥½ã€‚æ¯”å¦‚ï¼šroot = administrator adminï¼Œè¿™æ ·å°±å¯ä»¥ç”¨administratoræˆ–adminè¿™ä¸¤ä¸ªç”¨æˆ·æ¥ä»£æ›¿rootç™»é™†Samba Serverï¼Œæ›´è´´è¿‘windowsç”¨æˆ·çš„ä¹ æƒ¯ã€‚</p></li><li><p><code>guest account = nobody</code><br>è¯´æ˜ï¼šç”¨æ¥è®¾ç½®guestç”¨æˆ·åã€‚</p></li><li><p><code>socket options = TCP_NODELAY SO_RCVBUF=8192 SO_SNDBUF=8192</code><br>è¯´æ˜ï¼šç”¨æ¥è®¾ç½®æœåŠ¡å™¨å’Œå®¢æˆ·ç«¯ä¹‹é—´ä¼šè¯çš„Socketé€‰é¡¹ï¼Œå¯ä»¥ä¼˜åŒ–ä¼ è¾“é€Ÿåº¦ã€‚</p></li><li><p><code>domain master = yes/no</code><br>è¯´æ˜ï¼šè®¾ç½®SambaæœåŠ¡å™¨æ˜¯å¦è¦æˆä¸ºç½‘åŸŸä¸»æµè§ˆå™¨ï¼Œç½‘åŸŸä¸»æµè§ˆå™¨å¯ä»¥ç®¡ç†è·¨å­ç½‘åŸŸçš„æµè§ˆæœåŠ¡ã€‚</p></li><li><p><code>local master = yes/no</code><br>è¯´æ˜ï¼šlocal masterç”¨æ¥æŒ‡å®šSamba Serveræ˜¯å¦è¯•å›¾æˆä¸ºæœ¬åœ°ç½‘åŸŸä¸»æµè§ˆå™¨ã€‚å¦‚æœè®¾ä¸ºnoï¼Œåˆ™æ°¸è¿œä¸ä¼šæˆä¸ºæœ¬åœ°ç½‘åŸŸä¸»æµè§ˆå™¨ã€‚ä½†æ˜¯å³ä½¿è®¾ç½®ä¸ºyesï¼Œä¹Ÿä¸ç­‰äºè¯¥Samba Serverå°±èƒ½æˆä¸ºä¸»æµè§ˆå™¨ï¼Œè¿˜éœ€è¦å‚åŠ é€‰ä¸¾ã€‚</p></li><li><p><code>preferred master = yes/no</code><br>è¯´æ˜ï¼šè®¾ç½®Samba Serverä¸€å¼€æœºå°±å¼ºè¿«è¿›è¡Œä¸»æµè§ˆå™¨é€‰ä¸¾ï¼Œå¯ä»¥æé«˜Samba Serveræˆä¸ºæœ¬åœ°ç½‘åŸŸä¸»æµè§ˆå™¨çš„æœºä¼šã€‚å¦‚æœè¯¥å‚æ•°æŒ‡å®šä¸ºyesæ—¶ï¼Œæœ€å¥½æŠŠdomain masterä¹ŸæŒ‡å®šä¸ºyesã€‚ä½¿ç”¨è¯¥å‚æ•°æ—¶è¦æ³¨æ„ï¼šå¦‚æœåœ¨æœ¬Samba Serveræ‰€åœ¨çš„å­ç½‘æœ‰å…¶ä»–çš„æœºå™¨ï¼ˆä¸è®ºæ˜¯windows NTè¿˜æ˜¯å…¶ä»–Samba Serverï¼‰ä¹ŸæŒ‡å®šä¸ºé¦–è¦ä¸»æµè§ˆå™¨æ—¶ï¼Œé‚£ä¹ˆè¿™äº›æœºå™¨å°†ä¼šå› ä¸ºäº‰å¤ºä¸»æµè§ˆå™¨è€Œåœ¨ç½‘ç»œä¸Šå¤§å‘å¹¿æ’­ï¼Œå½±å“ç½‘ç»œæ€§èƒ½ã€‚å¦‚æœåŒä¸€ä¸ªåŒºåŸŸå†…æœ‰å¤šå°Samba Serverï¼Œå°†ä¸Šé¢ä¸‰ä¸ªå‚æ•°è®¾å®šåœ¨ä¸€å°å³å¯ã€‚</p></li><li><p><code>os level = 200</code><br>è¯´æ˜ï¼šè®¾ç½®sambaæœåŠ¡å™¨çš„os levelã€‚è¯¥å‚æ•°å†³å®šSamba Serveræ˜¯å¦æœ‰æœºä¼šæˆä¸ºæœ¬åœ°ç½‘åŸŸçš„ä¸»æµè§ˆå™¨ã€‚os levelä»0åˆ°255ï¼ŒwinNTçš„os levelæ˜¯32ï¼Œwin95/98çš„os levelæ˜¯1ã€‚Windows 2000çš„os levelæ˜¯64ã€‚å¦‚æœè®¾ç½®ä¸º0ï¼Œåˆ™æ„å‘³ç€Samba Serverå°†å¤±å»æµè§ˆé€‰æ‹©ã€‚å¦‚æœæƒ³è®©Samba Serveræˆä¸ºPDCï¼Œé‚£ä¹ˆå°†å®ƒçš„os levelå€¼è®¾å¤§äº›ã€‚</p></li><li><p><code>domain logons = yes/no</code><br>è¯´æ˜ï¼šè®¾ç½®Samba Serveræ˜¯å¦è¦åšä¸ºæœ¬åœ°åŸŸæ§åˆ¶å™¨ã€‚ä¸»åŸŸæ§åˆ¶å™¨å’Œå¤‡ä»½åŸŸæ§åˆ¶å™¨éƒ½éœ€è¦å¼€å¯æ­¤é¡¹ã€‚</p></li><li><p><code>logon . = %u.bat</code><br>è¯´æ˜ï¼šå½“ä½¿ç”¨è€…ç”¨windowså®¢æˆ·ç«¯ç™»é™†ï¼Œé‚£ä¹ˆSambaå°†æä¾›ä¸€ä¸ªç™»é™†æ¡£ã€‚å¦‚æœè®¾ç½®æˆ%u.batï¼Œé‚£ä¹ˆå°±è¦ä¸ºæ¯ä¸ªç”¨æˆ·æä¾›ä¸€ä¸ªç™»é™†æ¡£ã€‚å¦‚æœäººæ¯”è¾ƒå¤šï¼Œé‚£å°±æ¯”è¾ƒéº»çƒ¦ã€‚å¯ä»¥è®¾ç½®æˆä¸€ä¸ªå…·ä½“çš„æ–‡ä»¶åï¼Œæ¯”å¦‚start.batï¼Œé‚£ä¹ˆç”¨æˆ·ç™»é™†åéƒ½ä¼šå»æ‰§è¡Œstart.batï¼Œè€Œä¸ç”¨ä¸ºæ¯ä¸ªç”¨æˆ·è®¾å®šä¸€ä¸ªç™»é™†æ¡£äº†ã€‚è¿™ä¸ªæ–‡ä»¶è¦æ”¾ç½®åœ¨[netlogon]çš„pathè®¾ç½®çš„ç›®å½•è·¯å¾„ä¸‹ã€‚</p></li><li><p><code>wins support = yes/no</code><br>è¯´æ˜ï¼šè®¾ç½®sambaæœåŠ¡å™¨æ˜¯å¦æä¾›winsæœåŠ¡ã€‚</p></li><li><p><code>wins server = winsæœåŠ¡å™¨IPåœ°å€</code><br>è¯´æ˜ï¼šè®¾ç½®Samba Serveræ˜¯å¦ä½¿ç”¨åˆ«çš„winsæœåŠ¡å™¨æä¾›winsæœåŠ¡ã€‚</p></li><li><p><code>wins proxy = yes/no</code><br>è¯´æ˜ï¼šè®¾ç½®Samba Serveræ˜¯å¦å¼€å¯winsä»£ç†æœåŠ¡ã€‚</p></li><li><p><code>dns proxy = yes/no</code><br>è¯´æ˜ï¼šè®¾ç½®Samba Serveræ˜¯å¦å¼€å¯dnsä»£ç†æœåŠ¡ã€‚</p></li><li><p><code>load printers = yes/no</code><br>è¯´æ˜ï¼šè®¾ç½®æ˜¯å¦åœ¨å¯åŠ¨Sambaæ—¶å°±å…±äº«æ‰“å°æœºã€‚</p></li><li><p><code>printcap name = cups</code><br>è¯´æ˜ï¼šè®¾ç½®å…±äº«æ‰“å°æœºçš„é…ç½®æ–‡ä»¶ã€‚</p></li><li><p><code>printing = cups</code><br>è¯´æ˜ï¼šè®¾ç½®Sambaå…±äº«æ‰“å°æœºçš„ç±»å‹ã€‚ç°åœ¨æ”¯æŒçš„æ‰“å°ç³»ç»Ÿæœ‰ï¼šbsd, sysv, plp, lprng, aix, hpux, qnx</p></li><li><p><strong>å…±äº«å‚æ•° [å…±äº«å]ï¼š</strong></p></li><li><p><code>comment = ä»»æ„å­—ç¬¦ä¸²</code><br>è¯´æ˜ï¼šcommentæ˜¯å¯¹è¯¥å…±äº«çš„æè¿°ï¼Œå¯ä»¥æ˜¯ä»»æ„å­—ç¬¦ä¸²ã€‚</p></li><li><p><code>path = å…±äº«ç›®å½•è·¯å¾„</code><br>è¯´æ˜ï¼špathç”¨æ¥æŒ‡å®šå…±äº«ç›®å½•çš„è·¯å¾„ã€‚å¯ä»¥ç”¨%uã€%mè¿™æ ·çš„å®æ¥ä»£æ›¿è·¯å¾„é‡Œçš„unixç”¨æˆ·å’Œå®¢æˆ·æœºçš„Netbiosåï¼Œç”¨å®è¡¨ç¤ºä¸»è¦ç”¨äº[homes]å…±äº«åŸŸã€‚ä¾‹å¦‚ï¼šå¦‚æœæˆ‘ä»¬ä¸æ‰“ç®—ç”¨homeæ®µåšä¸ºå®¢æˆ·çš„å…±äº«ï¼Œè€Œæ˜¯åœ¨/home/share/ä¸‹ä¸ºæ¯ä¸ªLinuxç”¨æˆ·ä»¥ä»–çš„ç”¨æˆ·åå»ºä¸ªç›®å½•ï¼Œä½œä¸ºä»–çš„å…±äº«ç›®å½•ï¼Œè¿™æ ·pathå°±å¯ä»¥å†™æˆï¼špath = /home/share/%u; ã€‚ç”¨æˆ·åœ¨è¿æ¥åˆ°è¿™å…±äº«æ—¶å…·ä½“çš„è·¯å¾„ä¼šè¢«ä»–çš„ç”¨æˆ·åä»£æ›¿ï¼Œè¦æ³¨æ„è¿™ä¸ªç”¨æˆ·åè·¯å¾„ä¸€å®šè¦å­˜åœ¨ï¼Œå¦åˆ™ï¼Œå®¢æˆ·æœºåœ¨è®¿é—®æ—¶ä¼šæ‰¾ä¸åˆ°ç½‘ç»œè·¯å¾„ã€‚åŒæ ·ï¼Œå¦‚æœæˆ‘ä»¬ä¸æ˜¯ä»¥ç”¨æˆ·æ¥åˆ’åˆ†ç›®å½•ï¼Œè€Œæ˜¯ä»¥å®¢æˆ·æœºæ¥åˆ’åˆ†ç›®å½•ï¼Œä¸ºç½‘ç»œä¸Šæ¯å°å¯ä»¥è®¿é—®sambaçš„æœºå™¨éƒ½å„è‡ªå»ºä¸ªä»¥å®ƒçš„netbiosåçš„è·¯å¾„ï¼Œä½œä¸ºä¸åŒæœºå™¨çš„å…±äº«èµ„æºï¼Œå°±å¯ä»¥è¿™æ ·å†™ï¼š<code>path = /home/share/%m</code>ã€‚</p></li><li><p><code>browseable = yes/no</code><br>è¯´æ˜ï¼šbrowseableç”¨æ¥æŒ‡å®šè¯¥å…±äº«æ˜¯å¦å¯ä»¥æµè§ˆã€‚</p></li><li><p><code>writable = yes/no</code><br>è¯´æ˜ï¼šwritableç”¨æ¥æŒ‡å®šè¯¥å…±äº«è·¯å¾„æ˜¯å¦å¯å†™ã€‚</p></li><li><p><code>available = yes/no</code><br>è¯´æ˜ï¼šavailableç”¨æ¥æŒ‡å®šè¯¥å…±äº«èµ„æºæ˜¯å¦å¯ç”¨ã€‚</p></li><li><p><code>admin users = è¯¥å…±äº«çš„ç®¡ç†è€…</code><br>è¯´æ˜ï¼šadmin usersç”¨æ¥æŒ‡å®šè¯¥å…±äº«çš„ç®¡ç†å‘˜ï¼ˆå¯¹è¯¥å…±äº«å…·æœ‰å®Œå…¨æ§åˆ¶æƒé™ï¼‰ã€‚åœ¨samba 3.0ä¸­ï¼Œå¦‚æœç”¨æˆ·éªŒè¯æ–¹å¼è®¾ç½®æˆâ€œsecurity=shareâ€æ—¶ï¼Œæ­¤é¡¹æ— æ•ˆã€‚<br>ä¾‹å¦‚ï¼šadmin users =bobyuanï¼Œjaneï¼ˆå¤šä¸ªç”¨æˆ·ä¸­é—´ç”¨é€—å·éš”å¼€ï¼‰ã€‚</p></li><li><p><code>valid users = å…è®¸è®¿é—®è¯¥å…±äº«çš„ç”¨æˆ·</code><br>è¯´æ˜ï¼švalid usersç”¨æ¥æŒ‡å®šå…è®¸è®¿é—®è¯¥å…±äº«èµ„æºçš„ç”¨æˆ·ã€‚<br>ä¾‹å¦‚ï¼švalid users = bobyuanï¼Œ@bobï¼Œ@techï¼ˆå¤šä¸ªç”¨æˆ·æˆ–è€…ç»„ä¸­é—´ç”¨é€—å·éš”å¼€ï¼Œå¦‚æœè¦åŠ å…¥ä¸€ä¸ªç»„å°±ç”¨â€œ@+ç»„åâ€è¡¨ç¤ºã€‚ï¼‰</p></li><li><p><code>invalid users = ç¦æ­¢è®¿é—®è¯¥å…±äº«çš„ç”¨æˆ·</code><br>è¯´æ˜ï¼šinvalid usersç”¨æ¥æŒ‡å®šä¸å…è®¸è®¿é—®è¯¥å…±äº«èµ„æºçš„ç”¨æˆ·ã€‚<br>ä¾‹å¦‚ï¼šinvalid users = rootï¼Œ@bobï¼ˆå¤šä¸ªç”¨æˆ·æˆ–è€…ç»„ä¸­é—´ç”¨é€—å·éš”å¼€ã€‚ï¼‰</p></li><li><p><code>write list = å…è®¸å†™å…¥è¯¥å…±äº«çš„ç”¨æˆ·</code><br>è¯´æ˜ï¼šwrite listç”¨æ¥æŒ‡å®šå¯ä»¥åœ¨è¯¥å…±äº«ä¸‹å†™å…¥æ–‡ä»¶çš„ç”¨æˆ·ã€‚<br>ä¾‹å¦‚ï¼šwrite list = bobyuanï¼Œ@bob</p></li><li><p><code>public = yes/no</code><br>è¯´æ˜ï¼špublicç”¨æ¥æŒ‡å®šè¯¥å…±äº«æ˜¯å¦å…è®¸guestè´¦æˆ·è®¿é—®ã€‚</p></li><li><p><code>guest ok = yes/no</code><br>è¯´æ˜ï¼šæ„ä¹‰åŒâ€œpublicâ€ã€‚</p></li></ul><h4 id="2-3-é…ç½®SambaæœåŠ¡"><a href="#2-3-é…ç½®SambaæœåŠ¡" class="headerlink" title="2.3 é…ç½®SambaæœåŠ¡"></a>2.3 é…ç½®SambaæœåŠ¡</h4><ol><li>æœåŠ¡è§„åˆ’</li></ol><ul><li>ç³»ç»Ÿåˆ†åŒºæ—¶ï¼Œå¯ä»¥å•ç‹¬åˆ’åˆ†ä¸€ä¸ª<code>/storage</code>çš„åˆ†åŒºï¼Œåˆ†åŒºä¸‹æœ‰loggerå’Œsharedä¸¤ä¸ªæ–‡ä»¶å¤¹;</li><li>loggeræ–‡ä»¶å¤¹<code>/storage/logger</code>ä¸‹å¯¹åº”çš„ç®¡ç†å‘˜è´¦å·ä¸º<code>logadmin</code>ï¼Œç”¨æˆ·è´¦å·ä¸º<code>loguser</code>;</li><li>sharedæ–‡ä»¶å¤¹<code>/storage/shared</code>ä¸‹å¯¹åº”çš„ç®¡ç†å‘˜è´¦å·ä¸º<code>admin</code>ï¼Œç”¨æˆ·è´¦æˆ·å·ä¸º<code>shared</code>;<blockquote><p>æ³¨ï¼šä»¥ä¸Šæ‰€è¿°åˆ†åŒºæˆ–æ–‡ä»¶å¤¹å¯ä»¥æ ¹æ®è‡ªå·±éœ€æ±‚æ¥å®š,ä¸åˆ’åˆ†åˆ†åŒºä¹Ÿå¯ä»¥ï¼ŒæŒ‡å®šå…±äº«æ–‡ä»¶å¤¹å°±å¯ä»¥äº†ã€‚</p></blockquote></li></ul><ol start="2"><li>åˆ›å»ºæ–‡ä»¶å¤¹å’Œç”¨æˆ·</li></ol><ul><li>åˆ›å»ºæ–‡ä»¶å¤¹<pre class=" language-bash"><code class="language-bash"><span class="token comment" spellcheck="true"># åˆ›å»ºæ–‡ä»¶å¤¹</span><span class="token punctuation">[</span>root@samba storage<span class="token punctuation">]</span><span class="token comment" spellcheck="true"># cd /storage</span><span class="token punctuation">[</span>root@samba storage<span class="token punctuation">]</span><span class="token comment" spellcheck="true"># mkdir logger  shared</span><span class="token punctuation">[</span>root@samba storage<span class="token punctuation">]</span><span class="token comment" spellcheck="true"># ls</span>total 0drwxr-xr-x. 2 root root 6 Aug  3 10:12 loggerdrwxr-xr-x. 2 root root 6 Aug  3 10:12 shared</code></pre></li><li>åˆ›å»ºç”¨æˆ·</li></ul><pre class=" language-bash"><code class="language-bash"><span class="token punctuation">[</span>root@samba storage<span class="token punctuation">]</span><span class="token comment" spellcheck="true"># useradd -s /sbin/nologin logadmin</span><span class="token punctuation">[</span>root@samba storage<span class="token punctuation">]</span><span class="token comment" spellcheck="true"># useradd -s /sbin/nologin admin</span><span class="token punctuation">[</span>root@samba storage<span class="token punctuation">]</span><span class="token comment" spellcheck="true"># useradd -g admin -s /sbin/nologin shared</span><span class="token punctuation">[</span>root@samba storage<span class="token punctuation">]</span><span class="token comment" spellcheck="true"># cat /etc/passwd</span>root:x:0:0:root:/root:/bin/bashbin:x:1:1:bin:/bin:/sbin/nologindaemon:x:2:2:daemon:/sbin:/sbin/nologinadm:x:3:4:adm:/var/adm:/sbin/nologinlp:x:4:7:lp:/var/spool/lpd:/sbin/nologinsync:x:5:0:sync:/sbin:/bin/syncshutdown:x:6:0:shutdown:/sbin:/sbin/shutdownhalt:x:7:0:halt:/sbin:/sbin/haltnobody:x:99:99:Nobody:/:/sbin/nologinsystemd-bus-proxy:x:999:998:systemd Bus Proxy:/:/sbin/nologinsystemd-network:x:192:192:systemd Network Management:/:/sbin/nologindbus:x:81:81:System message bus:/:/sbin/nologinpolkitd:x:998:997:User <span class="token keyword">for</span> polkitd:/:/sbin/nologintss:x:59:59:Account used by the trousers package to sandbox the tcsd daemon:/dev/null:/sbin/nologinsshd:x:74:74:Privilege-separated SSH:/var/empty/sshd:/sbin/nologinpostfix:x:89:89::/var/spool/postfix:/sbin/nologintcpdump:x:72:72::/:/sbin/nologinlogadmin:x:1000:1000::/home/logadmin:/sbin/nologinloguser:x:1001:1000::/home/loguser:/sbin/nologinadmin:x:1002:1002::/home/admin:/sbin/nologinshared:x:1003:1002::/home/shared:/sbin/nologin<span class="token punctuation">[</span>root@samba storage<span class="token punctuation">]</span><span class="token comment" spellcheck="true"># </span></code></pre><ul><li>å»ºç«‹sambaç”¨æˆ·</li></ul><pre class=" language-bash"><code class="language-bash"><span class="token punctuation">[</span>root@samba storage<span class="token punctuation">]</span><span class="token comment" spellcheck="true"># smbpasswd -a logadmin</span>New SMB password:Retype new SMB password:Added user logadmin.<span class="token punctuation">[</span>root@samba storage<span class="token punctuation">]</span><span class="token comment" spellcheck="true"># smbpasswd -a loguser</span>New SMB password:Retype new SMB password:Added user loguser.<span class="token punctuation">[</span>root@samba storage<span class="token punctuation">]</span><span class="token comment" spellcheck="true"># smbpasswd -a admin</span>New SMB password:Retype new SMB password:Added user admin.<span class="token punctuation">[</span>root@samba storage<span class="token punctuation">]</span><span class="token comment" spellcheck="true"># smbpasswd -a shared</span>New SMB password:Retype new SMB password:Added user shared.</code></pre><ul><li>æ›´æ”¹ç›®å½•å±æ€§<pre class=" language-bash"><code class="language-bash"><span class="token punctuation">[</span>root@samba storage<span class="token punctuation">]</span><span class="token comment" spellcheck="true"># chown logadmin.logadmin logger</span><span class="token punctuation">[</span>root@samba storage<span class="token punctuation">]</span><span class="token comment" spellcheck="true"># chown admin.admin shared</span><span class="token punctuation">[</span>root@samba storage<span class="token punctuation">]</span><span class="token comment" spellcheck="true"># chmod -R 777 logger</span><span class="token punctuation">[</span>root@samba storage<span class="token punctuation">]</span><span class="token comment" spellcheck="true"># chmod -R 777 shared</span><span class="token punctuation">[</span>root@samba storage<span class="token punctuation">]</span><span class="token comment" spellcheck="true"># </span></code></pre></li></ul><ol start="3"><li>é…ç½®SambaæœåŠ¡<pre class=" language-bash"><code class="language-bash"><span class="token punctuation">[</span>root@samba storage<span class="token punctuation">]</span><span class="token comment" spellcheck="true"># vi /etc/samba/smb.conf</span><span class="token punctuation">[</span>global<span class="token punctuation">]</span> workgroup <span class="token operator">=</span> SC.LOCAL server string <span class="token operator">=</span> Samba Server Version %v netbios name <span class="token operator">=</span> samba log <span class="token function">file</span> <span class="token operator">=</span> /var/log/samba/%m.log max log size <span class="token operator">=</span> 10240 security <span class="token operator">=</span> user passdb backend <span class="token operator">=</span> tdbsam<span class="token punctuation">[</span>logger<span class="token punctuation">]</span> comment <span class="token operator">=</span> Logs Directories path <span class="token operator">=</span> /storage/logger/ public <span class="token operator">=</span> no admin <span class="token function">users</span> <span class="token operator">=</span> logadmin valid <span class="token function">users</span> <span class="token operator">=</span> @logadmin browseable <span class="token operator">=</span> <span class="token function">yes</span> writable <span class="token operator">=</span> <span class="token function">yes</span> create mask <span class="token operator">=</span> 0777 directory mask <span class="token operator">=</span> 0777 force directory mode <span class="token operator">=</span> 0777 force create mode <span class="token operator">=</span> 0777<span class="token punctuation">[</span>shared<span class="token punctuation">]</span> <span class="token comment" spellcheck="true"># å…±äº«æ–‡ä»¶ç›®å½•æè¿°</span> comment <span class="token operator">=</span> Shared Directories <span class="token comment" spellcheck="true"># å…±äº«æ–‡ä»¶ç›®å½•</span> path <span class="token operator">=</span> /storage/shared/ <span class="token comment" spellcheck="true"># æ˜¯å¦å…è®¸guestè®¿é—®</span> public <span class="token operator">=</span> no <span class="token comment" spellcheck="true"># æŒ‡å®šç®¡ç†ç”¨æˆ·</span> admin <span class="token function">users</span> <span class="token operator">=</span> admin <span class="token comment" spellcheck="true"># å¯è®¿é—®çš„ç”¨æˆ·ç»„ã€ç”¨æˆ·</span> valid <span class="token function">users</span> <span class="token operator">=</span> @admin <span class="token comment" spellcheck="true"># æ˜¯å¦æµè§ˆæƒé™</span> browseable <span class="token operator">=</span> <span class="token function">yes</span> <span class="token comment" spellcheck="true"># æ˜¯å¦å¯å†™æƒé™</span> writable <span class="token operator">=</span> <span class="token function">yes</span> <span class="token comment" spellcheck="true"># æ–‡ä»¶æƒé™è®¾ç½®</span> create mask <span class="token operator">=</span> 0777 directory mask <span class="token operator">=</span> 0777 force directory mode <span class="token operator">=</span> 0777 force create mode <span class="token operator">=</span> 0777</code></pre></li></ol><p>ä¿®æ”¹å®ŒSambaé…ç½®æ–‡ä»¶åï¼Œéœ€è¦é‡å¯SambaæœåŠ¡é…ç½®æ‰èƒ½ç”Ÿæ•ˆã€‚</p><ol start="4"><li>æµ‹è¯•SambaæœåŠ¡</li></ol><ul><li>è®¿é—®SambaæœåŠ¡</li></ul><p>ä½¿ç”¨Windowså®¢æˆ·æœºé€šè¿‡UNCè·¯å¾„è®¿é—®SambaæœåŠ¡ï¼Œ å¦‚ï¼š<code>\\192.168.6.186</code>, æ­¤æ—¶ä¼šæç¤ºè¾“å…¥ç”¨æˆ·åå’Œå¯†ç ï¼ˆåœ¨ç¬¬2æ­¥ä¸­åˆ›å»ºçš„ç”¨æˆ·å’Œå¯†ç ï¼Œå¦‚<code>logadmin</code>ç­‰ï¼‰ã€‚<br><img src="/2019/11/12/samba/1.webp" alt=""><br><img src="/2019/11/12/samba/2.webp" alt=""><br><img src="/2019/11/12/samba/3.webp" alt=""></p><ul><li>æµ‹è¯•åˆ›å»ºæ–‡ä»¶</li></ul><p>æ‹·è´å®¢æˆ·æœºæ–‡ä»¶åˆ°Sambaå…±äº«æ–‡ä»¶å¤¹ä¸‹ï¼Œ æµ‹è¯•æ–‡ä»¶æ‹·è´æ˜¯å¦æˆåŠŸã€‚<br>å°†æ–‡ä»¶<code>book.txt</code>æ‹·è´åˆ°Sambaå…±äº«æ–‡ä»¶å¤¹<code>logger</code>ä¸‹ï¼Œ æŸ¥çœ‹æ–‡ä»¶æ˜¯å¦æˆåŠŸæ‹·è´ã€‚<br><img src="/2019/11/12/samba/4.webp" alt=""></p><h3 id="3-é”™è¯¯å¤„ç†"><a href="#3-é”™è¯¯å¤„ç†" class="headerlink" title="3. é”™è¯¯å¤„ç†"></a>3. é”™è¯¯å¤„ç†</h3><ol><li>å¦‚æœæ‹·è´æ–‡ä»¶æ—¶å‡ºç°<code>ç›®æ ‡æ–‡ä»¶å¤¹è®¿é—®è¢«æ‹’ç»</code>é”™è¯¯ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚æ­¤æ—¶éœ€è¦æ£€æŸ¥ä¸€ä¸‹SambaæœåŠ¡å™¨çš„Selinuxå’Œé˜²ç«å¢™é…ç½®ï¼Œç¡®è®¤ä¸€ä¸‹Selinuxæ˜¯å¦å…³é—­ï¼ŒåŒæ—¶ç¡®è®¤ä¸€ä¸‹é˜²ç«å¢™æ˜¯å¦å·²ç»æ‰“å¼€äº†SambaæœåŠ¡ç«¯å£ï¼ˆä¸SambaæœåŠ¡ç›¸å…³çš„ç«¯å£æœ‰<code>137ã€138ã€139</code>å’Œ<code>445</code>ï¼‰ã€‚ æœ€åç¡®è®¤ä¸€ä¸‹Sambaæä¾›çš„å…±äº«æ–‡ä»¶å¤¹æ˜¯å¦å…·æœ‰è¯»å†™æƒé™ï¼Œå…·ä½“å¯ä»¥å‚è€ƒç¬¬2æ­¥å’Œç¬¬3æ­¥é…ç½®ï¼ˆç›®å½•å±æ€§å’ŒSambaæœåŠ¡é…ç½®ï¼‰ã€‚<br><img src="/2019/11/12/samba/5.webp" alt=""></li><li>å½“æˆ‘ä»¬è¦è¿›å…¥ä¸åŒçš„sambaç›®å½•ï¼Œå¦‚ï¼šè¿›å…¥<code>shared</code>å…±äº«æ–‡ä»¶å¤¹ï¼Œä½†æ˜¯è¿™äº›ç›®å½•éƒ½æœ‰è‡ªå·±çš„å¯†ç è®¾ç½®æ—¶ï¼Œå¦‚æœæˆ‘ä»¬åœ¨ç‚¹å‡»è¿™ä¸ªç›®å½•æ—¶è¾“å…¥è®¿é—®è¯¥ç›®å½•çš„ç”¨æˆ·åå’Œå¯†ç æ—¶ï¼Œä¼šæç¤ºâ€œ<strong>ä¸å…è®¸ä¸€ä¸ªç”¨æˆ·ä½¿ç”¨ä¸€ä¸ªä»¥ä¸Šç”¨æˆ·åä¸æœåŠ¡å™¨æˆ–å…±äº«èµ„æºçš„å¤šé‡è¿æ¥ã€‚ä¸­æ–­ä¸æ­¤æœåŠ¡å™¨æˆ–å…±äº«èµ„æºçš„æ‰€æœ‰è¿æ¥ï¼Œç„¶åå†è¯•ä¸€æ¬¡ã€‚</strong>â€å‡ºç°æ­¤é—®é¢˜æ˜¯windowsè‡ªèº«çš„é™åˆ¶ï¼Œé€šå¸¸æˆ‘ä»¬ä¼šæ³¨é”€å½“å‰windowsç”¨æˆ·ï¼Œç„¶åå†é‡æ–°ç™»é™†sambaæ¥è®¿é—®å…¶ä»–ç›®å½•ã€‚<br><img src="/2019/11/12/samba/6.webp" alt=""><br>æ­¤æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥æ‰“å¼€å‘½ä»¤è¡Œç•Œé¢ï¼Œè¾“å…¥<code>net use * /del /y</code>å‘½ä»¤æ¥åˆ‡æ‰æœ¬æœºå½“å‰çš„æ‰€æœ‰è¿œç¨‹å…±äº«æ–‡ä»¶ä¿¡æ¯ï¼Œç„¶åç‚¹å‡»å…¶ä»–ç›®å½•è¾“å…¥è¯¥ç›®å½•å…·æœ‰è®¿é—®æƒé™çš„ç”¨æˆ·åå’Œå¯†ç å³å¯æ­£å¸¸è®¿é—®äº†ã€‚<br><img src="/2019/11/12/samba/7.webp" alt=""><br><img src="/2019/11/12/samba/8.webp" alt=""></li></ol><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> Linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> samba </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>nginxæ—¥å¿—ç®€æ</title>
      <link href="/2019/11/11/ng/"/>
      <url>/2019/11/11/ng/</url>
      
        <content type="html"><![CDATA[<h3 id="1ã€æ—¥å¿—ç®€ä»‹"><a href="#1ã€æ—¥å¿—ç®€ä»‹" class="headerlink" title="1ã€æ—¥å¿—ç®€ä»‹"></a>1ã€æ—¥å¿—ç®€ä»‹</h3><p>&nbsp;&nbsp;&nbsp;&nbsp;nginxæ—¥å¿—ä¸»è¦æœ‰ä¸¤ç§ï¼š<strong>è®¿é—®æ—¥å¿—</strong>å’Œ<strong>é”™è¯¯æ—¥å¿—</strong>ã€‚è®¿é—®æ—¥å¿—ä¸»è¦è®°å½•å®¢æˆ·ç«¯è®¿é—®nginxçš„æ¯ä¸€ä¸ªè¯·æ±‚ï¼Œæ ¼å¼å¯ä»¥è‡ªå®šä¹‰ï¼›é”™è¯¯æ—¥å¿—ä¸»è¦è®°å½•å®¢æˆ·ç«¯è®¿é—®nginxå‡ºé”™æ—¶çš„æ—¥å¿—ï¼Œæ ¼å¼ä¸æ”¯æŒè‡ªå®šä¹‰ã€‚ä¸¤ç§æ—¥å¿—éƒ½å¯ä»¥é€‰æ‹©æ€§å…³é—­ã€‚é€šè¿‡è®¿é—®æ—¥å¿—ï¼Œä½ å¯ä»¥å¾—åˆ°ç”¨æˆ·åœ°åŸŸæ¥æºã€è·³è½¬æ¥æºã€ä½¿ç”¨ç»ˆç«¯ã€æŸä¸ªURLè®¿é—®é‡ç­‰ç›¸å…³ä¿¡æ¯ï¼›é€šè¿‡é”™è¯¯æ—¥å¿—ï¼Œä½ å¯ä»¥å¾—åˆ°ç³»ç»ŸæŸä¸ªæœåŠ¡æˆ–serverçš„æ€§èƒ½ç“¶é¢ˆç­‰ã€‚å› æ­¤ï¼Œå°†æ—¥å¿—å¥½å¥½åˆ©ç”¨ï¼Œä½ å¯ä»¥å¾—åˆ°å¾ˆå¤šæœ‰ä»·å€¼çš„ä¿¡æ¯ã€‚</p><h3 id="2ã€è®¿é—®æ—¥å¿—"><a href="#2ã€è®¿é—®æ—¥å¿—" class="headerlink" title="2ã€è®¿é—®æ—¥å¿—"></a>2ã€è®¿é—®æ—¥å¿—</h3><pre class=" language-bash"><code class="language-bash"><span class="token punctuation">[</span>Access.log<span class="token punctuation">]</span>log_format  main  <span class="token string">'<span class="token variable">$remote_addr</span> <span class="token variable">$remote_user</span> [<span class="token variable">$time_local</span>] "<span class="token variable">$request</span>" <span class="token variable">$http_host</span> '</span>                  <span class="token string">'<span class="token variable">$status</span> <span class="token variable">$upstream_status</span> <span class="token variable">$body_bytes_sent</span> "<span class="token variable">$http_referer</span>" '</span>                  <span class="token string">'"<span class="token variable">$http_user_agent</span>" <span class="token variable">$ssl_protocol</span> <span class="token variable">$ssl_cipher</span> <span class="token variable">$upstream_addr</span> '</span>                  <span class="token string">'<span class="token variable">$request_time</span> <span class="token variable">$upstream_response_time</span>'</span><span class="token punctuation">;</span></code></pre><table>  <tbody><tr>    <th>å˜é‡åç§°</th>    <th>å˜é‡æè¿°</th>    <th>ä¸¾ä¾‹è¯´æ˜</th>  </tr>  <tr>    <td>$remote_addr</td>    <td>å®¢æˆ·ç«¯åœ°å€</td>    <td>113.140.15.90</td>  </tr>  <tr>    <td>$remote_user</td>    <td>å®¢æˆ·ç«¯ç”¨æˆ·åç§°</td>    <td>-</td>  </tr>  <tr>    <td>$time_local</td>    <td>è®¿é—®æ—¶é—´å’Œæ—¶åŒº</td>    <td>18/Jul/2012:17:00:01 +0800</td>  </tr>  <tr>    <td>$request</td>    <td>è¯·æ±‚çš„URIå’ŒHTTPåè®®</td>    <td>"GET /pa/img/home/logo-alipay-t.png HTTP/1.1"</td>  </tr>  <tr>    <td>$http_host</td>    <td>è¯·æ±‚åœ°å€ï¼Œå³æµè§ˆå™¨ä¸­ä½ è¾“å…¥çš„åœ°å€ï¼ˆIPæˆ–åŸŸåï¼‰</td>    <td>img.alipay.com<br>10.253.70.103</td>  </tr>  <tr>    <td>$status</td>    <td>HTTPè¯·æ±‚çŠ¶æ€</td>    <td>200</td>  </tr>  <tr>    <td>$upstream_status</td>    <td>upstreamçŠ¶æ€</td>    <td>200</td>  </tr>  <tr>    <td>$body_bytes_sent</td>    <td>å‘é€ç»™å®¢æˆ·ç«¯æ–‡ä»¶å†…å®¹å¤§å°</td>    <td>547</td>  </tr>  <tr>    <td>$http_referer</td>    <td>è·³è½¬æ¥æº</td>    <td>"https://cashier.alipay.com.../"</td>  </tr>  <tr>    <td>$http_user_agent</td>    <td>ç”¨æˆ·ç»ˆç«¯ä»£ç†</td>    <td>"Mozilla/4.0 (compatible; MSIE 8.0; Windows NT 5.1; Trident/4.0; SV1; GTB7.0; .NET4.0C;</td>  </tr>  <tr>    <td>$ssl_protocol</td>    <td>SSLåè®®ç‰ˆæœ¬</td>    <td>TLSv1</td>  </tr>  <tr>    <td>$ssl_cipher</td>    <td>äº¤æ¢æ•°æ®ä¸­çš„ç®—æ³•</td>    <td>RC4-SHA</td>  </tr>  <tr>    <td>$upstream_addr</td>    <td>åå°upstreamçš„åœ°å€ï¼Œå³çœŸæ­£æä¾›æœåŠ¡çš„ä¸»æœºåœ°å€</td>    <td>10.228.35.247:80</td>  </tr>  <tr>    <td>$request_time</td>    <td>æ•´ä¸ªè¯·æ±‚çš„æ€»æ—¶é—´</td>    <td>0.205</td>  </tr>  <tr>    <td>$upstream_response_time</td>    <td>è¯·æ±‚è¿‡ç¨‹ä¸­ï¼Œupstreamå“åº”æ—¶é—´</td>    <td>0.002</td>  </tr></tbody></table><pre class=" language-shell"><code class="language-shell">çº¿ä¸Šå®ä¾‹ï¼š116.9.137.90 - [02/Aug/2012:14:47:12 +0800] "GET /images/XX/20100324752729.png HTTP/1.1"img.alipay.com 200 200 2038 https://cashier.alipay.com/XX/PaymentResult.htm?payNo=XX&outBizNo=2012XX "Mozilla/4.0 (compatible; MSIE 8.0; Windows NT 6.1; Trident/4.0; SLCC2; .NET CLR 2.0.50727; .NET CLR 3.5.30729; .NET CLR 3.0.30729; Media Center PC 6.0; Tablet PC 2.0; 360SE)" TLSv1 AES128-SHA 10.228.21.237:80 0.198 0.001çº¿ä¸‹æµ‹è¯•ï¼ˆ$http_refererï¼‰ï¼š10.14.21.197 - - [14/Aug/2012:17:28:22 +0800] "GET /spanner/watch/v1?--db=ztg-1&--mode=compare&--index=status&--option=&--cluster=whole&-F=2012%2F8%2F12-00%3A00%3A00&-T=%2B2880&-i=1&-n=0&_=1344936501292 HTTP/1.1" 200 94193 "http://spanner.alipay.net/optionFrame/history.html" "Mozilla/5.0 (Windows NT 6.1) AppleWebKit/537.1 (KHTML, like Gecko) Chrome/21.0.1180.60 Safari/537.1"</code></pre><h3 id="3ã€é”™è¯¯æ—¥å¿—"><a href="#3ã€é”™è¯¯æ—¥å¿—" class="headerlink" title="3ã€é”™è¯¯æ—¥å¿—"></a>3ã€é”™è¯¯æ—¥å¿—</h3><table>  <tbody><tr>    <th>é”™è¯¯ä¿¡æ¯</th>    <th>é”™è¯¯è¯´æ˜</th>  </tr>  <tr>    <td>"upstream prematurelyï¼ˆè¿‡æ—©çš„ï¼‰ closed connection"</td>    <td>è¯·æ±‚uriçš„æ—¶å€™å‡ºç°çš„å¼‚å¸¸ï¼Œæ˜¯ç”±äºupstreamè¿˜æœªè¿”å›åº”ç­”ç»™ç”¨æˆ·æ—¶ç”¨æˆ·æ–­æ‰è¿æ¥é€ æˆçš„ï¼Œå¯¹ç³»ç»Ÿæ²¡æœ‰å½±å“ï¼Œå¯ä»¥å¿½ç•¥</td>  </tr>  <tr>    <td>"recv() failed (104: Connection reset by peer)"</td>    <td>ï¼ˆ1ï¼‰æœåŠ¡å™¨çš„å¹¶å‘è¿æ¥æ•°è¶…è¿‡äº†å…¶æ‰¿è½½é‡ï¼ŒæœåŠ¡å™¨ä¼šå°†å…¶ä¸­ä¸€äº›è¿æ¥Downæ‰ï¼›<br> ï¼ˆ2ï¼‰å®¢æˆ·å…³æ‰äº†æµè§ˆå™¨ï¼Œè€ŒæœåŠ¡å™¨è¿˜åœ¨ç»™å®¢æˆ·ç«¯å‘é€æ•°æ®ï¼›<br>ï¼ˆ3ï¼‰æµè§ˆå™¨ç«¯æŒ‰äº†Stop</td>  </tr>  <tr>    <td>"(111: Connection refused) while connecting to upstream"</td>    <td>ç”¨æˆ·åœ¨è¿æ¥æ—¶ï¼Œè‹¥é‡åˆ°åç«¯upstreamæŒ‚æ‰æˆ–è€…ä¸é€šï¼Œä¼šæ”¶åˆ°è¯¥é”™è¯¯</td>  </tr>  <tr>    <td>"(111: Connection refused) while reading response header from upstream"</td>    <td>ç”¨æˆ·åœ¨è¿æ¥æˆåŠŸåè¯»å–æ•°æ®æ—¶ï¼Œè‹¥é‡åˆ°åç«¯upstreamæŒ‚æ‰æˆ–è€…ä¸é€šï¼Œä¼šæ”¶åˆ°è¯¥é”™è¯¯</td>  </tr>  <tr>    <td>"(111: Connection refused) while sending request to upstream"</td>    <td>Nginxå’Œupstreamè¿æ¥æˆåŠŸåå‘é€æ•°æ®æ—¶ï¼Œè‹¥é‡åˆ°åç«¯upstreamæŒ‚æ‰æˆ–è€…ä¸é€šï¼Œä¼šæ”¶åˆ°è¯¥é”™è¯¯</td>  </tr>  <tr>    <td>"(110: Connection timed out) while connecting to upstream"</td>    <td>nginxè¿æ¥åé¢çš„upstreamæ—¶è¶…æ—¶</td>  </tr>  <tr>    <td>"(110: Connection timed out) while reading upstream"</td>    <td>nginxè¯»å–æ¥è‡ªupstreamçš„å“åº”æ—¶è¶…æ—¶</td>  </tr>  <tr>    <td>"(110: Connection timed out) while reading response header from upstream"</td>    <td>nginxè¯»å–æ¥è‡ªupstreamçš„å“åº”å¤´æ—¶è¶…æ—¶</td>  </tr>  <tr>    <td>"(110: Connection timed out) while reading upstream"</td>    <td>nginxè¯»å–æ¥è‡ªupstreamçš„å“åº”æ—¶è¶…æ—¶</td>  </tr>  <tr>    <td>"(104: Connection reset by peer) while connecting to upstream"</td>    <td>upstreamå‘é€äº†RSTï¼Œå°†è¿æ¥é‡ç½®</td>  </tr>  <tr>    <td>"upstream sent invalid header while reading response header from upstream"</td>    <td>upstreamå‘é€çš„å“åº”å¤´æ— æ•ˆ</td>  </tr>  <tr>    <td>"upstream sent no valid HTTP/1.0 header while reading response header from upstream"</td>    <td>upstreamå‘é€çš„å“åº”å¤´æ— æ•ˆ</td>  </tr>  <tr>    <td>"client intended to send too large body"</td>    <td>ç”¨äºè®¾ç½®å…è®¸æ¥å—çš„å®¢æˆ·ç«¯è¯·æ±‚å†…å®¹çš„æœ€å¤§å€¼ï¼Œé»˜è®¤å€¼æ˜¯1Mï¼Œclientå‘é€çš„bodyè¶…è¿‡äº†è®¾ç½®å€¼</td>  </tr>  <tr>    <td>"reopening logs"</td>    <td>ç”¨æˆ·å‘é€kill  -USR1å‘½ä»¤</td>  </tr>  <tr>    <td>"gracefully shutting down",</td>    <td>ç”¨æˆ·å‘é€kill  -WINCHå‘½ä»¤</td>  </tr>  <tr>    <td>"no servers are inside upstream"</td>    <td>upstreamä¸‹æœªé…ç½®server</td>  </tr>  <tr>    <td>"no live upstreams while connecting to upstream"</td>    <td>upstreamä¸‹çš„serverå…¨éƒ½æŒ‚äº†</td>  </tr>  <tr>    <td>"SSL_do_handshake() failed"</td>    <td>SSLæ¡æ‰‹å¤±è´¥</td>  </tr>  <tr>    <td>"SSL_write() failed (SSL:) while sending to client"</td>    <td></td>  </tr>  <tr>    <td>"(13: Permission denied) while reading upstream"</td>    <td></td>  </tr>  <tr>    <td>"(98: Address already in use) while connecting to upstream"</td>    <td></td>  </tr>  <tr>    <td>"(99: Cannot assign requested address) while connecting to upstream"</td>    <td></td>  </tr>  <tr>    <td>"ngx_slab_alloc() failed: no memory in SSL session shared cache"</td>    <td>ssl_session_cacheå¤§å°ä¸å¤Ÿç­‰åŸå› é€ æˆ</td>  </tr>  <tr>    <td>"could not add new SSL session to the session cache while SSL handshaking"</td>    <td>ssl_session_cacheå¤§å°ä¸å¤Ÿç­‰åŸå› é€ æˆ</td>  </tr>  <tr>    <td>"send() failed (111: Connection refused)"</td>    <td></td>  </tr></tbody></table><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> nginx </category>
          
      </categories>
      
      
        <tags>
            
            <tag> nginx </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Linuxç³»ç»Ÿç£ç›˜åˆ†åŒºã€æŒ‚è½½</title>
      <link href="/2019/11/11/hd/"/>
      <url>/2019/11/11/hd/</url>
      
        <content type="html"><![CDATA[<p>ä¸€ã€è¿è¡Œfdisk -lå‘½ä»¤æŸ¥çœ‹å®ä¾‹ä¸Šçš„æ•°æ®ç›˜ã€‚æ‰§è¡Œå‘½ä»¤åï¼Œå¦‚æœä¸å­˜åœ¨/dev/vdbï¼Œè¡¨ç¤ºæ‚¨çš„å®ä¾‹æ²¡æœ‰æ•°æ®ç›˜ã€‚ç¡®è®¤æ•°æ®ç›˜æ˜¯å¦å·²æŒ‚è½½ã€‚<br>    ä¾æ¬¡è¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼Œåˆ›å»ºä¸€ä¸ªå•åˆ†åŒºæ•°æ®ç›˜ã€‚</p><ul><li>è¿è¡Œfdisk -u /dev/vdbå‘½ä»¤ï¼šåˆ†åŒºæ•°æ®ç›˜ã€‚</li><li>è¾“å…¥pï¼šæŸ¥çœ‹æ•°æ®ç›˜çš„åˆ†åŒºæƒ…å†µã€‚æœ¬ç¤ºä¾‹ä¸­ï¼Œæ•°æ®ç›˜æ²¡æœ‰åˆ†åŒºã€‚</li><li>è¾“å…¥nï¼šåˆ›å»ºä¸€ä¸ªæ–°åˆ†åŒºã€‚</li><li>è¾“å…¥pï¼šé€‰æ‹©åˆ†åŒºç±»å‹ä¸ºä¸»åˆ†åŒºã€‚</li><li><font color="#FF0000">è¯´æ˜ æœ¬ç¤ºä¾‹ä¸­åˆ›å»ºä¸€ä¸ªå•åˆ†åŒºæ•°æ®ç›˜ï¼Œæ‰€ä»¥åªéœ€è¦åˆ›å»ºä¸»åˆ†åŒºã€‚å¦‚æœè¦åˆ›å»ºå››ä¸ªä»¥ä¸Šåˆ†åŒºï¼Œæ‚¨åº”è¯¥åˆ›å»ºè‡³å°‘ä¸€ä¸ªæ‰©å±•åˆ†åŒºï¼Œå³é€‰æ‹©eï¼ˆextendedï¼‰ã€‚</font></li><li>è¾“å…¥åˆ†åŒºç¼–å·å¹¶æŒ‰å›è½¦é”®ã€‚æœ¬ç¤ºä¾‹ä¸­ï¼Œä»…åˆ›å»ºä¸€ä¸ªåˆ†åŒºï¼Œè¾“å…¥1ã€‚</li><li>è¾“å…¥ç¬¬ä¸€ä¸ªå¯ç”¨çš„æ‰‡åŒºç¼–å·ï¼šæŒ‰å›è½¦é”®é‡‡ç”¨é»˜è®¤å€¼2048ã€‚</li><li>è¾“å…¥æœ€åä¸€ä¸ªæ‰‡åŒºç¼–å·ã€‚æœ¬ç¤ºä¾‹ä¸­ï¼Œä»…åˆ›å»ºä¸€ä¸ªåˆ†åŒºï¼ŒæŒ‰å›è½¦é”®é‡‡ç”¨é»˜è®¤å€¼ã€‚</li><li>è¾“å…¥pï¼šæŸ¥çœ‹è¯¥æ•°æ®ç›˜çš„è§„åˆ’åˆ†åŒºæƒ…å†µã€‚</li><li>è¾“å…¥wï¼šå¼€å§‹åˆ†åŒºï¼Œå¹¶åœ¨å®Œæˆåˆ†åŒºåé€€å‡ºã€‚</li></ul><pre class=" language-bash"><code class="language-bash"><span class="token punctuation">[</span>root@ecshost~ <span class="token punctuation">]</span><span class="token comment" spellcheck="true"># fdisk -u /dev/vdb</span>Welcome to <span class="token function">fdisk</span> <span class="token punctuation">(</span>util-linux 2.23.2<span class="token punctuation">)</span>.Changes will remain <span class="token keyword">in</span> memory only, <span class="token keyword">until</span> you decide to <span class="token function">write</span> them.Be careful before using the <span class="token function">write</span> command.Device does not contain a recognized partition tableBuilding a new DOS disklabel with disk identifier 0x3e60020e.Command <span class="token punctuation">(</span>m <span class="token keyword">for</span> help<span class="token punctuation">)</span>: pDisk /dev/vdb: 21.5 GB, 21474836480 bytes, 41943040 sectorsUnits <span class="token operator">=</span> sectors of 1 * 512 <span class="token operator">=</span> 512 bytesSector size <span class="token punctuation">(</span>logical/physical<span class="token punctuation">)</span>: 512 bytes / 512 bytesI/O size <span class="token punctuation">(</span>minimum/optimal<span class="token punctuation">)</span>: 512 bytes / 512 bytesDisk label type: dosDisk identifier: 0x3e60020eDevice Boot Start End Blocks Id SystemCommand <span class="token punctuation">(</span>m <span class="token keyword">for</span> help<span class="token punctuation">)</span>: nPartition type:p primary <span class="token punctuation">(</span>0 primary, 0 extended, 4 free<span class="token punctuation">)</span>e extendedSelect <span class="token punctuation">(</span>default p<span class="token punctuation">)</span>: pPartition number <span class="token punctuation">(</span>1-4, default 1<span class="token punctuation">)</span>: 1First sector <span class="token punctuation">(</span>2048-41943039, default 2048<span class="token punctuation">)</span>:Using default value 2048Last sector, +sectors or +size<span class="token punctuation">{</span>K,M,G<span class="token punctuation">}</span> <span class="token punctuation">(</span>2048-41943039, default 41943039<span class="token punctuation">)</span>:Using default value 41943039Partition 1 of <span class="token function">type</span> Linux and of size 20 GiB is <span class="token keyword">set</span>Command <span class="token punctuation">(</span>m <span class="token keyword">for</span> help<span class="token punctuation">)</span>: pDisk /dev/vdb: 21.5 GB, 21474836480 bytes, 41943040 sectorsUnits <span class="token operator">=</span> sectors of 1 * 512 <span class="token operator">=</span> 512 bytesSector size <span class="token punctuation">(</span>logical/physical<span class="token punctuation">)</span>: 512 bytes / 512 bytesI/O size <span class="token punctuation">(</span>minimum/optimal<span class="token punctuation">)</span>: 512 bytes / 512 bytesDisk label type: dosDisk identifier: 0x3e60020eDevice Boot Start End Blocks Id System/dev/vdb1 2048 41943039 20970496 83 LinuxCommand <span class="token punctuation">(</span>m <span class="token keyword">for</span> help<span class="token punctuation">)</span>: wThe partition table has been altered<span class="token operator">!</span>Calling ioctl<span class="token punctuation">(</span><span class="token punctuation">)</span> to re-read partition table.Syncing disks.</code></pre><p>è¿è¡Œ<code>fdisk -lu /dev/vdb</code>å‘½ä»¤æŸ¥çœ‹æ–°åˆ†åŒºã€‚<br>å¦‚æœå‡ºç°ä»¥ä¸‹ä¿¡æ¯ï¼Œè¡¨ç¤ºæ–°åˆ†åŒºå·²åˆ›å»ºå®Œæˆã€‚</p><pre class=" language-bash"><code class="language-bash"><span class="token punctuation">[</span>root@ecshost~ <span class="token punctuation">]</span><span class="token comment" spellcheck="true"># fdisk -lu /dev/vdb</span>Disk /dev/vdb: 21.5 GB, 21474836480 bytes, 41943040 sectorsUnits <span class="token operator">=</span> sectors of 1 * 512 <span class="token operator">=</span> 512 bytesSector size <span class="token punctuation">(</span>logical/physical<span class="token punctuation">)</span>: 512 bytes / 512 bytesI/O size <span class="token punctuation">(</span>minimum/optimal<span class="token punctuation">)</span>: 512 bytes / 512 bytesDisk label type: dosDisk identifier: 0x3e60020eDevice Boot Start End Blocks Id System/dev/vdb1 2048 41943039 20970496 83 Linux</code></pre><p>åˆ›å»ºä¸€ä¸ªext4æ–‡ä»¶ç³»ç»Ÿã€‚æ‚¨ä¹Ÿå¯ä»¥æ ¹æ®è‡ªå·±çš„éœ€è¦ï¼Œåˆ›å»ºå…¶ä»–æ–‡ä»¶ç³»ç»Ÿã€‚</p><pre class=" language-bash"><code class="language-bash"><span class="token punctuation">[</span>root@ecshost~ <span class="token punctuation">]</span><span class="token comment" spellcheck="true"># mkfs.ext4 /dev/vdb1</span>mke2fs 1.42.9 <span class="token punctuation">(</span>28-Dec-2013<span class="token punctuation">)</span>Filesystem label<span class="token operator">=</span>OS type: LinuxBlock size<span class="token operator">=</span>4096 <span class="token punctuation">(</span>log<span class="token operator">=</span>2<span class="token punctuation">)</span>Fragment size<span class="token operator">=</span>4096 <span class="token punctuation">(</span>log<span class="token operator">=</span>2<span class="token punctuation">)</span>Stride<span class="token operator">=</span>0 blocks, Stripe width<span class="token operator">=</span>0 blocks1310720 inodes, 5242624 blocks262131 blocks <span class="token punctuation">(</span>5.00%<span class="token punctuation">)</span> reserved <span class="token keyword">for</span> the super userFirst data block<span class="token operator">=</span>0Maximum filesystem blocks<span class="token operator">=</span>2153775104160 block <span class="token function">groups</span>32768 blocks per group, 32768 fragments per group8192 inodes per groupSuperblock backups stored on blocks:32768, 98304, 163840, 229376, 294912, 819200, 884736, 1605632, 2654208,4096000Allocating group tables: <span class="token keyword">done</span>Writing inode tables: <span class="token keyword">done</span>Creating journal <span class="token punctuation">(</span>32768 blocks<span class="token punctuation">)</span>: <span class="token keyword">done</span>Writing superblocks and filesystem accounting information: <span class="token keyword">done</span></code></pre><p>è¿è¡Œ<code>mount /dev/vdb1 /mnt</code>å‘½ä»¤æŒ‚è½½æ–‡ä»¶ç³»ç»Ÿã€‚<br>è¿è¡Œ<code>df -h</code>å‘½ä»¤æŸ¥çœ‹ç›®å‰ç£ç›˜ç©ºé—´å’Œä½¿ç”¨æƒ…å†µã€‚<br>å¦‚æœå‡ºç°æ–°å»ºæ–‡ä»¶ç³»ç»Ÿçš„ä¿¡æ¯ï¼Œè¡¨ç¤ºæŒ‚è½½æˆåŠŸï¼Œæ‚¨ä¸éœ€è¦é‡å¯å®ä¾‹å³å¯ä»¥ä½¿ç”¨æ–°çš„æ–‡ä»¶ç³»ç»Ÿã€‚</p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> Linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> åˆ†åŒº </tag>
            
            <tag> Linux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>60ä¸ªæœ‰è¶£çš„ç»æµå­¦åŸåˆ™</title>
      <link href="/2019/10/24/jingji/"/>
      <url>/2019/10/24/jingji/</url>
      
        <content type="html"><![CDATA[<h2 id="1ã€è“æ–¯ç™»åŸåˆ™"><a href="#1ã€è“æ–¯ç™»åŸåˆ™" class="headerlink" title="1ã€è“æ–¯ç™»åŸåˆ™"></a>1ã€è“æ–¯ç™»åŸåˆ™</h2><hr style="border: 1px solid #000000"><font size="4px" color="#993333" ;="">åœ¨ä½ å¾€ä¸Šçˆ¬çš„æ—¶å€™ï¼Œä¸€å®šè¦ä¿æŒæ¢¯å­çš„æ•´æ´ï¼Œå¦åˆ™ä½ ä¸‹æ¥æ—¶å¯èƒ½ä¼šæ»‘åˆ°ã€‚</font><p><strong>ç‚¹è¯„ï¼šè¿›é€€æœ‰åº¦ï¼Œæ‰ä¸è‡³è¿›é€€ç»´è°·ï¼Œå® è¾±çš†å¿˜ï¼Œæ–¹å¯ä»¥å® è¾±ä¸æƒŠ</strong></p><h2 id="2ã€å¢ç»´æ–¯å®šç†"><a href="#2ã€å¢ç»´æ–¯å®šç†" class="headerlink" title="2ã€å¢ç»´æ–¯å®šç†"></a>2ã€å¢ç»´æ–¯å®šç†</h2><hr style="border: 1px solid #000000"><font size="4px" color="#993333" ;="">è°¦è™šä¸æ˜¯æŠŠè‡ªå·±æƒ³çš„å¾ˆç³Ÿï¼Œè€Œæ˜¯å®Œå…¨ä¸æƒ³è‡ªå·±ã€‚</font><p><strong>ç‚¹è¯„ï¼šå¦‚æœæŠŠè‡ªå·±æƒ³çš„å¤ªå¥½ï¼Œå°±å¾ˆå®¹æ˜“å°†åˆ«äººæƒ³çš„å¾ˆç³Ÿ</strong></p><h2 id="3ã€æ‰˜åˆ©å¾—å®šç†"><a href="#3ã€æ‰˜åˆ©å¾—å®šç†" class="headerlink" title="3ã€æ‰˜åˆ©å¾—å®šç†"></a>3ã€æ‰˜åˆ©å¾—å®šç†</h2><hr style="border: 1px solid #000000"><font size="4px" color="#993333" ;="">æµ‹éªŒä¸€ä¸ªäººçš„æ™ºåŠ›æ˜¯å¦å±äºä¸Šä¹˜ï¼Œåªçœ‹è„‘å­é‡Œèƒ½å¦åŒæ—¶å®¹çº³ä¸¤ç§ç›¸åçš„æ€æƒ³ï¼Œè€Œæ— ç¢äºå…¶å¤„ä¸–è¡Œäº‹ã€‚</font><p><strong>ç‚¹è¯„ï¼šæ€å¯ç›¸åï¼Œå¾—é¡»ç›¸æˆ</strong> </p><h2 id="4ã€åˆºçŒ¬ç†è®º"><a href="#4ã€åˆºçŒ¬ç†è®º" class="headerlink" title="4ã€åˆºçŒ¬ç†è®º"></a>4ã€åˆºçŒ¬ç†è®º</h2><hr style="border: 1px solid #000000"><font size="4px" color="#993333" ;="">åˆºçŒ¬åœ¨å¤©å†·æ—¶é æ‹¢å–æš–ï¼Œä½†ä¿æŒä¸€å®šè·ç¦»ï¼Œä»¥å…äº’ç›¸åˆºä¼¤ã€‚</font><p><strong>ç‚¹è¯„ï¼šä¿æŒäº²å¯†çš„é‡è¦æ–¹æ³•ï¼Œä¹ƒæ˜¯ä¿æŒé€‚å½“çš„è·ç¦»</strong> </p><h2 id="5ã€é²¦é±¼æ•ˆåº”"><a href="#5ã€é²¦é±¼æ•ˆåº”" class="headerlink" title="5ã€é²¦é±¼æ•ˆåº”"></a>5ã€é²¦é±¼æ•ˆåº”</h2><hr style="border: 1px solid #000000"><font size="4px" color="#993333" ;="">é²¦é±¼å› ä¸ªä½“å¼±å°è€Œå¸¸å¸¸ç¾¤å±…ï¼Œå¹¶ä»¥å¼ºå¥è€…ä¸ºè‡ªç„¶é¦–é¢†ã€‚å°†ä¸€åªç¨å¼ºçš„é²¦é±¼è„‘åæ§åˆ¶è¡Œä¸ºçš„éƒ¨åˆ†å‰²é™¤ä»¥åï¼Œæ­¤é±¼ä¾¿å¤±å»è‡ªåˆ¶åŠ›ï¼Œè¡Œä¸ºä¹Ÿå‘ç”Ÿç´Šä¹±ã€‚ä½†å…¶ä»–é²¦é±¼å´ä»åƒä»å‰ä¸€æ ·ç›²ç›®è¿½éšã€‚</font><p><strong>ç‚¹è¯„ï¼šä¸‹å±çš„æ‚²å‰§æ€»æ˜¯é¢†å¯¼ä¸€æ‰‹é€ æˆçš„ã€‚ä¸‹å±è§‰å¾—æœ€æ²¡åŠ²çš„äº‹ï¼Œæ˜¯ä»–ä»¬è·Ÿç€ä¸€ä½æœ€å·®åŠ²çš„é¢†å¯¼</strong> </p><h2 id="6ã€é›·é²å¤«æ³•åˆ™"><a href="#6ã€é›·é²å¤«æ³•åˆ™" class="headerlink" title="6ã€é›·é²å¤«æ³•åˆ™"></a>6ã€é›·é²å¤«æ³•åˆ™</h2><hr style="border: 1px solid #000000"><font size="4px" color="#993333" ;="">åœ¨ä½ ç€æ‰‹å»ºç«‹åˆä½œå’Œä¿¡ä»»æ—¶è¦ç‰¢è®°æˆ‘ä»¬è¯­è¨€ä¸­</font><p><strong>ç‚¹è¯„ï¼šæœ€é‡è¦çš„å››ä¸ªå­—æ˜¯ï¼šä¸å¦¨è¯•è¯•ï¼Œæœ€é‡è¦çš„ä¸€ä¸ªå­—æ˜¯ï¼šæ‚¨</strong> </p><h2 id="7ã€æ´›ä¼¯å®šå¾‹"><a href="#7ã€æ´›ä¼¯å®šå¾‹" class="headerlink" title="7ã€æ´›ä¼¯å®šå¾‹"></a>7ã€æ´›ä¼¯å®šå¾‹</h2><hr style="border: 1px solid #000000"><font size="4px" color="#993333" ;="">å¯¹äºä¸€ä¸ªç»ç†äººæ¥è¯´ï¼Œæœ€è¦ç´§çš„ä¸æ˜¯ä½ åœ¨åœºæ—¶çš„æƒ…å†µï¼Œè€Œæ˜¯ä½ ä¸åœ¨åœºæ—¶å‘ç”Ÿäº†ä»€ä¹ˆã€‚</font><p><strong>ç‚¹è¯„ï¼šå¦‚æœåªæƒ³è®©ä¸‹å±å¬ä½ çš„ï¼Œé‚£ä¹ˆå½“ä½ ä¸åœ¨èº«è¾¹æ—¶ä»–ä»¬å°±ä¸çŸ¥é“åº”è¯¥å¬è°çš„äº†</strong> </p><h2 id="8ã€æ–¯å¦çº³å®šç†"><a href="#8ã€æ–¯å¦çº³å®šç†" class="headerlink" title="8ã€æ–¯å¦çº³å®šç†"></a>8ã€æ–¯å¦çº³å®šç†</h2><hr style="border: 1px solid #000000"><font size="4px" color="#993333" ;="">åœ¨å“ªé‡Œè¯´å¾—æ„ˆå°‘ï¼Œåœ¨å“ªé‡Œå¬åˆ°çš„å°±æ„ˆå¤šã€‚</font><p><strong>ç‚¹è¯„ï¼šåªæœ‰å¾ˆå¥½å¬å–åˆ«äººçš„ï¼Œæ‰èƒ½æ›´å¥½è¯´å‡ºè‡ªå·±çš„</strong> </p><h2 id="9ã€è´¹æ–¯è¯ºå®šç†"><a href="#9ã€è´¹æ–¯è¯ºå®šç†" class="headerlink" title="9ã€è´¹æ–¯è¯ºå®šç†"></a>9ã€è´¹æ–¯è¯ºå®šç†</h2><hr style="border: 1px solid #000000"><font size="4px" color="#993333" ;="">äººæœ‰ä¸¤åªè€³æœµå´åªæœ‰ä¸€å¼ å˜´å·´ï¼Œè¿™æ„å‘³ç€åº”è¯¥å¤šå¬å°‘è®²ã€‚</font><p><strong>ç‚¹è¯„ï¼šè¯´çš„å¤šäº†ï¼Œè¯´çš„å°±ä¼šæˆä¸ºåšçš„éšœç¢</strong> </p><h2 id="10ã€ç‰¢éªšæ•ˆåº”"><a href="#10ã€ç‰¢éªšæ•ˆåº”" class="headerlink" title="10ã€ç‰¢éªšæ•ˆåº”"></a>10ã€ç‰¢éªšæ•ˆåº”</h2><hr style="border: 1px solid #000000"><font size="4px" color="#993333" ;="">å‡¡æ˜¯å…¬å¸ä¸­æœ‰å¯¹å·¥ä½œå‘ç‰¢éªšçš„äººï¼Œé‚£å®¶å…¬å¸æˆ–è€æ¿ä¸€å®šæ¯”æ²¡æœ‰è¿™ç§äººæˆ–æœ‰è¿™ç§äººè€ŒæŠŠç‰¢éªšåŸ‹åœ¨è‚šå­é‡Œçš„å…¬å¸è¦æˆåŠŸå¾—å¤šã€‚</font><p><strong>ç‚¹è¯„ï¼šç‰¢éªšæ˜¯æ”¹å˜ä¸åˆç†ç°çŠ¶çš„å‚¬åŒ–å‰‚ï¼›ç‰¢éªšè™½ä¸æ€»æ˜¯æ­£ç¡®çš„ï¼Œä½†è®¤çœŸå¯¹å¾…ç‰¢éªšå´æ€»æ˜¯æ­£ç¡®çš„</strong> </p><h2 id="11ã€é¿é›·é’ˆæ•ˆåº”"><a href="#11ã€é¿é›·é’ˆæ•ˆåº”" class="headerlink" title="11ã€é¿é›·é’ˆæ•ˆåº”"></a>11ã€é¿é›·é’ˆæ•ˆåº”</h2><hr style="border: 1px solid #000000"><font size="4px" color="#993333" ;="">åœ¨é«˜å¤§çš„å»ºç­‘ç‰©é¡¶ç«¯å®‰è£…ä¸€ä¸ªé‡‘å±æ£’ï¼Œç”¨é‡‘å±çº¿ä¸åŸ‹åœ¨åœ°ä¸‹çš„ä¸€å—é‡‘å±æ¿è¿æ¥èµ·æ¥ï¼Œåˆ©ç”¨é‡‘å±æ£’çš„å°–ç«¯æ”¾ç”µï¼Œä½¿äº‘å±‚æ‰€å¸¦çš„ç”µå’Œåœ°ä¸Šçš„ç”µé€æ¸ä¸­å’Œï¼Œä»è€Œä¿æŠ¤å»ºç­‘ç‰©ç­‰é¿å…é›·å‡»ã€‚</font><p><strong>ç‚¹è¯„ï¼šå–„ç–åˆ™é€šï¼Œèƒ½å¯¼å¿…å®‰</strong> </p><h2 id="12ã€æ°¨åŸºé…¸ç»„åˆæ•ˆåº”"><a href="#12ã€æ°¨åŸºé…¸ç»„åˆæ•ˆåº”" class="headerlink" title="12ã€æ°¨åŸºé…¸ç»„åˆæ•ˆåº”"></a>12ã€æ°¨åŸºé…¸ç»„åˆæ•ˆåº”</h2><hr style="border: 1px solid #000000"><font size="4px" color="#993333" ;="">ç»„æˆäººä½“è›‹ç™½çš„å…«ç§æ°¨åŸºé…¸ï¼Œåªè¦æœ‰ä¸€ç§å«é‡ä¸è¶³ï¼Œå…¶ä»–ä¸ƒç§å°±æ— æ³•åˆæˆè›‹ç™½è´¨ã€‚</font><p><strong>ç‚¹è¯„ï¼šå½“ç¼ºä¸€ä¸å¯æ—¶ï¼Œä¸€å°±æ˜¯ä¸€åˆ‡</strong> </p><h2 id="13ã€ç±³æ ¼-25æ•ˆåº”"><a href="#13ã€ç±³æ ¼-25æ•ˆåº”" class="headerlink" title="13ã€ç±³æ ¼-25æ•ˆåº”"></a>13ã€ç±³æ ¼-25æ•ˆåº”</h2><hr style="border: 1px solid #000000"><font size="4px" color="#993333" ;="">å‰è‹è”ç ”åˆ¶çš„ç±³æ ¼-25å–·æ°”å¼æˆ˜æ–—æœºçš„è®¸å¤šé›¶éƒ¨ä»¶ä¸ç¾å›½çš„ç›¸æ¯”éƒ½è½åï¼Œä½†å› è®¾è®¡è€…è€ƒè™‘äº†æ•´ä½“æ€§èƒ½ï¼Œæ•…èƒ½åœ¨å‡é™ã€é€Ÿåº¦ã€åº”æ€¥ååº”ç­‰æ–¹é¢æˆä¸ºå½“æ—¶ä¸–ç•Œä¸€æµã€‚</font><p><strong>ç‚¹è¯„ï¼šæ‰€è°“æœ€ä½³æ•´ä½“ï¼Œä¹ƒæ˜¯ä¸ªä½“çš„æœ€ä½³ç»„åˆ</strong> </p><h2 id="14ã€ç£¨åˆæ•ˆåº”"><a href="#14ã€ç£¨åˆæ•ˆåº”" class="headerlink" title="14ã€ç£¨åˆæ•ˆåº”"></a>14ã€ç£¨åˆæ•ˆåº”</h2><hr style="border: 1px solid #000000"><font size="4px" color="#993333" ;="">æ–°ç»„è£…çš„æœºå™¨ï¼Œé€šè¿‡ä¸€å®šæ—¶æœŸçš„ä½¿ç”¨ï¼ŒæŠŠæ‘©æ“¦é¢ä¸Šçš„åŠ å·¥ç—•è¿¹ç£¨å…‰è€Œå˜å¾—æ›´åŠ å¯†åˆã€‚</font><p><strong>ç‚¹è¯„ï¼šè¦æƒ³è¾¾åˆ°å®Œæ•´çš„å¥‘åˆï¼Œé¡»åŒæ–¹éƒ½åšå‡ºå¿…è¦çš„å‰²èˆ</strong> </p><h2 id="15ã€æ³¢ç‰¹å®šç†"><a href="#15ã€æ³¢ç‰¹å®šç†" class="headerlink" title="15ã€æ³¢ç‰¹å®šç†"></a>15ã€æ³¢ç‰¹å®šç†</h2><hr style="border: 1px solid #000000"><font size="4px" color="#993333" ;="">å½“é­å—è®¸å¤šæ‰¹è¯„æ—¶ï¼Œä¸‹çº§å¾€å¾€åªè®°ä½å¼€å¤´çš„ä¸€äº›ï¼Œå…¶ä½™å°±ä¸å¬äº†ï¼Œå› ä¸ºä»–ä»¬å¿™äºæ€ç´¢è®ºæ®æ¥åé©³å¼€å¤´çš„æ‰¹è¯„ã€‚</font><p><strong>ç‚¹è¯„ï¼šæ€»ç›¯ç€ä¸‹å±çš„é”™è¯¯ï¼Œæ˜¯ä¸€ä¸ªé¢†å¯¼è€…çš„æœ€å¤§å¤±è¯¯</strong> </p><h2 id="16ã€è“æ–¯ç™»å®šå¾‹"><a href="#16ã€è“æ–¯ç™»å®šå¾‹" class="headerlink" title="16ã€è“æ–¯ç™»å®šå¾‹"></a>16ã€è“æ–¯ç™»å®šå¾‹</h2><hr style="border: 1px solid #000000"><font size="4px" color="#993333" ;="">è·Ÿä¸€ä½æœ‹å‹ä¸€èµ·å·¥ä½œï¼Œè¿œè¾ƒåœ¨çˆ¶äº²ä¹‹ä¸‹å·¥ä½œæœ‰è¶£çš„å¤šã€‚</font><p><strong>ç‚¹è¯„ï¼šå¯æ•¬ä¸å¯äº²ï¼Œç»ˆéš¾æ•¬ï¼›æœ‰æƒæ²¡æœ‰å¨ï¼Œå¸¸å¤±æƒ</strong> </p><h2 id="17ã€å‰å°”ä¼¯ç‰¹æ³•åˆ™"><a href="#17ã€å‰å°”ä¼¯ç‰¹æ³•åˆ™" class="headerlink" title="17ã€å‰å°”ä¼¯ç‰¹æ³•åˆ™"></a>17ã€å‰å°”ä¼¯ç‰¹æ³•åˆ™</h2><hr style="border: 1px solid #000000"><font size="4px" color="#993333" ;="">å·¥ä½œå±æœºæœ€ç¡®å‡¿çš„ä¿¡å·ï¼Œæ˜¯æ²¡æœ‰äººè·Ÿä½ è¯´è¯¥æ€æ ·åšã€‚</font><p><strong>ç‚¹è¯„ï¼šçœŸæ­£å±é™©çš„äº‹ï¼Œæ˜¯æ²¡æœ‰äººè·Ÿä½ è°ˆå±é™©</strong> </p><h2 id="18ã€æƒå¨æš—ç¤ºç†è®º"><a href="#18ã€æƒå¨æš—ç¤ºç†è®º" class="headerlink" title="18ã€æƒå¨æš—ç¤ºç†è®º"></a>18ã€æƒå¨æš—ç¤ºç†è®º</h2><hr style="border: 1px solid #000000"><font size="4px" color="#993333" ;="">ä¸€åŒ–å­¦å®¶ç§°ï¼Œä»–å°†æµ‹éªŒä¸€ç“¶è‡­æ°”çš„ä¼ æ’­é€Ÿåº¦ï¼Œä»–æ‰“å¼€ç“¶ç›–15ç§’åï¼Œå‰æ’å­¦ç”Ÿå³ä¸¾æ‰‹ï¼Œç§°è‡ªå·±é—»åˆ°è‡­æ°”ï¼Œè€Œåæ’çš„äººåˆ™é™†ç»­ä¸¾æ‰‹ï¼Œçº·çº·ç§°è‡ªå·±ä¹Ÿå·²é—»åˆ°ï¼Œå…¶ä¸­ç“¶ä¸­ä»€ä¹ˆä¹Ÿæ²¡æœ‰ã€‚</font><p><strong>ç‚¹è¯„ï¼šè¿·ä¿¡åˆ™è½»ä¿¡ï¼Œç›²ç›®å¿…ç›²ä»</strong> </p><h2 id="19ã€å¥¥å°¼å°”å®šç†"><a href="#19ã€å¥¥å°¼å°”å®šç†" class="headerlink" title="19ã€å¥¥å°¼å°”å®šç†"></a>19ã€å¥¥å°¼å°”å®šç†</h2><hr style="border: 1px solid #000000"><font size="4px" color="#993333" ;="">æ‰€æœ‰çš„æ”¿æ²»éƒ½æ˜¯åœ°æ–¹çš„ã€‚</font><p><strong>ç‚¹è¯„ï¼šåªæœ‰èƒ½åˆ‡èº«ä½“ä¼šåˆ°ï¼Œç¾¤ä¼—æ‰è®¤ä¸ºé‚£æ˜¯çœŸå®çš„</strong> </p><h2 id="20ã€å®šä½æ•ˆåº”"><a href="#20ã€å®šä½æ•ˆåº”" class="headerlink" title="20ã€å®šä½æ•ˆåº”"></a>20ã€å®šä½æ•ˆåº”</h2><hr style="border: 1px solid #000000"><font size="4px" color="#993333" ;="">ç¤¾ä¼šå¿ƒç†å­¦å®¶æ›¾ä½œè¿‡ä¸€ä¸ªè¯•éªŒï¼Œåœ¨å¬é›†ä¼šè®®æ—¶å…ˆè®©äººä»¬è‡ªç”±çš„é€‰æ‹©ä½å­ï¼Œä¹‹ååˆ°å®¤å¤–ä¼‘æ¯ç‰‡åˆ»å†è¿›å…¥å®¤å†…å…¥åº§ï¼Œå¦‚æ­¤äº”è‡³å…­æ¬¡ï¼Œå‘ç°å¤§å¤šæ•°äººéƒ½é€‰æ‹©ä»–ä»¬ç¬¬ä¸€æ¬¡åè¿‡çš„ä½å­ã€‚</font><p><strong>ç‚¹è¯„ï¼šå‡¡æ˜¯è‡ªå·±è®¤å®šçš„ï¼Œäººä»¬å¤§éƒ½ä¸æƒ³è½»æ˜“æ”¹å˜å®ƒ</strong> </p><h2 id="21ã€è‰¾å¥‡å¸ƒæ©å®šç†"><a href="#21ã€è‰¾å¥‡å¸ƒæ©å®šç†" class="headerlink" title="21ã€è‰¾å¥‡å¸ƒæ©å®šç†"></a>21ã€è‰¾å¥‡å¸ƒæ©å®šç†</h2><hr style="border: 1px solid #000000"><font size="4px" color="#993333" ;="">å¦‚æœä½ é‡è§å‘˜å·¥è€Œä¸è®¤å¾—ï¼Œæˆ–å¿˜äº†ä»–çš„åå­—ï¼Œé‚£ä½ çš„å…¬å¸å°±å¤ªå¤§äº†ã€‚</font><p><strong>ç‚¹è¯„ï¼šæ‘Šå­ä¸€æ—¦é“ºçš„è¿‡å¤§ï¼Œä½ å°±å¾ˆéš¾æŠŠå®ƒç…§é¡¾å‘¨å…¨</strong> </p><h2 id="22ã€å‰æ ¼å‹’å®šç†"><a href="#22ã€å‰æ ¼å‹’å®šç†" class="headerlink" title="22ã€å‰æ ¼å‹’å®šç†"></a>22ã€å‰æ ¼å‹’å®šç†</h2><hr style="border: 1px solid #000000"><font size="4px" color="#993333" ;="">é™¤äº†ç”Ÿå‘½æœ¬èº«ï¼Œæ²¡æœ‰ä»»ä½•æ‰èƒ½ä¸éœ€è¦åå¤©çš„é”»ç‚¼ã€‚</font><p><strong>ç‚¹è¯„ï¼šæ°´æ— ç§¯ä¸è¾½é˜”ï¼Œäººä¸å…»ä¸æˆæ‰</strong> </p><h2 id="23ã€çŠ¬ç’æ•ˆåº”"><a href="#23ã€çŠ¬ç’æ•ˆåº”" class="headerlink" title="23ã€çŠ¬ç’æ•ˆåº”"></a>23ã€çŠ¬ç’æ•ˆåº”</h2><hr style="border: 1px solid #000000"><font size="4px" color="#993333" ;="">å½“å¹´å¹¼çš„ç’çŠ¬é•¿å‡ºç‰™é½¿å¹¶èƒ½æ’•å’¬æ—¶ï¼Œä¸»äººå°±æŠŠå®ƒä»¬æ”¾åˆ°ä¸€ä¸ªæ²¡æœ‰é£Ÿç‰©å’Œæ°´çš„å°é—­ç¯å¢ƒé‡Œè®©è¿™äº›å¹¼çŠ¬è‡ªç›¸æ’•å’¬ï¼Œæœ€åå‰©ä¸‹çš„ä¸€åªæ´»ç€çš„çŠ¬ï¼Œè¿™åªçŠ¬ç§°ä¸ºç’ã€‚æ®è¯´ååªçŠ¬æ‰èƒ½äº§ç”Ÿä¸€åªç’ã€‚</font><p><strong>ç‚¹è¯„ï¼šå›°å¢ƒæ˜¯é€ å°±å¼ºè€…çš„å­¦æ ¡</strong></p><h2 id="24ã€è¿‘å› æ•ˆåº”"><a href="#24ã€è¿‘å› æ•ˆåº”" class="headerlink" title="24ã€è¿‘å› æ•ˆåº”"></a>24ã€è¿‘å› æ•ˆåº”</h2><hr style="border: 1px solid #000000"><font size="4px" color="#993333" ;="">æœ€è¿‘æˆ–æœ€åçš„å°è±¡å¯¹äººçš„è®¤çŸ¥æœ‰å¼ºçƒˆçš„å½±å“ã€‚</font><p><strong>ç‚¹è¯„ï¼šç»“æœå¾€å¾€ä¼šè¢«è§†ä¸ºè¿‡ç¨‹çš„æ€»ç»“</strong> </p><h2 id="25ã€é…’äº•æ³•åˆ™"><a href="#25ã€é…’äº•æ³•åˆ™" class="headerlink" title="25ã€é…’äº•æ³•åˆ™"></a>25ã€é…’äº•æ³•åˆ™</h2><hr style="border: 1px solid #000000"><font size="4px" color="#993333" ;="">åœ¨æ‹›å·¥æ—¶ç”¨å°½æµ‘èº«è§£æ•°ï¼Œä½¿å‡ºå„ç§æ–¹æ³•ï¼Œä¸å¦‚ä½¿è‡ªèº«æˆä¸ºä¸€ä¸ªå¥½å…¬å¸ï¼Œè¿™æ ·äººæ‰è‡ªç„¶è€Œç„¶ä¼šæ±‡é›†è€Œæ¥ã€‚</font><p><strong>ç‚¹è¯„ï¼šä¸èƒ½å¸å¼•äººæ‰ï¼Œå·²æœ‰çš„äººæ‰ä¹Ÿç•™ä¸ä½</strong> </p><h2 id="26ã€ç¾å³å¥½æ•ˆåº”"><a href="#26ã€ç¾å³å¥½æ•ˆåº”" class="headerlink" title="26ã€ç¾å³å¥½æ•ˆåº”"></a>26ã€ç¾å³å¥½æ•ˆåº”</h2><hr style="border: 1px solid #000000"><font size="4px" color="#993333" ;="">å¯¹ä¸€ä¸ªå¤–è¡¨è‹±ä¿Šæ¼‚äº®çš„äººï¼Œäººä»¬å¾ˆå®¹æ˜“è¯¯è®¤ä¸ºä»–æˆ–å¥¹çš„å…¶ä»–æ–¹é¢ä¹Ÿå¾ˆä¸é”™ã€‚</font><p><strong>ç‚¹è¯„ï¼šå°è±¡ä¸€æ—¦ä»¥æƒ…ç»ªä¸ºåŸºç¡€ï¼Œè¿™ä¸€å°è±¡å¸¸å¸¸ä¼šåç¦»äº‹å®</strong> </p><h2 id="27ã€å¥¥æ ¼å°”ç»´æ³•åˆ™"><a href="#27ã€å¥¥æ ¼å°”ç»´æ³•åˆ™" class="headerlink" title="27ã€å¥¥æ ¼å°”ç»´æ³•åˆ™"></a>27ã€å¥¥æ ¼å°”ç»´æ³•åˆ™</h2><hr style="border: 1px solid #000000"><font size="4px" color="#993333" ;="">å¦‚æœæˆ‘ä»¬æ¯ä¸ªäººéƒ½é›‡ä½£æ¯”æˆ‘ä»¬è‡ªå·±éƒ½æ›´å¼ºçš„äººï¼Œæˆ‘ä»¬å°±èƒ½æˆä¸ºå·¨äººå…¬å¸ã€‚</font><p><strong>ç‚¹è¯„ï¼šå¦‚æœä½ æ‰€æ‹¥æœ‰çš„äººéƒ½æ¯”ä½ å·®ï¼Œé‚£ä¹ˆä»–ä»¬å°±åªèƒ½ä½œå‡ºæ¯”ä½ æ›´å·®çš„äº‹æƒ…</strong> </p><h2 id="28ã€çš®å°”å¡ä¸¹å®šç†"><a href="#28ã€çš®å°”å¡ä¸¹å®šç†" class="headerlink" title="28ã€çš®å°”å¡ä¸¹å®šç†"></a>28ã€çš®å°”å¡ä¸¹å®šç†</h2><hr style="border: 1px solid #000000"><font size="4px" color="#993333" ;="">ç”¨äººä¸Šä¸€åŠ ä¸€ä¸ç­‰äºäºŒï¼Œæä¸å¥½ä¼šç­‰äºé›¶ã€‚</font><p><strong>ç‚¹è¯„ï¼šç»„åˆå¤±å½“ï¼Œå¸¸å¤±æ•´ä½“ä¼˜åŠ¿ï¼Œå®‰æ’å¾—å®œï¼Œæ‰æˆæœ€ä½³é…ç½®</strong> </p><h2 id="29ã€é©¬è‡æ•ˆåº”"><a href="#29ã€é©¬è‡æ•ˆåº”" class="headerlink" title="29ã€é©¬è‡æ•ˆåº”"></a>29ã€é©¬è‡æ•ˆåº”</h2><hr style="border: 1px solid #000000"><font size="4px" color="#993333" ;="">å†æ‡’æƒ°çš„é©¬ï¼Œåªè¦èº«ä¸Šæœ‰é©¬è‡å®å’¬ï¼Œå®ƒä¹Ÿä¼šç²¾ç¥æŠ–æ“ï¼Œé£å¿«å¥”è·‘ã€‚</font><p><strong>ç‚¹è¯„ï¼šæœ‰æ­£ç¡®çš„åˆºæ¿€ï¼Œæ‰ä¼šæœ‰æ­£ç¡®çš„åæ˜ </strong> </p><h2 id="30ã€å€’Uå½¢å‡è¯´"><a href="#30ã€å€’Uå½¢å‡è¯´" class="headerlink" title="30ã€å€’Uå½¢å‡è¯´"></a>30ã€å€’Uå½¢å‡è¯´</h2><hr style="border: 1px solid #000000"><font size="4px" color="#993333" ;="">å½“ä¸€ä¸ªäººå¤„äºè½»åº¦å…´å¥‹æ—¶ï¼Œèƒ½æŠŠå·¥ä½œåšå¾—æœ€å¥½ï¼›ä½†ä¸€ä¸ªäººä¸€ç‚¹å„¿å…´å¥‹éƒ½æ²¡æœ‰æ—¶ï¼Œä¹Ÿå°±æ²¡æœ‰åšå¥½å·¥ä½œçš„åŠ¨åŠ›äº†ï¼›ç›¸åº”åœ°ï¼Œå½“ä¸€ä¸ªäººå¤„äºæåº¦å…´å¥‹æ—¶ï¼Œéšä¹‹è€Œæ¥çš„å‹åŠ›å¯èƒ½ä¼šä½¿ä»–å®Œä¸æˆæœ¬è¯¥å®Œæˆçš„å·¥ä½œã€‚ä¸–ç•Œç½‘å›åå°†è´å…‹å°”ä¹‹æ‰€ä»¥è¢«ç§°ä¸ºå¸¸èƒœå°†å†›ï¼Œå…¶ç§˜è¯€ä¹‹ä¸€å³æ˜¯åœ¨æ¯”èµ›ä¸­è‡ªå§‹è‡³ç»ˆé˜²æ­¢è¿‡åº¦å…´å¥‹ï¼Œè€Œä¿æŒåŠå…´å¥‹çŠ¶æ€ã€‚æ‰€ä»¥æœ‰äººäº¦å°†å€’Uå½¢å‡è¯´ç§°ä¸ºè´å…‹å°”å¢ƒç•Œã€‚</font><p><strong>ç‚¹è¯„ï¼šæ¿€æƒ…è¿‡çƒ­ï¼Œæ¿€æƒ…å°±ä¼šæŠŠç†æ™ºçƒ§å…‰ï¼›çƒ­æƒ…ä¸­çš„å†·é™è®©äººæ¸…é†’ï¼Œå†·é™ä¸­çš„çƒ­æƒ…ä½¿äººæ‰§ç€</strong> </p><h2 id="31ã€ç‰¹ä¼¯æ–¯è®º"><a href="#31ã€ç‰¹ä¼¯æ–¯è®º" class="headerlink" title="31ã€ç‰¹ä¼¯æ–¯è®º"></a>31ã€ç‰¹ä¼¯æ–¯è®º</h2><hr style="border: 1px solid #000000"><font size="4px" color="#993333" ;="">åœ¨æ•°å­—ä¸­æ‰¾ä¸åˆ°å®‰å…¨ã€‚</font><p><strong>ç‚¹è¯„ï¼šæ•°å­—æ˜¯æ­»çš„ï¼Œæƒ…å†µæ˜¯æ´»çš„</strong> </p><h2 id="32ã€æ‘©æ–¯ç§‘å®šç†"><a href="#32ã€æ‘©æ–¯ç§‘å®šç†" class="headerlink" title="32ã€æ‘©æ–¯ç§‘å®šç†"></a>32ã€æ‘©æ–¯ç§‘å®šç†</h2><hr style="border: 1px solid #000000"><font size="4px" color="#993333" ;="">ä½ å¾—åˆ°çš„ç¬¬ä¸€ä¸ªå›ç­”ï¼Œä¸ä¸€å®šæ˜¯æœ€å¥½çš„å›ç­”ã€‚</font><p><strong>ç‚¹è¯„ï¼šåˆ¨æ ¹é—®åº•ï¼Œé—®åº•çŸ¥åº•</strong> </p><h2 id="33ã€ç½—æ°æ–¯è®ºæ–­"><a href="#33ã€ç½—æ°æ–¯è®ºæ–­" class="headerlink" title="33ã€ç½—æ°æ–¯è®ºæ–­"></a>33ã€ç½—æ°æ–¯è®ºæ–­</h2><hr style="border: 1px solid #000000"><font size="4px" color="#993333" ;="">æˆåŠŸçš„å…¬å¸ä¸ä¼šç­‰å¾…å¤–ç•Œçš„å½±å“æ¥å†³å®šè‡ªå·±çš„å‘½è¿ï¼Œè€Œæ˜¯å§‹ç»ˆå‘å‰çœ‹ã€‚</font><p><strong>ç‚¹è¯„ï¼šåªæƒ³éšæ³¢é€æµï¼Œéš¾æœ‰ç†æƒ³å½¼å²¸</strong> </p><h2 id="34ã€è¨ç›–å®šå¾‹"><a href="#34ã€è¨ç›–å®šå¾‹" class="headerlink" title="34ã€è¨ç›–å®šå¾‹"></a>34ã€è¨ç›–å®šå¾‹</h2><hr style="border: 1px solid #000000"><font size="4px" color="#993333" ;="">æˆ´ä¸€å—æ‰‹è¡¨çš„äººçŸ¥é“å‡†ç¡®çš„æ—¶é—´ï¼Œæˆ´ä¸¤å—æ‰‹è¡¨çš„äººä¾¿ä¸æ•¢ç¡®å®šå‡ ç‚¹äº†ã€‚</font><p><strong>ç‚¹è¯„ï¼šè‹¥é€‰é”™è¯¯å‚ç…§ï¼Œå¿…æ— æ­£ç¡®æ¯”è¾ƒ</strong> </p><h2 id="35ã€éš§é“è§†é‡æ•ˆåº”"><a href="#35ã€éš§é“è§†é‡æ•ˆåº”" class="headerlink" title="35ã€éš§é“è§†é‡æ•ˆåº”"></a>35ã€éš§é“è§†é‡æ•ˆåº”</h2><hr style="border: 1px solid #000000"><font size="4px" color="#993333" ;="">ä¸€ä¸ªäººè‹¥èº«å¤„éš§é“ï¼Œä»–çœ‹åˆ°çš„å°±åªæ˜¯å‰åéå¸¸ç‹­çª„çš„è§†é‡ã€‚</font><p><strong>ç‚¹è¯„ï¼šä¸æ‹“å¿ƒè·¯ï¼Œéš¾å¼€è§†é‡ï¼›è§†é‡ä¸å®½ï¼Œè„šä¸‹çš„è·¯ä¹Ÿä¼šæ„ˆèµ°æ„ˆçª„</strong> </p><h2 id="36ã€å·´è²ç‰¹å®šå¾‹"><a href="#36ã€å·´è²ç‰¹å®šå¾‹" class="headerlink" title="36ã€å·´è²ç‰¹å®šå¾‹"></a>36ã€å·´è²ç‰¹å®šå¾‹</h2><hr style="border: 1px solid #000000"><font size="4px" color="#993333" ;="">åœ¨å…¶ä»–äººéƒ½æŠ•äº†èµ„çš„åœ°æ–¹å»æŠ•èµ„ï¼Œä½ æ˜¯ä¸ä¼šå‘è´¢çš„ã€‚</font><p><strong>ç‚¹è¯„ï¼šå–„äºèµ°è‡ªå·±çš„è·¯ï¼Œæ‰å¯æœ›èµ°åˆ«äººæ²¡èµ°è¿‡çš„è·¯ï¼›ç‰¹è‰²ä¸ç‰¹ï¼Œä¼˜åŠ¿æ— å¿§</strong> </p><h2 id="37ã€å¤ç‰¹é›·å®šç†"><a href="#37ã€å¤ç‰¹é›·å®šç†" class="headerlink" title="37ã€å¤ç‰¹é›·å®šç†"></a>37ã€å¤ç‰¹é›·å®šç†</h2><hr style="border: 1px solid #000000"><font size="4px" color="#993333" ;="">æ¯ä¸€å¤„å‡ºå£éƒ½æ˜¯å¦ä¸€å¤„çš„å…¥å£ã€‚</font><p><strong>ç‚¹è¯„ï¼šä¸Šä¸€ä¸ªç›®æ ‡æ˜¯ä¸‹ä¸€ä¸ªç›®æ ‡çš„åŸºç¡€ï¼Œä¸‹ä¸€ä¸ªç›®æ ‡æ˜¯ä¸Šä¸€ä¸ªç›®æ ‡çš„å»¶ç»­</strong> </p><h2 id="38ã€åˆ—æ–‡å®šç†"><a href="#38ã€åˆ—æ–‡å®šç†" class="headerlink" title="38ã€åˆ—æ–‡å®šç†"></a>38ã€åˆ—æ–‡å®šç†</h2><hr style="border: 1px solid #000000"><font size="4px" color="#993333" ;="">é‚£äº›çŠ¹è±«ç€è¿Ÿè¿Ÿä¸èƒ½åšå‡ºè®¡åˆ’çš„äººï¼Œé€šå¸¸æ˜¯å› ä¸ºå¯¹è‡ªå·±çš„èƒ½åŠ›æ²¡æœ‰æŠŠæ¡ã€‚</font><p><strong>ç‚¹è¯„ï¼šå¦‚æœæ²¡æœ‰èƒ½åŠ›å»ç­¹åˆ’ï¼Œå°±åªæœ‰æ—¶é—´å»åæ‚”äº†</strong> </p><h2 id="39ã€éæ´›æ–¯ç‰¹æ³•åˆ™"><a href="#39ã€éæ´›æ–¯ç‰¹æ³•åˆ™" class="headerlink" title="39ã€éæ´›æ–¯ç‰¹æ³•åˆ™"></a>39ã€éæ´›æ–¯ç‰¹æ³•åˆ™</h2><hr style="border: 1px solid #000000"><font size="4px" color="#993333" ;="">åœ¨ç­‘å¢™ä¹‹å‰åº”è¯¥çŸ¥é“æŠŠä»€ä¹ˆåœˆå‡ºå»ï¼ŒæŠŠä»€ä¹ˆåœˆè¿›æ¥ã€‚</font><p><strong>ç‚¹è¯„ï¼šå¼€å§‹å°±æ˜ç¡®äº†ç•Œé™ã€æœ€ç»ˆå°±ä¸ä¼šåšå‡ºè¶…è¶Šæé™çš„äº‹æ¥</strong> </p><h2 id="40ã€æ³¢å…‹å®šç†"><a href="#40ã€æ³¢å…‹å®šç†" class="headerlink" title="40ã€æ³¢å…‹å®šç†"></a>40ã€æ³¢å…‹å®šç†</h2><hr style="border: 1px solid #000000"><font size="4px" color="#993333" ;="">åªæœ‰åœ¨äº‰è¾©ä¸­ï¼Œæ‰å¯èƒ½è¯ç”Ÿæœ€å¥½çš„ä¸»æ„å’Œæœ€å¥½çš„å†³å®šã€‚</font><p><strong>ç‚¹è¯„ï¼šæ— æ‘©æ“¦ä¾¿æ— ç£¨åˆï¼Œæœ‰äº‰è®ºæ‰æœ‰é«˜è®º</strong> </p><h2 id="41ã€éŸ¦å¥‡å®šç†"><a href="#41ã€éŸ¦å¥‡å®šç†" class="headerlink" title="41ã€éŸ¦å¥‡å®šç†"></a>41ã€éŸ¦å¥‡å®šç†</h2><hr style="border: 1px solid #000000"><font size="4px" color="#993333" ;="">å³ä½¿ä½ å·²æœ‰äº†ä¸»è§ï¼Œä½†å¦‚æœæœ‰åä¸ªæœ‹å‹çœ‹æ³•å’Œä½ ç›¸åï¼Œä½ å°±å¾ˆéš¾ä¸åŠ¨æ‘‡ã€‚</font><p><strong>ç‚¹è¯„ï¼šæœªå¬ä¹‹æ—¶ä¸åº”æœ‰æˆè§ï¼Œæ—¢å¬ä¹‹åä¸å¯æ— ä¸»è§ï¼›ä¸æ€•å¼€å§‹ä¼—è¯´çº·çº­ï¼Œåªæ€•æœ€åè«è¡·ä¸€æ˜¯</strong> </p><h2 id="42ã€ç¦å…‹å…°å®šå¾‹"><a href="#42ã€ç¦å…‹å…°å®šå¾‹" class="headerlink" title="42ã€ç¦å…‹å…°å®šå¾‹"></a>42ã€ç¦å…‹å…°å®šå¾‹</h2><hr style="border: 1px solid #000000"><font size="4px" color="#993333" ;="">æ²¡æœ‰å¿…è¦åšå‡ºå†³å®šæ—¶ï¼Œå°±æœ‰å¿…è¦ä¸åšå†³å®šã€‚</font><p><strong>ç‚¹è¯„ï¼šå½“ä¸çŸ¥å¦‚ä½•è¡ŒåŠ¨æ—¶ï¼Œæœ€å¥½çš„è¡ŒåŠ¨å°±æ˜¯ä¸é‡‡å–ä»»ä½•è¡ŒåŠ¨</strong> </p><h2 id="43ã€ç‹å®‰è®ºæ–­"><a href="#43ã€ç‹å®‰è®ºæ–­" class="headerlink" title="43ã€ç‹å®‰è®ºæ–­"></a>43ã€ç‹å®‰è®ºæ–­</h2><hr style="border: 1px solid #000000"><font size="4px" color="#993333" ;="">çŠ¹è±«ä¸å†³å›ºç„¶å¯ä»¥å…å»ä¸€äº›åšé”™äº‹çš„æœºä¼šï¼Œä½†ä¹Ÿå¤±å»äº†æˆåŠŸçš„æœºé‡ã€‚</font><p><strong>ç‚¹è¯„ï¼šå¯¡æ–­èƒ½ä½¿å¥½äº‹ç”±å¥½å˜åï¼Œæœæ–­å¯å°†å±æœºè½¬å±ä¸ºå®‰</strong> </p><h2 id="44ã€æ ¼ç‘æ–¯ç‰¹å®šç†"><a href="#44ã€æ ¼ç‘æ–¯ç‰¹å®šç†" class="headerlink" title="44ã€æ ¼ç‘æ–¯ç‰¹å®šç†"></a>44ã€æ ¼ç‘æ–¯ç‰¹å®šç†</h2><hr style="border: 1px solid #000000"><font size="4px" color="#993333" ;="">æ°å‡ºçš„ç­–ç•¥å¿…é¡»åŠ ä¸Šæ°å‡ºçš„æ‰§è¡Œæ‰èƒ½å‡‘æ•ˆã€‚</font><p><strong>ç‚¹è¯„ï¼šå¥½äº‹å¹²å®æ›´å¥½ï¼Œå®äº‹åŠå¥½æ„ˆå®</strong> </p><h2 id="45ã€å‰å¾·æ—æ³•åˆ™"><a href="#45ã€å‰å¾·æ—æ³•åˆ™" class="headerlink" title="45ã€å‰å¾·æ—æ³•åˆ™"></a>45ã€å‰å¾·æ—æ³•åˆ™</h2><hr style="border: 1px solid #000000"><font size="4px" color="#993333" ;="">æŠŠéš¾é¢˜æ¸…æ¸…æ¥šæ¥šåœ°å†™å‡ºæ¥ï¼Œä¾¿å·²ç»è§£å†³äº†ä¸€åŠã€‚</font><p><strong>ç‚¹è¯„ï¼šæ‚ä¹±æ— ç« çš„æ€ç»´ï¼Œä¸å¯èƒ½äº§ç”Ÿæœ‰æ¡æœ‰ç†çš„è¡ŒåŠ¨</strong> </p><h2 id="46ã€æ²ƒå°”æ£®æ³•åˆ™"><a href="#46ã€æ²ƒå°”æ£®æ³•åˆ™" class="headerlink" title="46ã€æ²ƒå°”æ£®æ³•åˆ™"></a>46ã€æ²ƒå°”æ£®æ³•åˆ™</h2><hr style="border: 1px solid #000000"><font size="4px" color="#993333" ;="">æŠŠä¿¡æ¯å’Œæƒ…æŠ¥æ”¾åœ¨ç¬¬ä¸€ä½ï¼Œé‡‘é’±å°±ä¼šæ»šæ»šè€Œæ¥ã€‚</font><p><strong>ç‚¹è¯„ï¼šä½ èƒ½å¾—åˆ°å¤šå°‘ï¼Œå¾€å¾€åˆ°å–å†³äºä½ èƒ½çŸ¥é“å¤šå°‘</strong> </p><h2 id="47ã€å¡”é©¬æ‹‰æ•ˆåº”"><a href="#47ã€å¡”é©¬æ‹‰æ•ˆåº”" class="headerlink" title="47ã€å¡”é©¬æ‹‰æ•ˆåº”"></a>47ã€å¡”é©¬æ‹‰æ•ˆåº”</h2><hr style="border: 1px solid #000000"><font size="4px" color="#993333" ;="">å¡”ç›æ‹‰æ˜¯æ·å…‹é›·è¾¾ä¸“å®¶å¼—ä½©èµ«å‘æ˜çš„ä¸€ç§é›·è¾¾ï¼Œå®ƒä¸å…¶ä»–é›·è¾¾çš„æœ€å¤§ä¸åŒæ˜¯ä¸å‘å°„ä¿¡å·è€Œåªæ¥æ”¶ä¿¡å·ï¼Œæ•…ä¸ä¼šè¢«æ•Œæ–¹åé›·è¾¾è£…ç½®å‘ç°ã€‚</font><p><strong>ç‚¹è¯„ï¼šå–„è—è€…äººä¸å¯çŸ¥ï¼Œèƒ½çŸ¥è€…äººæ— ä»¥è—</strong> </p><h2 id="48ã€å°æ± å®šç†"><a href="#48ã€å°æ± å®šç†" class="headerlink" title="48ã€å°æ± å®šç†"></a>48ã€å°æ± å®šç†</h2><hr style="border: 1px solid #000000"><font size="4px" color="#993333" ;="">è¶Šæ˜¯æ²‰é†‰ï¼Œå°±è¶Šæ˜¯æŠ“ç€çœ¼å‰çš„ä¸œè¥¿ä¸æ”¾ã€‚</font><p><strong>ç‚¹è¯„ï¼šè‡ªæˆ‘é™¶é†‰ä¸æ˜“æ¸…é†’ï¼Œè‡ªä»¥ä¸ºæ˜¯ä¸å–œæ‰¹è¯„</strong> </p><h2 id="49ã€èµ«å‹’æ³•åˆ™"><a href="#49ã€èµ«å‹’æ³•åˆ™" class="headerlink" title="49ã€èµ«å‹’æ³•åˆ™"></a>49ã€èµ«å‹’æ³•åˆ™</h2><hr style="border: 1px solid #000000"><font size="4px" color="#993333" ;="">å½“äººä»¬çŸ¥é“è‡ªå·±çš„å·¥ä½œæˆç»©æœ‰äººæ£€æŸ¥çš„æ—¶å€™ä¼šåŠ å€åŠªåŠ›ã€‚</font><p><strong>ç‚¹è¯„ï¼šåªæœ‰åœ¨ç›¸äº’ä¿¡ä»»çš„æƒ…å†µä¸‹ï¼Œç›‘ç£æ‰ä¼šæˆä¸ºåŠ¨åŠ›</strong> </p><h2 id="50ã€æ¨ªå±±æ³•åˆ™"><a href="#50ã€æ¨ªå±±æ³•åˆ™" class="headerlink" title="50ã€æ¨ªå±±æ³•åˆ™"></a>50ã€æ¨ªå±±æ³•åˆ™</h2><hr style="border: 1px solid #000000"><font size="4px" color="#993333" ;="">æœ€æœ‰æ•ˆå¹¶æŒç»­ä¸æ–­çš„æ§åˆ¶ä¸æ˜¯å¼ºåˆ¶ï¼Œè€Œæ˜¯è§¦å‘ä¸ªäººå†…å¿ƒçš„è‡ªå‘æ§åˆ¶ã€‚</font><p><strong>ç‚¹è¯„ï¼šæœ‰è‡ªè§‰æ€§æ‰æœ‰ç§¯ææ€§ï¼Œæ— è‡ªå†³æƒä¾¿æ— ä¸»åŠ¨æƒ</strong> </p><h2 id="51ã€è´è¶æ•ˆåº”"><a href="#51ã€è´è¶æ•ˆåº”" class="headerlink" title="51ã€è´è¶æ•ˆåº”"></a>51ã€è´è¶æ•ˆåº”</h2><hr style="border: 1px solid #000000"><font size="4px" color="#993333" ;="">ç´Šä¹±å­¦ç ”ç©¶è€…ç§°ï¼Œå—åŠçƒæŸåœ°çš„ä¸€åªè´è¶å¶å°”æ‰‡åŠ¨ä¸€ä¸‹ç¿…è†€æ‰€å¼•èµ·çš„å¾®å¼±æ°”æµï¼Œå‡ æ˜ŸæœŸåå¯å˜æˆå¸­å·åŒ—åŠçƒæŸåœ°çš„ä¸€åœºé¾™å·é£ã€‚ä»–ä»¬å°†è¿™ç§ç”±ä¸€ä¸ªæå°èµ·å› ï¼Œç»è¿‡ä¸€å®šçš„æ—¶é—´ï¼Œåœ¨å…¶ä»–å› ç´ çš„å‚ä¸ä½œç”¨ä¸‹ï¼Œå‘å±•æˆæä¸ºå·¨å¤§å’Œå¤æ‚åæœçš„ç°è±¡ç§°ä¸ºè´è¶æ•ˆåº”ã€‚</font><p><strong>ç‚¹è¯„ï¼šå–„ç»ˆè€…æ…å§‹ï¼Œè°¨å°è€…æ…å¾®</strong> </p><h2 id="52ã€é˜¿ä»€æ³•åˆ™"><a href="#52ã€é˜¿ä»€æ³•åˆ™" class="headerlink" title="52ã€é˜¿ä»€æ³•åˆ™"></a>52ã€é˜¿ä»€æ³•åˆ™</h2><hr style="border: 1px solid #000000"><font size="4px" color="#993333" ;="">æ‰¿è®¤é—®é¢˜æ˜¯è§£å†³é—®é¢˜çš„ç¬¬ä¸€æ­¥ã€‚</font><p><strong>ç‚¹è¯„ï¼šä½ æ„ˆæ˜¯èº²ç€é—®é¢˜ï¼Œé—®é¢˜æ„ˆä¼šæªä½ä½ ä¸æ”¾</strong> </p><h2 id="53ã€æ´›å…‹å¿ å‘Š"><a href="#53ã€æ´›å…‹å¿ å‘Š" class="headerlink" title="53ã€æ´›å…‹å¿ å‘Š"></a>53ã€æ´›å…‹å¿ å‘Š</h2><hr style="border: 1px solid #000000"><font size="4px" color="#993333" ;="">è§„å®šåº”è¯¥å°‘å®šï¼Œä¸€æ—¦å®šä¸‹ä¹‹åï¼Œä¾¿å¾—ä¸¥æ ¼éµå®ˆã€‚</font><p><strong>ç‚¹è¯„ï¼šç®€åˆ™æ˜“å¾ªï¼Œä¸¥åˆ™å¿…è¡Œ</strong> </p><h2 id="54ã€çƒ­ç‚‰æ³•åˆ™"><a href="#54ã€çƒ­ç‚‰æ³•åˆ™" class="headerlink" title="54ã€çƒ­ç‚‰æ³•åˆ™"></a>54ã€çƒ­ç‚‰æ³•åˆ™</h2><hr style="border: 1px solid #000000"><font size="4px" color="#993333" ;="">å½“äººç”¨æ‰‹å»ç¢°çƒ§çƒ­çš„ç«ç‚‰æ—¶ï¼Œå°±ä¼šå—åˆ°çƒ«çš„æƒ©ç½šï¼Œå…¶æœ‰ä»¥ä¸‹ä¸‰ä¸ªç‰¹ç‚¹ï¼šå³æ—¶æ€§ï¼Œé¢„è­¦æ€§ï¼Œå¹³ç­‰æ€§ã€‚</font><p><strong>ç‚¹è¯„ï¼šç½ªä¸ç½šèƒ½ç›¸ç¬¦ï¼Œæ³•ä¸æ²»å¯ç›¸æœŸ</strong> </p><h2 id="55ã€æŸ¯ç¾é›…å®šå¾‹"><a href="#55ã€æŸ¯ç¾é›…å®šå¾‹" class="headerlink" title="55ã€æŸ¯ç¾é›…å®šå¾‹"></a>55ã€æŸ¯ç¾é›…å®šå¾‹</h2><hr style="border: 1px solid #000000"><font size="4px" color="#993333" ;="">ä¸–ä¸Šæ²¡æœ‰åå…¨åç¾çš„ä¸œè¥¿ï¼Œæ‰€ä»¥ä»»ä½•ä¸œè¥¿éƒ½æœ‰æ”¹é©çš„ä½™åœ°ã€‚</font><p><strong>ç‚¹è¯„ï¼šä¸æ‹˜äºå¸¸è§„ï¼Œæ‰èƒ½æ¿€å‘å‡ºåˆ›é€ åŠ›</strong> </p><h2 id="56ã€è¾¾ç»´å¤šå¤«å®šå¾‹"><a href="#56ã€è¾¾ç»´å¤šå¤«å®šå¾‹" class="headerlink" title="56ã€è¾¾ç»´å¤šå¤«å®šå¾‹"></a>56ã€è¾¾ç»´å¤šå¤«å®šå¾‹</h2><hr style="border: 1px solid #000000"><font size="4px" color="#993333" ;="">æ²¡æœ‰åˆ›æ–°ç²¾ç¥çš„äººæ°¸è¿œä¹Ÿåªèƒ½æ˜¯ä¸€ä¸ªæ‰§è¡Œè€…ã€‚</font><p><strong>ç‚¹è¯„ï¼šåªæœ‰æ•¢ä¸ºäººå…ˆçš„äººï¼Œæ‰æœ€æœ‰èµ„æ ¼æˆä¸ºçœŸæ­£çš„å…ˆé©±è€…</strong> </p><h2 id="57ã€è‡ªåƒå¹¼å´½æ•ˆåº”"><a href="#57ã€è‡ªåƒå¹¼å´½æ•ˆåº”" class="headerlink" title="57ã€è‡ªåƒå¹¼å´½æ•ˆåº”"></a>57ã€è‡ªåƒå¹¼å´½æ•ˆåº”</h2><hr style="border: 1px solid #000000"><font size="4px" color="#993333" ;="">ç¾å›½ç¡…è°·ä¼ä¸šç«äº‰ååˆ†æ¿€çƒˆï¼Œä»¥è‡³äºå„å…¬å¸éƒ½ç§¯æå¯»æ‰¾è‡ªå·±çš„è‡´å‘½å¼±ç‚¹ï¼Œæ‰€æœ‰å…¬å¸å…±åŒçš„ç”Ÿå­˜ä¹‹é“æ˜¯ï¼šæ‹¿å‡ºæ›´å¥½äº§å“æ¥å‡»è´¥è‡ªå·±çš„åŸæœ‰äº§å“ã€‚æœ‰äººå°†è¿™ç§è¡Œä¸ºæˆç§°ä¸ºè‡ªåƒå¹¼å´½ã€‚</font><p><strong>ç‚¹è¯„ï¼šè‡ªå·±ä¸é€¼è‡ªå·±ï¼Œåˆ«äººè¿Ÿæ—©ä¼šé€¼ä½ ï¼›æ•¢äºå¯¹è¿‡å»å‘Šä¸€ä¸ªæ®µè½ï¼Œæ‰æœ‰ä¿¡å¿ƒæ€å¼€æ–°çš„ä¸€ç« </strong></p><h2 id="58ã€èˆæ©å®šç†"><a href="#58ã€èˆæ©å®šç†" class="headerlink" title="58ã€èˆæ©å®šç†"></a>58ã€èˆæ©å®šç†</h2><hr style="border: 1px solid #000000"><font size="4px" color="#993333" ;="">æ–°æ€æƒ³åªæœ‰è½åˆ°çœŸæ­£ç›¸ä¿¡å®ƒï¼Œå¯¹å®ƒç€è¿·çš„äººæ‰‹é‡Œæ‰èƒ½å¼€èŠ±ç»“æœã€‚</font><p><strong>ç‚¹è¯„ï¼šåªæœ‰ä¿¡ä¹‹ä¸ç–‘ï¼Œæ‰èƒ½æŒä¹‹ä»¥æ’</strong></p><h2 id="59ï¼šå‰å®å®šç†"><a href="#59ï¼šå‰å®å®šç†" class="headerlink" title="59ï¼šå‰å®å®šç†"></a>59ï¼šå‰å®å®šç†</h2><hr style="border: 1px solid #000000"><font size="4px" color="#993333" ;="">çœŸæ­£çš„é”™è¯¯æ˜¯å®³æ€•çŠ¯é”™è¯¯ã€‚</font><p><strong>ç‚¹è¯„ï¼šä¸æ€•é”™è¯¯çš„äººï¼Œé”™è¯¯å¾€å¾€ä¹Ÿç¦»ä»–æœ€è¿œ</strong></p><h2 id="60ï¼šå¡è´å®šç†ï¼š"><a href="#60ï¼šå¡è´å®šç†ï¼š" class="headerlink" title="60ï¼šå¡è´å®šç†ï¼š"></a>60ï¼šå¡è´å®šç†ï¼š</h2><hr style="border: 1px solid #000000"><font size="4px" color="#993333" ;="">æ”¾å¼ƒæ˜¯åˆ›æ–°çš„é’¥åŒ™ã€‚</font><p><strong>ç‚¹è¯„ï¼šåœ¨æœªå­¦ä¼šæ”¾å¼ƒä¹‹å‰ï¼Œä½ å¾ˆéš¾æ‡‚çš„ä»€ä¹ˆæ˜¯äº‰å–</strong></p><hr style="border: 1px solid #000000"><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> éšç¬” </category>
          
      </categories>
      
      
        <tags>
            
            <tag> éšç¬” </tag>
            
            <tag> å®šå¾‹ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CentOs7 å®‰è£… Mysql5.7</title>
      <link href="/2019/10/16/centos7-an-zhuang-mysql5-7/"/>
      <url>/2019/10/16/centos7-an-zhuang-mysql5-7/</url>
      
        <content type="html"><![CDATA[<h3 id="1ã€ä¸‹è½½mysqlæºå®‰è£…åŒ…"><a href="#1ã€ä¸‹è½½mysqlæºå®‰è£…åŒ…" class="headerlink" title="1ã€ä¸‹è½½mysqlæºå®‰è£…åŒ…"></a>1ã€ä¸‹è½½mysqlæºå®‰è£…åŒ…</h3><pre class=" language-bash"><code class="language-bash"><span class="token function">wget</span> http://dev.mysql.com/get/mysql57-community-release-el7-8.noarch.rpm</code></pre><h3 id="2ã€å®‰è£…mysqlæº"><a href="#2ã€å®‰è£…mysqlæº" class="headerlink" title="2ã€å®‰è£…mysqlæº"></a>2ã€å®‰è£…mysqlæº</h3><pre><code>yum localinstall mysql57-community-release-el7-8.noarch.rpm```bash### 3ã€æ£€æŸ¥mysqlæºæ˜¯å¦å®‰è£…æˆåŠŸ```bashyum repolist enabled | grep "mysql.*-community.*"</code></pre><p>è¿”å›</p><pre class=" language-bash"><code class="language-bash"><span class="token punctuation">[</span>root@VM_18_105_centos ~<span class="token punctuation">]</span><span class="token comment" spellcheck="true"># yum repolist enabled | grep "mysql.*-community.*"</span>mysql-connectors-community/x86_64    MySQL Connectors Community               63mysql-tools-community/x86_64         MySQL Tools Community                    69mysql57-community/x86_64             MySQL 5.7 Community Server              287</code></pre><p>çœ‹åˆ°ä¸Šå›¾æ‰€ç¤ºè¡¨ç¤ºå®‰è£…æˆåŠŸã€‚</p><p>ä¹Ÿå¯ä»¥ä¿®æ”¹ vim /etc/yum.repos.d/mysql-community.repoæºï¼Œæ”¹å˜é»˜è®¤å®‰è£…çš„mysqlç‰ˆæœ¬ã€‚æ¯”å¦‚è¦å®‰è£…5.6ç‰ˆæœ¬ï¼Œå°†5.7æºçš„enabled=1æ”¹æˆenabled=0ã€‚ç„¶åå†å°†5.6æºçš„enabled=0æ”¹æˆenabled=1å³å¯ã€‚æ”¹å®Œä¹‹åçš„æ•ˆæœå¦‚ä¸‹æ‰€ç¤ºï¼š</p><pre class=" language-bash"><code class="language-bash"><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token comment" spellcheck="true"># Enable to use MySQL 5.5</span><span class="token punctuation">[</span>mysql55-community<span class="token punctuation">]</span>name<span class="token operator">=</span>MySQL 5.5 Community Serverbaseurl<span class="token operator">=</span>http://repo.mysql.com/yum/mysql-5.5-community/el/7/<span class="token variable">$basearch</span>/enabled<span class="token operator">=</span>0 <span class="token comment" spellcheck="true"># è¿™é‡Œ 0è¡¨ç¤ºä¸é€‰</span>gpgcheck<span class="token operator">=</span>1gpgkey<span class="token operator">=</span>file:///etc/pki/rpm-gpg/RPM-GPG-KEY-mysql<span class="token comment" spellcheck="true"># Enable to use MySQL 5.6</span><span class="token punctuation">[</span>mysql56-community<span class="token punctuation">]</span>name<span class="token operator">=</span>MySQL 5.6 Community Serverbaseurl<span class="token operator">=</span>http://repo.mysql.com/yum/mysql-5.6-community/el/7/<span class="token variable">$basearch</span>/enabled<span class="token operator">=</span>0 <span class="token comment" spellcheck="true"># è¿™é‡Œ 0è¡¨ç¤ºä¸é€‰</span>gpgcheck<span class="token operator">=</span>1gpgkey<span class="token operator">=</span>file:///etc/pki/rpm-gpg/RPM-GPG-KEY-mysql<span class="token punctuation">[</span>mysql57-community<span class="token punctuation">]</span>name<span class="token operator">=</span>MySQL 5.7 Community Serverbaseurl<span class="token operator">=</span>http://repo.mysql.com/yum/mysql-5.7-community/el/7/<span class="token variable">$basearch</span>/enabled<span class="token operator">=</span>1 <span class="token comment" spellcheck="true"># è¿™é‡Œ 1 è¡¨ç¤º é€‰ä¸­</span>gpgcheck<span class="token operator">=</span>1gpgkey<span class="token operator">=</span>file:///etc/pki/rpm-gpg/RPM-GPG-KEY-mysql<span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span><span class="token punctuation">..</span></code></pre><h3 id="4ã€å®‰è£…MySQL"><a href="#4ã€å®‰è£…MySQL" class="headerlink" title="4ã€å®‰è£…MySQL"></a>4ã€å®‰è£…MySQL</h3><pre class=" language-bash"><code class="language-bash">yum <span class="token function">install</span> mysql-community-server</code></pre><h3 id="5ã€å¯åŠ¨MySQLæœåŠ¡"><a href="#5ã€å¯åŠ¨MySQLæœåŠ¡" class="headerlink" title="5ã€å¯åŠ¨MySQLæœåŠ¡"></a>5ã€å¯åŠ¨MySQLæœåŠ¡</h3><pre class=" language-bash"><code class="language-bash">systemctl start mysqld</code></pre><p>æŸ¥çœ‹MySQLçš„å¯åŠ¨çŠ¶æ€</p><pre class=" language-bash"><code class="language-bash"><span class="token punctuation">[</span>root@VM_18_105_centos ~<span class="token punctuation">]</span><span class="token comment" spellcheck="true"># systemctl status mysqld</span>â— mysqld.service - MySQL Server   Loaded: loaded <span class="token punctuation">(</span>/usr/lib/systemd/system/mysqld.service<span class="token punctuation">;</span> enabled<span class="token punctuation">;</span> vendor preset: disabled<span class="token punctuation">)</span>   Active: active <span class="token punctuation">(</span>running<span class="token punctuation">)</span> since å›› 2018-08-23 15:27:28 CST<span class="token punctuation">;</span> 1h 26min ago     Docs: man:mysqld<span class="token punctuation">(</span>8<span class="token punctuation">)</span>           http://dev.mysql.com/doc/refman/en/using-systemd.html  Process: 21453 ExecStart<span class="token operator">=</span>/usr/sbin/mysqld --daemonize --pid-file<span class="token operator">=</span>/var/run/mysqld/mysqld.pid <span class="token variable">$MYSQLD_OPTS</span> <span class="token punctuation">(</span>code<span class="token operator">=</span>exited, status<span class="token operator">=</span>0/SUCCESS<span class="token punctuation">)</span>  Process: 21432 ExecStartPre<span class="token operator">=</span>/usr/bin/mysqld_pre_systemd <span class="token punctuation">(</span>code<span class="token operator">=</span>exited, status<span class="token operator">=</span>0/SUCCESS<span class="token punctuation">)</span> Main PID: 21457 <span class="token punctuation">(</span>mysqld<span class="token punctuation">)</span>   Memory: 202.1M   CGroup: /system.slice/mysqld.service           â””â”€21457 /usr/sbin/mysqld --daemonize --pid-file<span class="token operator">=</span>/var/run/mysqld/mysqld.pid</code></pre><h3 id="6ã€è®¾ç½®å¼€æœºå¯åŠ¨"><a href="#6ã€è®¾ç½®å¼€æœºå¯åŠ¨" class="headerlink" title="6ã€è®¾ç½®å¼€æœºå¯åŠ¨"></a>6ã€è®¾ç½®å¼€æœºå¯åŠ¨</h3><pre class=" language-bash"><code class="language-bash"> systemctl <span class="token function">enable</span> mysqld systemctl daemon-reload</code></pre><h3 id="7ã€è·å–rootç™»é™†å¯†ç "><a href="#7ã€è·å–rootç™»é™†å¯†ç " class="headerlink" title="7ã€è·å–rootç™»é™†å¯†ç "></a>7ã€è·å–rootç™»é™†å¯†ç </h3><p>mysqlå®‰è£…å®Œæˆä¹‹åï¼Œåœ¨/var/log/mysqld.logæ–‡ä»¶ä¸­ç»™rootç”Ÿæˆäº†ä¸€ä¸ªé»˜è®¤å¯†ç ã€‚é€šè¿‡ä¸‹é¢çš„æ–¹å¼æ‰¾åˆ°rooté»˜è®¤å¯†ç ï¼Œç„¶åç™»å½•mysqlè¿›è¡Œä¿®æ”¹ï¼š</p><pre class=" language-bash"><code class="language-bash"><span class="token punctuation">[</span>root@VM_18_105_centos ~<span class="token punctuation">]</span><span class="token comment" spellcheck="true">#  grep 'temporary password' /var/log/mysqld.log</span>2018-08-23T06:10:44.014590Z 1 <span class="token punctuation">[</span>Note<span class="token punctuation">]</span> A temporary password is generated <span class="token keyword">for</span> root@localhost: thI/5wEl_chk</code></pre><p>ps:å¦‚æœæ²¡æœ‰è¿”å›ï¼Œæ‰¾ä¸åˆ°rootå¯†ç ï¼Œè§£å†³æ–¹æ¡ˆï¼š</p><p>1åˆ é™¤åŸæ¥å®‰è£…è¿‡çš„mysqlæ®‹ç•™çš„æ•°æ®ï¼ˆè¿™ä¸€æ­¥éå¸¸é‡è¦ï¼Œé—®é¢˜å°±å‡ºåœ¨è¿™ï¼‰</p><pre class=" language-bash"><code class="language-bash"><span class="token function">rm</span> -rf /var/lib/mysql</code></pre><p>2é‡å¯mysqldæœåŠ¡</p><pre class=" language-bash"><code class="language-bash">systemctl restart mysqld</code></pre><p>3å†å»æ‰¾ä¸´æ—¶å¯†ç </p><pre class=" language-bash"><code class="language-bash"><span class="token function">grep</span> <span class="token string">'temporary password'</span> /var/log/mysqld.log</code></pre><p>åŸå› æœ‰å¯èƒ½æ˜¯ä¹‹å‰å®‰è£…è¿‡ä¸€æ¬¡ï¼Œæ²¡æœ‰å®‰è£…å¥½ã€‚</p><h3 id="8ã€ç™»é™†"><a href="#8ã€ç™»é™†" class="headerlink" title="8ã€ç™»é™†"></a>8ã€ç™»é™†</h3><pre class=" language-bash"><code class="language-bash"><span class="token punctuation">[</span>root@VM_18_105_centos ~<span class="token punctuation">]</span><span class="token comment" spellcheck="true"># mysql -uroot -p</span>---- è¾“å…¥å¯†ç ï¼šthI/5wEl_chk</code></pre><p>ä¿®æ”¹å¯†ç </p><pre class=" language-bash"><code class="language-bash">mysql<span class="token operator">></span> ALTER USER <span class="token string">'root'</span>@<span class="token string">'localhost'</span> IDENTIFIED BY <span class="token string">'123456Aa!'</span><span class="token punctuation">;</span> MySql é»˜è®¤å¯†ç çº§åˆ«ä¸€å®šè¦æœ‰å¤§å°å†™å­—æ¯å’Œç‰¹æ®Šç¬¦å·ï¼Œæ‰€ä»¥æ¯”è¾ƒéº»çƒ¦ã€‚</code></pre><h3 id="9ã€ä¿®æ”¹å¯†ç ç­–ç•¥"><a href="#9ã€ä¿®æ”¹å¯†ç ç­–ç•¥" class="headerlink" title="9ã€ä¿®æ”¹å¯†ç ç­–ç•¥"></a>9ã€ä¿®æ”¹å¯†ç ç­–ç•¥</h3><p>åœ¨/etc/my.cnfæ–‡ä»¶æ·»åŠ validate_password_policyé…ç½®ï¼ŒæŒ‡å®šå¯†ç ç­–ç•¥</p><pre class=" language-bash"><code class="language-bash"><span class="token comment" spellcheck="true"># 0ï¼ˆLOWï¼‰ï¼šéªŒè¯ Length</span><span class="token comment" spellcheck="true"># 1ï¼ˆMEDIUMï¼‰ï¼šéªŒè¯ Length; numeric, lowercase/uppercase, and special characters</span><span class="token comment" spellcheck="true"># 2ï¼ˆSTRONGï¼‰ï¼šéªŒè¯ Length; numeric, lowercase/uppercase, and special characters; dictionary file</span>validate_password_policy<span class="token operator">=</span>0</code></pre><p>å½“ç„¶å¦‚æœä¸éœ€è¦å¯†ç ç­–ç•¥ï¼Œå¯ä»¥ç¦ç”¨ï¼š<br>åœ¨/etc/my.cnfæ–‡ä»¶æ·»åŠ </p><pre class=" language-bash"><code class="language-bash">validate_password <span class="token operator">=</span> off</code></pre><p>é‡å¯ç”Ÿæ•ˆï¼š</p><pre class=" language-bash"><code class="language-bash">systemctl restart mysqld</code></pre><p>Mysqlçš„rootç”¨æˆ·ï¼Œåªèƒ½æœ¬åœ°è®¿é—®ï¼Œè¿™é‡Œåœ¨åˆ›å»ºä¸€ä¸ªè¿œç¨‹å¯ä»¥è®¿é—®çš„ ç”¨æˆ·ã€‚</p><pre class=" language-bash"><code class="language-bash">GRANT ALL PRIVILEGES ON *.* TO <span class="token string">'its'</span>@<span class="token string">'%'</span> IDENTIFIED BY <span class="token string">'123456'</span> WITH GRANT OPTION<span class="token punctuation">;</span></code></pre><h3 id="10ã€å¿½ç•¥å¤§å°å†™"><a href="#10ã€å¿½ç•¥å¤§å°å†™" class="headerlink" title="10ã€å¿½ç•¥å¤§å°å†™"></a>10ã€å¿½ç•¥å¤§å°å†™</h3><p>ç™»é™†mysqlæŸ¥çœ‹</p><pre class=" language-bash"><code class="language-bash">mysql<span class="token operator">></span> show variables like <span class="token string">"%case%"</span><span class="token punctuation">;</span>+------------------------+-------+<span class="token operator">|</span> Variable_name          <span class="token operator">|</span> Value <span class="token operator">|</span>+------------------------+-------+<span class="token operator">|</span> lower_case_file_system <span class="token operator">|</span> OFF   <span class="token operator">|</span><span class="token operator">|</span> lower_case_table_names <span class="token operator">|</span> 0     <span class="token operator">|</span>  <span class="token comment" spellcheck="true">##0åŒºåˆ† 1 ä¸åŒºåˆ†</span>+------------------------+-------+2 rows <span class="token keyword">in</span> <span class="token keyword">set</span> <span class="token punctuation">(</span>0.00 sec<span class="token punctuation">)</span></code></pre><p>ä¿®æ”¹é…ç½®æ–‡ä»¶ /etc/my.cnf æ·»åŠ ï¼š</p><p>0ï¼šåŒºåˆ†å¤§å°å†™ï¼Œ1ï¼šä¸åŒºåˆ†å¤§å°å†™</p><pre class=" language-bash"><code class="language-bash">lower_case_table_names <span class="token operator">=</span>1é‡å¯åç”Ÿæ•ˆï¼šsystemctl restart mysqld</code></pre><h3 id="11ã€ç”¨æˆ·æƒé™"><a href="#11ã€ç”¨æˆ·æƒé™" class="headerlink" title="11ã€ç”¨æˆ·æƒé™"></a>11ã€ç”¨æˆ·æƒé™</h3><p>æŠŠæ•°æ®åº“è¿ç§»åˆ°æ–°çš„æœåŠ¡å™¨ä¸Š,æ‰§è¡Œå­˜å‚¨è¿‡ç¨‹æ—¶å‡ºç°äº†å¦‚ä¸‹é—®é¢˜:<br>execute command denied to user â€˜ç”¨æˆ·åâ€™@â€™%â€™ for routine â€˜å‡½æ•°åç§°â€™<br>åæ¥ä¸€æŸ¥åŸæ¥æ˜¯æƒé™é—®é¢˜,åªè¦ç”¨ä¸‹é¢çš„è¯­å¥æ”¹ä¸€ä¸‹ç›¸åº”ç”¨æˆ·çš„æƒé™å°±å¯ä»¥äº†:</p><pre class=" language-bash"><code class="language-bash">GRANT ALL PRIVILEGES ON *.* TO â€˜ç”¨æˆ·åâ€™@â€™%â€™ <span class="token punctuation">;</span>FLUSH PRIVILEGES<span class="token punctuation">;</span></code></pre><p>ç›¸åº”çš„æ’¤æ¶ˆæƒé™å‘½ä»¤:</p><pre class=" language-bash"><code class="language-bash">REVOKE ALL PRIVILEGES ON *.* FROM  â€˜ç”¨æˆ·åâ€™@â€™%â€™ <span class="token punctuation">;</span>FLUSH PRIVILEGES<span class="token punctuation">;</span></code></pre><h3 id="12ã€è·‘è„šæœ¬çš„æ—¶å€™"><a href="#12ã€è·‘è„šæœ¬çš„æ—¶å€™" class="headerlink" title="12ã€è·‘è„šæœ¬çš„æ—¶å€™"></a>12ã€è·‘è„šæœ¬çš„æ—¶å€™</h3><pre class=" language-bash"><code class="language-bash">ERROR 1067 <span class="token punctuation">(</span>42000<span class="token punctuation">)</span>: Invalid default value <span class="token keyword">for</span> <span class="token string">'FAILD_TIME'</span> ï¼ˆå¯¹TIMESTAMP ç±»å‹çš„å­æ®µå¦‚æœä¸è®¾ç½®ç¼ºçœå€¼æˆ–æ²¡æœ‰æ ‡å¿—not nullæ—¶å€™åœ¨åˆ›å»ºè¡¨æ—¶ä¼šæŠ¥è¿™ä¸ªé”™è¯¯ï¼‰è¿™æ˜¯å› ä¸ºsql_modeä¸­çš„NO_ZEROR_DATEå¯¼åˆ¶çš„ï¼Œåœ¨strict modeä¸­ä¸å…è®¸<span class="token string">'0000-00-00'</span>ä½œä¸ºåˆæ³•æ—¥æœŸ</code></pre><p>ä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤æŸ¥çœ‹sql_mode</p><pre class=" language-bash"><code class="language-bash">mysql<span class="token operator">></span>show variables like <span class="token string">'sql_mode'</span><span class="token punctuation">;</span>+---------------+-------------------------------------------------------------------------------------------------------------------------------------------+<span class="token operator">|</span> Variable_name <span class="token operator">|</span> Value                                                                                                                                     <span class="token operator">|</span>+---------------+-------------------------------------------------------------------------------------------------------------------------------------------+<span class="token operator">|</span> sql_mode      <span class="token operator">|</span> ONLY_FULL_GROUP_BY,STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION <span class="token operator">|</span>+---------------+-------------------------------------------------------------------------------------------------------------------------------------------+</code></pre><p>å°†ä¸Šé¢çš„NO_ZERO_DATEæ”¹ä¸ºä¸‹é¢çš„ALLOW_INVALID_DATES</p><pre class=" language-bash"><code class="language-bash">mysql<span class="token operator">></span> <span class="token keyword">set</span> sql_mode<span class="token operator">=</span><span class="token string">'ONLY_FULL_GROUP_BY,STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,ALLOW_INVALID_DATES,ERROR_FOR_DIVISION_BY_ZERO,NO_AUTO_CREATE_USER,NO_ENGINE_SUBSTITUTION'</span><span class="token punctuation">;</span></code></pre><p>ä¸Šé¢çš„è®¾ç½®æ˜¯ä¸´æ—¶è®¾ç½®ï¼Œåœ¨é‡æ–°ç™»é™†åï¼Œè¯¥è®¾ç½®åˆæ¢å¤ä¸ºNO_ZERO_DATE</p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> Mysql </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Mysql </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>HTTPSä¹‹acme.shç”³è¯·è¯ä¹¦</title>
      <link href="/2019/10/15/acme/"/>
      <url>/2019/10/15/acme/</url>
      
        <content type="html"><![CDATA[<blockquote><ul><li>ä¸€ä¸ªçº¯ç²¹ç”¨Shellï¼ˆUnix shellï¼‰è¯­è¨€ç¼–å†™çš„ACMEåè®®å®¢æˆ·ç«¯ã€‚å®Œæ•´çš„ACMEåè®®å®æ–½ã€‚ æ”¯æŒACME v1å’ŒACME v2 æ”¯æŒACME v2é€šé…ç¬¦è¯ä¹¦ç®€å•ï¼ŒåŠŸèƒ½å¼ºå¤§ä¸”æ˜“äºä½¿ç”¨ã€‚ä½ åªéœ€è¦3åˆ†é’Ÿå°±å¯ä»¥å­¦ä¹ å®ƒã€‚Letâ€™s Encryptå…è´¹è¯ä¹¦å®¢æˆ·ç«¯æœ€ç®€å•çš„shellè„šæœ¬ã€‚çº¯ç²¹ç”¨Shellç¼–å†™ï¼Œä¸ä¾èµ–äºpythonæˆ–å®˜æ–¹çš„Letâ€™s Encryptå®¢æˆ·ç«¯ã€‚åªéœ€ä¸€ä¸ªè„šæœ¬å³å¯è‡ªåŠ¨é¢å‘ï¼Œç»­è®¢å’Œå®‰è£…è¯ä¹¦ã€‚ ä¸éœ€è¦root/sudoerè®¿é—®æƒé™ã€‚æ”¯æŒåœ¨Dockerå†…ä½¿ç”¨ï¼Œæ”¯æŒIPv6</li></ul></blockquote><h3 id="ä¸€ã€å®‰è£…acme-sh"><a href="#ä¸€ã€å®‰è£…acme-sh" class="headerlink" title="ä¸€ã€å®‰è£…acme.sh"></a>ä¸€ã€å®‰è£…acme.sh</h3><p>1.å®‰è£…acme.sh</p><pre class=" language-bash"><code class="language-bash">curl https://get.acme.sh <span class="token operator">|</span> sh</code></pre><p>2.æŠŠ acme.sh å®‰è£…åˆ°ä½ çš„ home ç›®å½•ä¸‹:~/.acme.sh/å¹¶åˆ›å»º ä¸€ä¸ª bash çš„ alias, æ–¹ä¾¿ä½ çš„ä½¿ç”¨:</p><pre class=" language-bash"><code class="language-bash"><span class="token function">alias</span> acme.sh<span class="token operator">=</span>~/.acme.sh/acme.sh<span class="token keyword">echo</span> <span class="token string">'alias acme.sh=~/.acme.sh/acme.sh'</span> <span class="token operator">>></span>/etc/profile</code></pre><p>3.å®‰è£…è¿‡ç¨‹ä¸­ä¼šè‡ªåŠ¨ä¸ºä½ åˆ›å»º cronjob, æ¯å¤© 0:00 ç‚¹è‡ªåŠ¨æ£€æµ‹æ‰€æœ‰çš„è¯ä¹¦, å¦‚æœå¿«è¿‡æœŸäº†, éœ€è¦æ›´æ–°, åˆ™ä¼šè‡ªåŠ¨æ›´æ–°è¯ä¹¦(å¯æ‰§è¡Œcrontab -l æŸ¥çœ‹)ã€‚</p><pre class=" language-bash"><code class="language-bash">00 00 * * * root /root/.acme.sh/acme.sh --cron --home /root/.acme.sh <span class="token operator">&amp;</span><span class="token operator">></span>/var/log/acme.sh.logs</code></pre><h3 id="äºŒã€ç”³è¯·è¯ä¹¦"><a href="#äºŒã€ç”³è¯·è¯ä¹¦" class="headerlink" title="äºŒã€ç”³è¯·è¯ä¹¦"></a>äºŒã€ç”³è¯·è¯ä¹¦</h3><p>acme.sh å®ç°äº† acme åè®®æ”¯æŒçš„æ‰€æœ‰éªŒè¯åè®®. ä¸€èˆ¬æœ‰ä¸¤ç§æ–¹å¼éªŒè¯: http å’Œ dns éªŒè¯ã€‚<br>1.HTTP æ–¹å¼<br>http æ–¹å¼éœ€è¦åœ¨ä½ çš„ç½‘ç«™æ ¹ç›®å½•ä¸‹æ”¾ç½®ä¸€ä¸ªæ–‡ä»¶, æ¥éªŒè¯ä½ çš„åŸŸåæ‰€æœ‰æƒ,å®ŒæˆéªŒè¯. ç„¶åå°±å¯ä»¥ç”Ÿæˆè¯ä¹¦äº†.</p><pre class=" language-bash"><code class="language-bash">acme.sh  --issue  -d clsn.io -d *.clsn.io  --webroot  /www/wwwroot/clsn.io/</code></pre><p>åªéœ€è¦æŒ‡å®šåŸŸå, å¹¶æŒ‡å®šåŸŸåæ‰€åœ¨çš„ç½‘ç«™æ ¹ç›®å½•. acme.sh ä¼šå…¨è‡ªåŠ¨çš„ç”ŸæˆéªŒè¯æ–‡ä»¶, å¹¶æ”¾åˆ°ç½‘ç«™çš„æ ¹ç›®å½•, ç„¶åè‡ªåŠ¨å®ŒæˆéªŒè¯. æœ€åä¼šèªæ˜çš„åˆ é™¤éªŒè¯æ–‡ä»¶. æ•´ä¸ªè¿‡ç¨‹æ²¡æœ‰ä»»ä½•å‰¯ä½œç”¨.<br>å¦‚æœä½ ç”¨çš„ apacheæœåŠ¡å™¨, acme.sh è¿˜å¯ä»¥æ™ºèƒ½çš„ä» apacheçš„é…ç½®ä¸­è‡ªåŠ¨å®ŒæˆéªŒè¯, ä½ ä¸éœ€è¦æŒ‡å®šç½‘ç«™æ ¹ç›®å½•:</p><pre class=" language-bash"><code class="language-bash">acme.sh --issue  -d clsn.io   --clsn.io</code></pre><p>å¦‚æœä½ ç”¨çš„ nginxæœåŠ¡å™¨, æˆ–è€…åä»£, acme.sh è¿˜å¯ä»¥æ™ºèƒ½çš„ä» nginxçš„é…ç½®ä¸­è‡ªåŠ¨å®ŒæˆéªŒè¯, ä½ ä¸éœ€è¦æŒ‡å®šç½‘ç«™æ ¹ç›®å½•:</p><pre class=" language-bash"><code class="language-bash">acme.sh --issue  -d clsn.io  --nginx</code></pre><p>æ³¨æ„, æ— è®ºæ˜¯ apache è¿˜æ˜¯ nginx æ¨¡å¼, acme.shåœ¨å®ŒæˆéªŒè¯ä¹‹å, ä¼šæ¢å¤åˆ°ä¹‹å‰çš„çŠ¶æ€, éƒ½ä¸ä¼šç§è‡ªæ›´æ”¹ä½ æœ¬èº«çš„é…ç½®. å¥½å¤„æ˜¯ä½ ä¸ç”¨æ‹…å¿ƒé…ç½®è¢«æåã€‚<br>è¯¥ç±»å‹çš„é…ç½®æœ‰ä¸€ä¸ªç¼ºç‚¹, ä½ éœ€è¦è‡ªå·±é…ç½® ssl çš„é…ç½®, å¦åˆ™åªèƒ½æˆåŠŸç”Ÿæˆè¯ä¹¦, ä½ çš„ç½‘ç«™è¿˜æ˜¯æ— æ³•è®¿é—®https. ä½†æ˜¯ä¸ºäº†å®‰å…¨, ä½ è¿˜æ˜¯è‡ªå·±æ‰‹åŠ¨æ”¹é…ç½®å§.<br>å¦‚æœä½ è¿˜æ²¡æœ‰è¿è¡Œä»»ä½• web æœåŠ¡, 80 ç«¯å£æ˜¯ç©ºé—²çš„, é‚£ä¹ˆ acme.sh è¿˜èƒ½å‡è£…è‡ªå·±æ˜¯ä¸€ä¸ªwebserver, ä¸´æ—¶å¬åœ¨80 ç«¯å£, å®ŒæˆéªŒè¯:</p><pre class=" language-bash"><code class="language-bash">acme.sh  --issue -d clsn.io   --standalone</code></pre><p>2.DNSæ–¹å¼API<br>dns æ–¹å¼çš„çœŸæ­£å¼ºå¤§ä¹‹å¤„åœ¨äºå¯ä»¥ä½¿ç”¨åŸŸåè§£æå•†æä¾›çš„ api è‡ªåŠ¨æ·»åŠ  txt è®°å½•å®ŒæˆéªŒè¯.<br>acme.sh ç›®å‰æ”¯æŒ cloudflare, dnspod, cloudxns, godaddy ä»¥åŠ ovh ç­‰æ•°åç§è§£æå•†çš„è‡ªåŠ¨é›†æˆ.<br>ä»¥ dnspod ä¸ºä¾‹, ä½ éœ€è¦å…ˆç™»å½•åˆ° dnspod è´¦å·, ç”Ÿæˆä½ çš„ api id å’Œ api key, éƒ½æ˜¯å…è´¹çš„. ç„¶å:</p><pre class=" language-bash"><code class="language-bash"><span class="token function">export</span> DP_Id<span class="token operator">=</span><span class="token string">"76GJHG4SG1Q"</span><span class="token function">export</span> DP_Key<span class="token operator">=</span><span class="token string">"qaEDHSJiokjhfs"</span>acme.sh   --issue   --dns dns_dp   -d clsn.io  -d www.clsn.io</code></pre><p>è¯ä¹¦å°±ä¼šè‡ªåŠ¨ç”Ÿæˆäº†. è¿™é‡Œç»™å‡ºçš„ api id å’Œ api key ä¼šè¢«è‡ªåŠ¨è®°å½•ä¸‹æ¥, å°†æ¥ä½ åœ¨ä½¿ç”¨ dnspod api çš„æ—¶å€™, å°±ä¸éœ€è¦å†æ¬¡æŒ‡å®šäº†. ç›´æ¥ç”Ÿæˆå°±å¥½äº†:</p><pre class=" language-bash"><code class="language-bash">acme.sh  --issue   -d  clsn.io   --dns  dns_dp</code></pre><h3 id="ä¸‰ã€è¯ä¹¦çš„ä½¿ç”¨"><a href="#ä¸‰ã€è¯ä¹¦çš„ä½¿ç”¨" class="headerlink" title="ä¸‰ã€è¯ä¹¦çš„ä½¿ç”¨"></a>ä¸‰ã€è¯ä¹¦çš„ä½¿ç”¨</h3><p>å‰é¢è¯ä¹¦ç”Ÿæˆä»¥å, æ¥ä¸‹æ¥éœ€è¦æŠŠè¯ä¹¦ copy åˆ°çœŸæ­£éœ€è¦ç”¨å®ƒçš„åœ°æ–¹ã€‚<br>æ³¨æ„, é»˜è®¤ç”Ÿæˆçš„è¯ä¹¦éƒ½æ”¾åœ¨å®‰è£…ç›®å½•ä¸‹: ~/.acme.sh/, è¯·ä¸è¦ç›´æ¥ä½¿ç”¨æ­¤ç›®å½•ä¸‹çš„æ–‡ä»¶,<br>ä¾‹å¦‚: ä¸è¦ç›´æ¥è®© nginx/apache çš„é…ç½®æ–‡ä»¶ä½¿ç”¨è¿™ä¸‹é¢çš„æ–‡ä»¶.<br>è¿™é‡Œé¢çš„æ–‡ä»¶éƒ½æ˜¯å†…éƒ¨ä½¿ç”¨, è€Œä¸”ç›®å½•ç»“æ„å¯èƒ½ä¼šå˜åŒ–.æ­£ç¡®çš„ä½¿ç”¨æ–¹æ³•æ˜¯ä½¿ç”¨ â€“installcert å‘½ä»¤,å¹¶æŒ‡å®šç›®æ ‡ä½ç½®, ç„¶åè¯ä¹¦æ–‡ä»¶ä¼šè¢«copyåˆ°ç›¸åº”çš„ä½ç½®, ä¾‹å¦‚:</p><pre class=" language-bash"><code class="language-bash">acme.sh  --installcert  -d  <span class="token operator">&lt;</span>domain<span class="token operator">></span>.com   \        --key-file   /etc/nginx/ssl/<span class="token operator">&lt;</span>domain<span class="token operator">></span>.key \        --fullchain-file /etc/nginx/ssl/fullchain.cer \        --reloadcmd  <span class="token string">"service nginx force-reload"</span></code></pre><p>ä»¥Nginxæ ‡å‡†é…ç½®ä¸ºä¾‹ï¼Œç”Ÿæˆçš„è¯ä¹¦æ–‡ä»¶æ¨èä½¿ç”¨ fullchain.cerï¼Œç§é’¥æ–‡ä»¶ä¸ºæ˜¯clsn.io.keyã€‚<br>Nginx çš„é…ç½® ssl_certificate ä½¿ç”¨ fullchain.cer ï¼Œè€Œé .cer ï¼Œå¦åˆ™ SSL Labs çš„æµ‹è¯•ä¼šæŠ¥ Chain issues Incomplete é”™è¯¯ã€‚<br>(1)é€šè¿‡ä¸Šè¿°ä¸­ç”Ÿæˆçš„è¯ä¹¦è·¯å¾„ä¸º/www/server/panel/vhost/cert/clsn.io/ï¼›<br>ä¿®æ”¹é…ç½®æ–‡ä»¶</p><pre class=" language-bash"><code class="language-bash">server <span class="token punctuation">{</span>        listen 443<span class="token punctuation">;</span>        server_name localhost<span class="token punctuation">;</span>        ssl on<span class="token punctuation">;</span>        root html<span class="token punctuation">;</span>        index index.html index.htm<span class="token punctuation">;</span>        ssl_certificate   /www/server/panel/vhost/cert/clsn.io/fullchain.cer<span class="token punctuation">;</span>        ssl_certificate_key  /www/server/panel/vhost/cert/clsn.io/clsn.key<span class="token punctuation">;</span>        ssl_session_timeout 5m<span class="token punctuation">;</span>        ssl_ciphers ECDHE-RSA-AES128-GCM-SHA256:ECDHE:ECDH:AES:HIGH:<span class="token operator">!</span>NULL:<span class="token operator">!</span>aNULL:<span class="token operator">!</span>MD5:<span class="token operator">!</span>ADH:<span class="token operator">!</span>RC4<span class="token punctuation">;</span>        ssl_protocols TLSv1 TLSv1.1 TLSv1.2<span class="token punctuation">;</span>        ssl_prefer_server_ciphers on<span class="token punctuation">;</span>        location / <span class="token punctuation">{</span>            root html<span class="token punctuation">;</span>            index index.html index.htm<span class="token punctuation">;</span>        <span class="token punctuation">}</span>    <span class="token punctuation">}</span></code></pre><h3 id="å››ã€æ›´æ–°"><a href="#å››ã€æ›´æ–°" class="headerlink" title="å››ã€æ›´æ–°"></a>å››ã€æ›´æ–°</h3><p>ç›®å‰ç”±äº acme åè®®å’Œ letsencrypt CA éƒ½åœ¨é¢‘ç¹çš„æ›´æ–°, å› æ­¤ acme.sh ä¹Ÿç»å¸¸æ›´æ–°ä»¥ä¿æŒåŒæ­¥.<br>å‡çº§ acme.sh åˆ°æœ€æ–°ç‰ˆ :</p><pre class=" language-bash"><code class="language-bash">acme.sh --upgrade</code></pre><p>å¦‚æœä½ ä¸æƒ³æ‰‹åŠ¨å‡çº§, å¯ä»¥å¼€å¯è‡ªåŠ¨å‡çº§:</p><pre class=" language-bash"><code class="language-bash">acme.sh  --upgrade  --auto-upgrade</code></pre><p>ä¹‹å, acme.sh å°±ä¼šè‡ªåŠ¨ä¿æŒæ›´æ–°äº†.<br>ä½ ä¹Ÿå¯ä»¥éšæ—¶å…³é—­è‡ªåŠ¨æ›´æ–°:</p><pre class=" language-bash"><code class="language-bash">acme.sh --upgrade  --auto-upgrade  0</code></pre><blockquote><ul><li>å‚è€ƒæ–‡çŒ®ï¼š</li><li><ul><li><a href="https://yq.aliyun.com/articles/674835" target="_blank" rel="noopener">https://yq.aliyun.com/articles/674835</a></li></ul></li><li><ul><li><a href="https://github.com/Neilpang/acme.sh/wiki/%E8%AF%B4%E6%98%8E" target="_blank" rel="noopener">https://github.com/Neilpang/acme.sh/wiki/%E8%AF%B4%E6%98%8E</a></li></ul></li></ul></blockquote><blockquote><ul><li>ä½œè€…ï¼šæƒ¨ç»¿å°‘å¹´</li><li>å‡ºå¤„ï¼š<a href="http://clsn.io" target="_blank" rel="noopener">http://clsn.io</a></li><li>æœ¬æ–‡ç‰ˆæƒå½’ä½œè€…æ‰€æœ‰ï¼Œæ¬¢è¿è½¬è½½ï¼Œä½†æœªç»ä½œè€…åŒæ„å¿…é¡»ä¿ç•™æ­¤æ®µå£°æ˜ï¼Œä¸”åœ¨æ–‡ç« é¡µé¢æ˜æ˜¾ä½ç½®ç»™å‡ºåŸæ–‡è¿æ¥ï¼Œå¦åˆ™ä¿ç•™è¿½ç©¶æ³•å¾‹è´£ä»»çš„æƒåˆ©ã€‚</li></ul></blockquote><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> SSL </category>
          
      </categories>
      
      
        <tags>
            
            <tag> SSL </tag>
            
            <tag> https </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä¹¦å•æ¨è</title>
      <link href="/2019/10/14/books/"/>
      <url>/2019/10/14/books/</url>
      
        <content type="html"><![CDATA[<blockquote><ul><li>åºè¨€ï¼šæœ¬äººæŒºå–œæ¬¢çœ‹ä¹¦çš„ï¼Œåªæ˜¯æœ‰æ—¶å€™æ²¡æ—¶é—´çœ‹ï¼Œæˆ–è€…æ²¡æœ‰é™ä¸‹å¿ƒæ¥çœ‹ï¼Œä¸è¿‡å€’æ˜¯æ”¶é›†äº†ä¸å°‘ä¹¦ï¼Œä»¥åæœ‰æ—¶é—´äº†é™ä¸‹å¿ƒæ¥æ…¢æ…¢çœ‹ï¼Œæ”¶è—ä¹Ÿæ˜¯ä¸€ç§è‰ºæœ¯ã€‚å¦‚æœæœ‰ä¸é”™çš„ä¹¦ç±ï¼Œå¯ä»¥é€šè¿‡åº•éƒ¨çš„è”ç³»æ–¹å¼æ¨èç»™æˆ‘ã€‚</li></ul></blockquote><h3 id="å†å²ç±»"><a href="#å†å²ç±»" class="headerlink" title="å†å²ç±»"></a>å†å²ç±»</h3><p>ã€Šæ¯›æ‰¹ä¸‰å›½æ¼”ä¹‰ã€‹ã€ã€Šäººç±»ç®€å²ã€‹ã€ã€Šå¹³å‡¡çš„ä¸–ç•Œã€‹ã€ã€Šæ°´æµ’ä¼ ã€‹ã€ã€Šå­™å­å…µæ³•ã€‹ã€ã€Šä¸‡å†åäº”å¹´ã€‹ã€ã€Šæ˜æœé‚£äº›äº‹å„¿ã€‹ã€ã€Šç™½é¹¿åŸã€‹</p><h3 id="æ–‡å­¦ç±»"><a href="#æ–‡å­¦ç±»" class="headerlink" title="æ–‡å­¦ç±»"></a>æ–‡å­¦ç±»</h3><p>ã€Šç™¾å¹´å­¤ç‹¬ã€‹ã€ã€Šå›´åŸã€‹ã€ã€Šäºä¸¹è®ºè¯­å¿ƒå¾—ã€‹ã€ã€Šäº†ä¸èµ·çš„ç›–èŒ¨æ¯”ã€‹ã€ã€Šè‹è²çš„ä¸–ç•Œã€‹ã€ã€Šå°ç‹å­ã€‹ã€ã€Šç“¦å°”ç™»æ¹–ã€‹ã€ã€Šæ‚²æƒ¨ä¸–ç•Œã€‹ã€ã€Šä¸–è¯´æ–°è¯­ã€‹ã€ã€Šè€äººä¸æµ·ã€‹</p><h3 id="ç§‘å¹»ç±»"><a href="#ç§‘å¹»ç±»" class="headerlink" title="ç§‘å¹»ç±»"></a>ç§‘å¹»ç±»</h3><p>ã€Šä¸‰ä½“ã€‹ã€ã€Šæ—¶é—´ç®€å²ã€‹ã€</p><h3 id="å¿ƒé‡Œç±»"><a href="#å¿ƒé‡Œç±»" class="headerlink" title="å¿ƒé‡Œç±»"></a>å¿ƒé‡Œç±»</h3><p>ã€Šä¹Œåˆä¹‹ä¼—ã€‹ã€ã€Šäººæ€§çš„å¼±ç‚¹ã€‹</p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> éšç¬” </category>
          
      </categories>
      
      
        <tags>
            
            <tag> éšç¬” </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Mysqlå¸¸ç”¨å‘½ä»¤</title>
      <link href="/2019/10/14/mysql/"/>
      <url>/2019/10/14/mysql/</url>
      
        <content type="html"><![CDATA[<h3 id="1-åˆ›å»ºç”¨æˆ·"><a href="#1-åˆ›å»ºç”¨æˆ·" class="headerlink" title="1.åˆ›å»ºç”¨æˆ·"></a>1.åˆ›å»ºç”¨æˆ·</h3><pre class=" language-bash"><code class="language-bash">CREATE USER <span class="token string">'username'</span>@<span class="token string">'host'</span> IDENTIFIED BY <span class="token string">'password'</span><span class="token punctuation">;</span></code></pre><p>username:ç”¨æˆ·åï¼›hostï¼šæŒ‡å®šåœ¨å“ªä¸ªä¸»æœºä¸Šå¯ä»¥ç™»å½•ï¼Œæœ¬æœºå¯ç”¨localhostï¼Œ%é€šé…æ‰€æœ‰è¿œç¨‹ä¸»æœºï¼›passwordï¼šç”¨æˆ·ç™»å½•å¯†ç ï¼›</p><h3 id="2-æˆæƒ"><a href="#2-æˆæƒ" class="headerlink" title="2.æˆæƒ"></a>2.æˆæƒ</h3><pre class=" language-bash"><code class="language-bash">grant all privileges on *.* to root@<span class="token string">'%'</span> IDENTIFIED BY <span class="token string">"password"</span><span class="token punctuation">;</span>  FLUSH PRIVILEGES<span class="token punctuation">;</span></code></pre><p>æ ¼å¼ï¼šgrant æƒé™ on æ•°æ®åº“å.è¡¨å to ç”¨æˆ·@ç™»å½•ä¸»æœº identified by â€œç”¨æˆ·å¯†ç â€ï¼›<em>.</em>ä»£è¡¨æ‰€æœ‰æƒï¼›@ åé¢æ˜¯è®¿é—®MySQLçš„å®¢æˆ·ç«¯IPåœ°å€ï¼ˆæˆ–æ˜¯ ä¸»æœºåï¼‰ % ä»£è¡¨ä»»æ„çš„å®¢æˆ·ç«¯ï¼Œå¦‚æœå¡«å†™ localhost ä¸ºæœ¬åœ°è®¿é—®ï¼ˆé‚£æ­¤ç”¨æˆ·å°±ä¸èƒ½è¿œç¨‹è®¿é—®è¯¥mysqlæ•°æ®åº“äº†ï¼‰ã€‚</p><h3 id="3-åŸºç¡€å‘½ä»¤"><a href="#3-åŸºç¡€å‘½ä»¤" class="headerlink" title="3.åŸºç¡€å‘½ä»¤"></a>3.åŸºç¡€å‘½ä»¤</h3><pre class=" language-bash"><code class="language-bash">åˆ›å»ºæ•°æ®åº“ï¼šcreate database testdatabases<span class="token punctuation">;</span>åˆ é™¤æ•°æ®åº“ ï¼šdrop database testdatabases<span class="token punctuation">;</span>æŸ¥çœ‹æ•°æ®åº“ï¼šshow databases<span class="token punctuation">;</span>æ‰“å¼€æ•°æ®åº“ï¼šuse databases<span class="token punctuation">;</span>æŸ¥çœ‹è¡¨ï¼šshow tables<span class="token punctuation">;</span>æŸ¥çœ‹å½“å‰æ‰€åœ¨åº“ï¼šselect database<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>æŸ¥çœ‹æ•°æ®åº“ç‰ˆæœ¬ï¼šselect version<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>æŸ¥çœ‹æ•°æ®åº“æ‰€æœ‰ç”¨æˆ·ï¼šselect user,host from mysql.user<span class="token punctuation">;</span>åˆ é™¤ç”¨æˆ·ï¼šdrop user test@localhost <span class="token punctuation">;</span>æˆäºˆç”¨æˆ·â€œtestâ€é€šè¿‡å¤–ç½‘IPå¯¹äºè¯¥æ•°æ®åº“â€œtestdbâ€ä¸­è¡¨çš„åˆ›å»ºã€ä¿®æ”¹ã€åˆ é™¤æƒé™,ä»¥åŠè¡¨æ•°æ®çš„å¢åˆ æŸ¥æ”¹æƒé™ï¼šgrant create,alter,drop,select,insert,update,delete on testdb.* to test@<span class="token string">'%'</span><span class="token punctuation">;</span> </code></pre><h3 id="4-è¡¨æ’å…¥æ•°æ®"><a href="#4-è¡¨æ’å…¥æ•°æ®" class="headerlink" title="4.è¡¨æ’å…¥æ•°æ®"></a>4.è¡¨æ’å…¥æ•°æ®</h3><pre class=" language-bash"><code class="language-bash">æ’å…¥ä¸€ä¸ªnameå­—æ®µï¼šinsert into table <span class="token punctuation">(</span><span class="token variable"><span class="token variable">`</span>name<span class="token variable">`</span></span><span class="token punctuation">)</span> values<span class="token punctuation">(</span><span class="token string">'55'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>æ’å…¥ä¸€ä¸ªå­—æ®µidï¼š insert into table <span class="token punctuation">(</span><span class="token variable"><span class="token variable">`</span><span class="token function">id</span><span class="token variable">`</span></span><span class="token punctuation">)</span> values<span class="token punctuation">(</span>3<span class="token punctuation">)</span><span class="token punctuation">;</span>æ’å…¥ä¸€è¡Œï¼šinsert into table values<span class="token punctuation">(</span>1,<span class="token string">'gz'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>æ›´æ–°æŸè¡Œï¼ˆä¿®æ”¹ï¼‰ï¼šupdate table <span class="token keyword">set</span> id<span class="token operator">=</span>5 where name<span class="token operator">=</span><span class="token string">'55'</span><span class="token punctuation">;</span>åˆ é™¤åˆ¶å®šè¡Œï¼šdelete from table where name<span class="token operator">=</span><span class="token string">'55'</span><span class="token punctuation">;</span></code></pre><p>å‘½ä»¤ï¼šinsert into &lt;è¡¨å&gt; [( &lt;å­—æ®µå1&gt;[,..&lt;å­—æ®µån &gt; ])] values ( å€¼1 )[, ( å€¼n )]<br>æ³¨æ„ï¼šinsert intoæ¯æ¬¡åªèƒ½å‘è¡¨ä¸­æ’å…¥ä¸€æ¡è®°å½•ã€‚</p><h3 id="5-æŸ¥è¯¢è¡¨ä¸­çš„æ•°æ®"><a href="#5-æŸ¥è¯¢è¡¨ä¸­çš„æ•°æ®" class="headerlink" title="5.æŸ¥è¯¢è¡¨ä¸­çš„æ•°æ®"></a>5.æŸ¥è¯¢è¡¨ä¸­çš„æ•°æ®</h3><pre class=" language-bash"><code class="language-bash">æŸ¥çœ‹è¡¨ä¸­æ‰€æœ‰æ•°æ®ï¼šselect * from table<span class="token punctuation">;</span>æŸ¥çœ‹è¡¨ä¸­å‰2è¡Œæ•°æ®ï¼šselect * from table order by <span class="token function">id</span> limit 0,2<span class="token punctuation">;</span>åˆ é™¤è¡¨ä¸­ç¼–å·ä¸º1çš„è®°å½•ï¼šdelete from table where id<span class="token operator">=</span>1<span class="token punctuation">;</span></code></pre><h3 id="6-æ›´æ”¹æ•°æ®åº“ç”¨æˆ·å¯†ç "><a href="#6-æ›´æ”¹æ•°æ®åº“ç”¨æˆ·å¯†ç " class="headerlink" title="6.æ›´æ”¹æ•°æ®åº“ç”¨æˆ·å¯†ç "></a>6.æ›´æ”¹æ•°æ®åº“ç”¨æˆ·å¯†ç </h3><p>5.7ç‰ˆæœ¬ä¸‹çš„mysqlæ•°æ®åº“ä¸‹å·²ç»æ²¡æœ‰passwordè¿™ä¸ªå­—æ®µäº†ï¼Œpasswordå­—æ®µæ”¹æˆäº†authentication_string</p><pre class=" language-bash"><code class="language-bash">ç»ˆç«¯å‘½ä»¤ï¼šmysqladmin -u root password â€œå¯†ç â€æ•°æ®åº“å‘½ä»¤ï¼šupdate user <span class="token keyword">set</span> password<span class="token operator">=</span>password<span class="token punctuation">(</span><span class="token string">'123456'</span><span class="token punctuation">)</span> where user<span class="token operator">=</span><span class="token string">'root'</span><span class="token punctuation">;</span>5.7ç‰ˆæœ¬æ•°æ®åº“ï¼šupdate user <span class="token keyword">set</span> authentication_string<span class="token operator">=</span>password<span class="token punctuation">(</span><span class="token string">'123456'</span><span class="token punctuation">)</span> where user<span class="token operator">=</span><span class="token string">'root'</span><span class="token punctuation">;</span></code></pre><h3 id="7-å¤‡ä»½æ•°æ®åº“å‘½ä»¤"><a href="#7-å¤‡ä»½æ•°æ®åº“å‘½ä»¤" class="headerlink" title="7.å¤‡ä»½æ•°æ®åº“å‘½ä»¤"></a>7.å¤‡ä»½æ•°æ®åº“å‘½ä»¤</h3><pre class=" language-bash"><code class="language-bash">å¯¼å…¥æ•°æ®åº“sqlæ–‡ä»¶ï¼šmysql -uç”¨æˆ·å -p æ•°æ®åº“å <span class="token operator">&lt;</span> å¯¼å…¥æ–‡ä»¶å.sqlå¯¼å‡ºæ•°æ®åº“ï¼šmysqldump -uç”¨æˆ·å -på¯†ç  æ•°æ®åº“å <span class="token operator">></span> æ•°æ®åº“å.sqlMySqlçš„å¤‡ä»½æ•°æ®åº“å‘½ä»¤ï¼šmysqldump -h ä¸»æœº -uæ•°æ®æˆ·ç”¨æˆ·å -pæ•°æ®åº“å¯†ç  æ•°æ®åº“ <span class="token operator">></span> bak.sqlMySqlè¿˜åŸæ¢å¤æ•°æ®åº“å‘½ä»¤ï¼šmysql -h ä¸»æœº -uæ•°æ®æˆ·ç”¨æˆ·å -pæ•°æ®åº“å¯†ç  æ•°æ®åº“ <span class="token operator">&lt;</span> bak.sqlæŒ‰æ—¥æœŸå¯¼å‡ºæ•°æ®åº“åˆ°æŒ‡å®šæ–‡ä»¶å¤¹ï¼š30 5 * * * mysqldump -uroot -p password database<span class="token operator">></span>/data/backup`date <span class="token string">"+%Y%m%d"</span>`.sql</code></pre><h3 id="8-è¿œç¨‹æ“ä½œæ•°æ®åº“"><a href="#8-è¿œç¨‹æ“ä½œæ•°æ®åº“" class="headerlink" title="8.è¿œç¨‹æ“ä½œæ•°æ®åº“"></a>8.è¿œç¨‹æ“ä½œæ•°æ®åº“</h3><p>æ ¼å¼ï¼šmysqldump -hä¸»æœºå -Pç«¯å£ -uç”¨æˆ·å -på¯†ç  â€“database æ•°æ®åº“å &gt; æ–‡ä»¶å.sql</p><pre class=" language-bash"><code class="language-bash">ä¾‹å¦‚ï¼šmysqldump -h 192.168.1.100 -p 3306 -uroot -ppassword --database cmdb <span class="token operator">></span> /data/backup/cmdb.sql</code></pre><p>å¯¼å‡ºçš„æ•°æ®æœ‰å¯èƒ½æ¯”è¾ƒå¤§ï¼Œä¸å¥½å¤‡ä»½åˆ°è¿œç¨‹ï¼Œè¿™æ—¶å€™å°±éœ€è¦è¿›è¡Œå‹ç¼©<br>æ ¼å¼ï¼šmysqldump -hä¸»æœºå -Pç«¯å£ -uç”¨æˆ·å -på¯†ç  â€“database æ•°æ®åº“å | gzip &gt; æ–‡ä»¶å.sql.gz</p><pre class=" language-bash"><code class="language-bash">ä¾‹å¦‚ï¼šmysqldump -h192.168.1.100 -p 3306 -uroot -ppassword --database cmdb <span class="token operator">|</span> <span class="token function">gzip</span> <span class="token operator">></span> /data/backup/cmdb.sql.gz</code></pre><p>å¤‡ä»½æ•°æ®åº“ç»“æ„ï¼Œä¸å¤‡ä»½æ•°æ®<br>æ ¼å¼ï¼šmysqldump -hä¸»æœºå -Pç«¯å£ -uç”¨æˆ·å -på¯†ç  â€“no-data æ•°æ®åº“å1 æ•°æ®åº“å2 æ•°æ®åº“å3 &gt; æ–‡ä»¶å.sql</p><pre class=" language-bash"><code class="language-bash">ä¾‹å¦‚ï¼šmysqldump --no-data â€“databases db1 db2 cmdb <span class="token operator">></span> /data/backup/structure.sql</code></pre><p>å¤‡ä»½å®ä¾‹ä¸Šæ‰€æœ‰çš„æ•°æ®åº“<br>æ ¼å¼ï¼šmysqldump -hä¸»æœºå -Pç«¯å£ -uç”¨æˆ·å -på¯†ç  â€“all-databases &gt; æ–‡ä»¶å.sql</p><pre class=" language-bash"><code class="language-bash">ä¾‹å¦‚ï¼šmysqldump -h192.168.1.100 -p3306 -uroot -ppassword --all-databases <span class="token operator">></span> /data/backup/all_db.sql</code></pre><p>å¤‡ä»½åŒä¸ªåº“å¤šä¸ªè¡¨<br>æ ¼å¼ï¼šmysqldump -hä¸»æœºå -Pç«¯å£ -uç”¨æˆ·å -på¯†ç  â€“database æ•°æ®åº“å è¡¨1 è¡¨2 â€¦. &gt; æ–‡ä»¶å.sql</p><pre class=" language-bash"><code class="language-bash">ä¾‹å¦‚ï¼šmysqldump -h192.168.1.100 -p3306 -uroot -ppassword cmdb t1 t2 <span class="token operator">></span> /data/backup/cmdb_t1_t2.sql</code></pre><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> Mysql </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Mysql </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Drone ci for Gitea cicdå·¥ä½œæµ</title>
      <link href="/2019/10/14/cicd/"/>
      <url>/2019/10/14/cicd/</url>
      
        <content type="html"><![CDATA[<blockquote><ul><li>Giteaå®˜ç½‘ <a href="https://docs.gitea.io" target="_blank" rel="noopener">https://docs.gitea.io</a></li><li>Gitea æ˜¯ä¸€ä¸ªå¼€æºç¤¾åŒºé©±åŠ¨çš„è½»é‡çº§ä»£ç æ‰˜ç®¡è§£å†³æ–¹æ¡ˆ,ä»–æ˜¯ä»Gogså‘å±•è€Œæ¥</li><li>Droneå®˜ç½‘ <a href="https://docs.drone.io" target="_blank" rel="noopener">https://docs.drone.io</a> </li><li>Droneæ˜¯ä¸€ç§åŸºäºå®¹å™¨æŠ€æœ¯çš„æŒç»­äº¤ä»˜ç³»ç»Ÿã€‚Droneä½¿ç”¨ç®€å•çš„YAMLé…ç½®æ–‡ä»¶ï¼ˆdocker-composeçš„è¶…é›†ï¼‰æ¥å®šä¹‰å’Œæ‰§è¡ŒDockerå®¹å™¨ä¸­çš„Pipelinesã€‚Droneä¸æµè¡Œçš„æºä»£ç ç®¡ç†ç³»ç»Ÿæ— ç¼é›†æˆï¼ŒåŒ…æ‹¬GitHubï¼ŒGitLab, Enterpriseï¼ŒBitbucket,gogs,giteaç­‰ã€‚</li></ul></blockquote><h3 id="ä¸€ã€å®‰è£…gitea"><a href="#ä¸€ã€å®‰è£…gitea" class="headerlink" title="ä¸€ã€å®‰è£…gitea"></a>ä¸€ã€å®‰è£…gitea</h3><p>ä»giteaå®˜ç½‘ä¸‹è½½å®‰è£…æ–‡ä»¶ <a href="https://docs.gitea.io" target="_blank" rel="noopener">https://docs.gitea.io</a> å¯ä»¥ä¸‹è½½æœ€æ–°ç‰ˆæœ¬ï¼Œæˆ‘è¿™é‡Œæ˜¯1.9.2ç‰ˆæœ¬</p><h5 id="1-ä»äºŒè¿›åˆ¶å®‰è£…"><a href="#1-ä»äºŒè¿›åˆ¶å®‰è£…" class="headerlink" title="1.ä»äºŒè¿›åˆ¶å®‰è£…"></a>1.ä»äºŒè¿›åˆ¶å®‰è£…</h5><pre class=" language-bash"><code class="language-bash">$ <span class="token function">wget</span> -O gitea https://dl.gitea.io/gitea/1.9.2/gitea-1.9.2-linux-amd64$ <span class="token function">chmod</span> +x gitea$ ./gitea web</code></pre><p>å¯åŠ¨giteaåï¼Œåœ¨æµè§ˆå™¨æ‰“å¼€è¿æ¥: <a href="http://localhost:3000" target="_blank" rel="noopener">http://localhost:3000</a> è¿›è¡Œé…ç½®ã€‚é…ç½®æ–‡ä»¶å­˜åœ¨custom/conf/app.iniã€‚</p><h5 id="2-ä»dockerå®‰è£…"><a href="#2-ä»dockerå®‰è£…" class="headerlink" title="2.ä»dockerå®‰è£…"></a>2.ä»dockerå®‰è£…</h5><ul><li>docker ç›´æ¥å¯åŠ¨å®‰è£…<br>é¦–å…ˆä½ éœ€è¦pullé•œåƒï¼š<pre class=" language-bash"><code class="language-bash">$ docker pull gitea/gitea:1.9.2</code></pre>å¦‚æœè¦å°†gitå’Œå…¶å®ƒæ•°æ®æŒä¹…åŒ–ï¼Œä½ éœ€è¦åˆ›å»ºä¸€ä¸ªç›®å½•æ¥ä½œä¸ºæ•°æ®å­˜å‚¨çš„åœ°æ–¹ï¼š<pre class=" language-bash"><code class="language-bash">$ <span class="token function">sudo</span> <span class="token function">mkdir</span> -p /var/lib/gitea</code></pre>ç„¶åå°±å¯ä»¥è¿è¡Œ docker å®¹å™¨äº†ï¼Œè¿™å¾ˆç®€å•ã€‚ å½“ç„¶ä½ éœ€è¦å®šä¹‰ç«¯å£æ•°æ•°æ®ç›®å½•ï¼š<pre><code>$ docker run -d --name=gitea -p 10022:22 -p 10080:3000 -v /var/lib/gitea:/data gitea/gitea:1.9.2</code></pre>ç„¶åå®¹å™¨å·²ç»è¿è¡ŒæˆåŠŸï¼Œåœ¨æµè§ˆå™¨ä¸­è®¿é—® <a href="http://hostname:10080" target="_blank" rel="noopener">http://hostname:10080</a> å°±å¯ä»¥çœ‹åˆ°ç•Œé¢äº†ã€‚<br>æ³¨æ„ï¼šç›®å‰ç«¯å£æ”¹ä¸ºé3000æ—¶ï¼Œéœ€è¦ä¿®æ”¹é…ç½®æ–‡ä»¶ LOCAL_ROOT_URL = <a href="http://localhost:3000/" target="_blank" rel="noopener">http://localhost:3000/</a></li><li>docker-composeå®‰è£…<br>ç¼–è¾‘docker-composeræ–‡ä»¶<pre class=" language-yaml"><code class="language-yaml">$ vim gitea.yml<span class="token key atrule">version</span><span class="token punctuation">:</span> <span class="token string">"3.7"</span><span class="token key atrule">networks</span><span class="token punctuation">:</span><span class="token key atrule">gitea</span><span class="token punctuation">:</span>  <span class="token key atrule">external</span><span class="token punctuation">:</span> <span class="token boolean important">false</span><span class="token key atrule">services</span><span class="token punctuation">:</span><span class="token key atrule">server</span><span class="token punctuation">:</span>  <span class="token key atrule">image</span><span class="token punctuation">:</span> gitea/gitea<span class="token punctuation">:</span>1.9.2  <span class="token key atrule">environment</span><span class="token punctuation">:</span>    <span class="token punctuation">-</span> USER_UID=1000    <span class="token punctuation">-</span> USER_GID=1000  <span class="token key atrule">restart</span><span class="token punctuation">:</span> always  <span class="token key atrule">networks</span><span class="token punctuation">:</span>    <span class="token punctuation">-</span> gitea  <span class="token key atrule">volumes</span><span class="token punctuation">:</span>    <span class="token punctuation">-</span> ./data<span class="token punctuation">:</span>/data  <span class="token key atrule">ports</span><span class="token punctuation">:</span>    <span class="token punctuation">-</span> <span class="token string">"3000:3000"</span>    <span class="token punctuation">-</span> <span class="token string">"222:22"</span></code></pre>å¯åŠ¨ã€åœæ­¢æ–¹å¼<pre class=" language-bash"><code class="language-bash">$ docker-compose -f gitea.yml up -d$ docker-compose -f gitea.yml down</code></pre>ç„¶åå®¹å™¨å·²ç»è¿è¡ŒæˆåŠŸï¼Œåœ¨æµè§ˆå™¨ä¸­è®¿é—® <a href="http://hostname:3000" target="_blank" rel="noopener">http://hostname:3000</a> å°±å¯ä»¥çœ‹åˆ°ç•Œé¢äº†ã€‚</li></ul><h3 id="äºŒã€å®‰è£…Drone"><a href="#äºŒã€å®‰è£…Drone" class="headerlink" title="äºŒã€å®‰è£…Drone"></a>äºŒã€å®‰è£…Drone</h3><p>ç¼–è¾‘docker-composeæ–‡ä»¶ï¼Œâ€™vim drone.ymlâ€™</p><pre class=" language-yaml"><code class="language-yaml"><span class="token key atrule">version</span><span class="token punctuation">:</span> <span class="token string">"3.7"</span><span class="token key atrule">services</span><span class="token punctuation">:</span>  <span class="token key atrule">drone-server</span><span class="token punctuation">:</span>    <span class="token key atrule">image</span><span class="token punctuation">:</span> drone/drone<span class="token punctuation">:</span><span class="token number">1.4</span>    <span class="token key atrule">container_name</span><span class="token punctuation">:</span> drone_server    <span class="token key atrule">ports</span><span class="token punctuation">:</span>    <span class="token punctuation">-</span> <span class="token string">"8000:80"</span>    <span class="token punctuation">-</span> <span class="token string">"8443:443"</span>    <span class="token key atrule">environment</span><span class="token punctuation">:</span>      <span class="token punctuation">-</span> DRONE_OPEN=true      <span class="token punctuation">-</span> DRONE_GITEA=true      <span class="token punctuation">-</span> DRONE_DEBUG=true      <span class="token punctuation">-</span> DRONE_PROVIDER=gitea      <span class="token punctuation">-</span> DRONE_RUNNER_CAPACITY=2      <span class="token punctuation">-</span> DRONE_GIT_ALWAYS_AUTH=true      <span class="token punctuation">-</span> DRONE_SERVER_HOST=drone.company.com <span class="token comment" spellcheck="true">#droneçš„è®¿é—®åœ°å€</span>      <span class="token punctuation">-</span> DRONE_AGENTS_ENABLED=true      <span class="token punctuation">-</span> DRONE_GITEA_SERVER=https<span class="token punctuation">:</span>//try.gitea.io  <span class="token comment" spellcheck="true">#giteaçš„è®¿é—®åœ°å€</span>      <span class="token punctuation">-</span> DRONE_GITEA_CLIENT_ID=6522e99d<span class="token punctuation">-</span>1adb<span class="token punctuation">-</span>4ac1<span class="token punctuation">-</span>bf79<span class="token punctuation">-</span>e1b9bf3b9974  <span class="token comment" spellcheck="true">#giteaçš„å®¢æˆ·ç«¯ID</span>      <span class="token punctuation">-</span> DRONE_GITEA_CLIENT_SECRET=WF1o3cgAWQ2Nz7JgAma<span class="token punctuation">-</span>1M<span class="token punctuation">-</span>qC5EuNyXubtw7AaTZk90=  <span class="token comment" spellcheck="true">#giteaçš„å®¢æˆ·ç«¯å¯†é’¥</span>      <span class="token punctuation">-</span> DRONE_GITEA_SKIP_VERIFY=false      <span class="token punctuation">-</span> DRONE_SERVER_PROTO=http      <span class="token punctuation">-</span> DRONE_TLS_AUTOCERT=false      <span class="token punctuation">-</span> DRONE_GIT_USERNAME=test  <span class="token comment" spellcheck="true">#ä¸€èˆ¬ä¸ºgiteaè´¦å·</span>      <span class="token punctuation">-</span> DRONE_GIT_PASSWORD=123456       <span class="token punctuation">-</span> DRONE_RPC_SECRET=37a18ef42683494a67de20c87ac2d773      <span class="token punctuation">-</span> DRONE_LOGS_DEBUG=true      <span class="token punctuation">-</span> DRONE_DATABASE_DRIVER=mysql <span class="token comment" spellcheck="true">#mysqlæ•°æ®åº“è¿æ¥æ–¹å¼(ä¸¤è€…é€‰å…¶ä¸€)</span>      <span class="token punctuation">-</span> DRONE_DATABASE_DATASOURCE=gitea<span class="token punctuation">:</span>password@tcp(localhost<span class="token punctuation">:</span>3306)/drone       <span class="token comment" spellcheck="true">#- DRONE_DATABASE_DRIVER=mysql #sqliteæ•°æ®åº“</span>      <span class="token comment" spellcheck="true">#- DRONE_DATABASE_DATASOURCE=/data/database.sqlite </span>      <span class="token punctuation">-</span> DRONE_USER_CREATE=username<span class="token punctuation">:</span>tfzxyinhao<span class="token punctuation">,</span>xiaolu<span class="token punctuation">,</span>dmin<span class="token punctuation">:</span><span class="token boolean important">true </span><span class="token comment" spellcheck="true">#è®¾ç½®droneç®¡ç†å‘˜è´¦å·</span>    <span class="token key atrule">restart</span><span class="token punctuation">:</span> always    <span class="token key atrule">volumes</span><span class="token punctuation">:</span>    <span class="token punctuation">-</span> /var/run/docker.sock<span class="token punctuation">:</span>/var/run/docker.sock    <span class="token punctuation">-</span> /var/lib/drone_1.4<span class="token punctuation">:</span>/data  <span class="token key atrule">drone-agent</span><span class="token punctuation">:</span>    <span class="token key atrule">image</span><span class="token punctuation">:</span> drone/agent<span class="token punctuation">:</span><span class="token number">1.4</span>    <span class="token key atrule">container_name</span><span class="token punctuation">:</span> drone_agent    <span class="token key atrule">ports</span><span class="token punctuation">:</span>    <span class="token punctuation">-</span> <span class="token string">"3000:3000"</span>    <span class="token key atrule">depends_on</span><span class="token punctuation">:</span>    <span class="token punctuation">-</span> drone<span class="token punctuation">-</span>server    <span class="token key atrule">restart</span><span class="token punctuation">:</span> always    <span class="token key atrule">environment</span><span class="token punctuation">:</span>      <span class="token punctuation">-</span> DRONE_RPC_PROTO=http      <span class="token punctuation">-</span> DRONE_RPC_HOST=drone.company.com      <span class="token punctuation">-</span> DRONE_RPC_SECRET=37a18ef42683494a67de20c87ac2d773      <span class="token punctuation">-</span> DRONE_RUNNER_CAPACITY=2      <span class="token punctuation">-</span> DRONE_LOGS_DEBUG=true      <span class="token punctuation">-</span> DRONE_DEBUG=true      <span class="token punctuation">-</span> DRONE_LOGS_PRETTY=true      <span class="token punctuation">-</span> DRONE_LOGS_NOCOLOR=false    <span class="token key atrule">volumes</span><span class="token punctuation">:</span>    <span class="token punctuation">-</span> /var/run/docker.sock<span class="token punctuation">:</span>/var/run/docker.sock</code></pre><p>å¯åŠ¨ã€åœæ­¢drone</p><pre class=" language-bash"><code class="language-bash">$ docker-compose -f drone.yml up -d$ docker-compose -f drone.yml down</code></pre><p><img src="/2019/10/14/cicd/ceshi.png" alt=""><br>ç„¶åå®¹å™¨å·²ç»è¿è¡ŒæˆåŠŸï¼Œåœ¨æµè§ˆå™¨ä¸­è®¿é—® <a href="http://hostname:8000" target="_blank" rel="noopener">http://hostname:8000</a> å°±å¯ä»¥çœ‹åˆ°ç•Œé¢äº†ã€‚<br>é€šè¿‡giteaè®¤è¯ç™»å½•è¿›å»ï¼Œä¼šè‡ªåŠ¨åŒæ­¥ä»“åº“</p><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> CI/CD </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æŒç»­é›†æˆ </tag>
            
            <tag> CI/CD </tag>
            
            <tag> Gitea </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>gitå‡çº§åˆ°æŒ‡å®šç‰ˆæœ¬</title>
      <link href="/2019/10/14/git/"/>
      <url>/2019/10/14/git/</url>
      
        <content type="html"><![CDATA[<blockquote><ul><li>ç³»ç»ŸCentos 7.2</li><li>Gitç‰ˆæœ¬å‡çº§ï¼ˆæŸ¥çœ‹ç‰ˆæœ¬ä¿¡æ¯ git versionï¼‰</li><li>æ—§ç‰ˆæœ¬ï¼šgit version 1.8.3</li><li>æ–°ç‰ˆæœ¬ï¼šgit version 2.2.1</li></ul></blockquote><h3 id="ä¸€ã€å®‰è£…ä¾èµ–åŒ…ï¼š"><a href="#ä¸€ã€å®‰è£…ä¾èµ–åŒ…ï¼š" class="headerlink" title="ä¸€ã€å®‰è£…ä¾èµ–åŒ…ï¼š"></a>ä¸€ã€å®‰è£…ä¾èµ–åŒ…ï¼š</h3><p>1ã€ä¸‹è½½å®‰è£… libiconv-1.14.tar.gz</p><pre class=" language-bash"><code class="language-bash">$ <span class="token function">wget</span>  http://ftp.gnu.org/pub/gnu/libiconv/libiconv-1.14.tar.gz$ <span class="token function">tar</span> zxvf libiconv-1.14.tar.gz$ <span class="token function">cd</span> libiconv-1.14$ ./configure --prefix<span class="token operator">=</span>/usr/local/libiconv$ <span class="token function">make</span> <span class="token operator">&amp;&amp;</span> <span class="token function">make</span> <span class="token function">install</span></code></pre><p>2ã€yumå®‰è£…ä¾èµ–åŒ…</p><pre class=" language-bash"><code class="language-bash">$ yum <span class="token function">install</span> -y zlib-devel curl-devel openssl-devel perl cpio expat-devel gettext-devel openssl zlib autoconf tk asciidoc gcc perl-ExtUtils-MakeMaker tcl xmlto</code></pre><p>æ³¨ï¼šasciidocå¦‚æœæ— æ³•é€šè¿‡yumå®‰è£…ï¼Œè¯·ä¸‹è½½åŒ…ï¼Œç¼–è¯‘å®‰è£…</p><pre class=" language-bash"><code class="language-bash">$ <span class="token function">wget</span> --no-check-certificate https://jaist.dl.sourceforge.net/project/asciidoc/asciidoc/8.6.9/asciidoc-8.6.9.zip$ unzip asciidoc-8.6.9.zip$ <span class="token function">cd</span> asciidoc-8.6.9$ ./configure$ nake <span class="token operator">&amp;&amp;</span> <span class="token function">make</span> <span class="token function">install</span></code></pre><h3 id="äºŒã€å®‰è£…æ–°ç‰ˆgitåŒ…"><a href="#äºŒã€å®‰è£…æ–°ç‰ˆgitåŒ…" class="headerlink" title="äºŒã€å®‰è£…æ–°ç‰ˆgitåŒ…"></a>äºŒã€å®‰è£…æ–°ç‰ˆgitåŒ…</h3><p>ä» <a href="https://github.com/git/git/releases" target="_blank" rel="noopener">https://github.com/git/git/releases</a> ä¸‹è½½æœ€æ–°ç¨³å®šç‰ˆçš„zipåŒ…æˆ–è€…tar.gzå¹¶è§£å‹ã€‚<br>ä»¥ tar.gz æ ¼å¼ä¸ºä¾‹ï¼ˆåœ¨ç½‘é¡µçš„ tar.gz ä¸Šå³é”®å¤åˆ¶ä¸‹è½½é“¾æ¥å³å¯ï¼‰</p><pre class=" language-bash"><code class="language-bash">$ <span class="token function">wget</span> https://github.com/git/git/archive/v2.2.1.tar.gz$ <span class="token function">tar</span> zxvf v2.2.1.tar.gz$ <span class="token function">cd</span> git-2.2.1$ <span class="token function">make</span> configure$ ./configure --prefix<span class="token operator">=</span>/usr/local/git --with-iconv<span class="token operator">=</span>/usr/local/libiconv$ <span class="token function">make</span> all doc$ <span class="token function">make</span> <span class="token function">install</span> install-doc install-html$ <span class="token keyword">echo</span> <span class="token string">"export PATH=<span class="token variable">$PATH</span>:/usr/local/git/bin:/usr/local/git/libexec/git-core"</span> <span class="token operator">>></span> /etc/bashrc</code></pre><h3 id="ä¸‰ã€æŸ¥çœ‹æ–°ç‰ˆæœ¬"><a href="#ä¸‰ã€æŸ¥çœ‹æ–°ç‰ˆæœ¬" class="headerlink" title="ä¸‰ã€æŸ¥çœ‹æ–°ç‰ˆæœ¬"></a>ä¸‰ã€æŸ¥çœ‹æ–°ç‰ˆæœ¬</h3><pre class=" language-bash"><code class="language-bash">$ <span class="token function">git</span> version<span class="token function">git</span> version 2.2.1</code></pre><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> git </category>
          
      </categories>
      
      
        <tags>
            
            <tag> git </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>å…¬å…±DNSæ”¶é›†</title>
      <link href="/2019/10/13/1/"/>
      <url>/2019/10/13/1/</url>
      
        <content type="html"><![CDATA[<h4 id="Public-DNS-â˜…â˜…â˜…â˜…â˜…ï¼ˆæ¨èï¼‰"><a href="#Public-DNS-â˜…â˜…â˜…â˜…â˜…ï¼ˆæ¨èï¼‰" class="headerlink" title="Public DNS+ â˜…â˜…â˜…â˜…â˜…ï¼ˆæ¨èï¼‰"></a>Public DNS+ â˜…â˜…â˜…â˜…â˜…ï¼ˆæ¨èï¼‰</h4><ul><li>é¦–é€‰ï¼š119.29.29.29</li><li>å¤‡é€‰ï¼š182.254.116.116</li></ul><h4 id="114DNS-â˜…â˜…â˜…â˜…â˜…"><a href="#114DNS-â˜…â˜…â˜…â˜…â˜…" class="headerlink" title="114DNS â˜…â˜…â˜…â˜…â˜…"></a>114DNS â˜…â˜…â˜…â˜…â˜…</h4><p>çº¯å‡€ æ— åŠ«æŒ æ— éœ€å†å¿å—è¢«å¼ºæ‰­å»çœ‹å¹¿å‘Šæˆ–ç²—ä¿—ç½‘ç«™ä¹‹ç—›è‹¦</p><ul><li>é¦–é€‰ï¼š114.114.114.114</li><li>å¤‡é€‰ï¼š114.114.115.115<br>æ‹¦æˆª é’“é±¼ç—…æ¯’æœ¨é©¬ç½‘ç«™ å¢å¼ºç½‘é“¶ã€è¯åˆ¸ã€è´­ç‰©ã€æ¸¸æˆã€éšç§ä¿¡æ¯å®‰å…¨</li><li>é¦–é€‰ï¼š114.114.114.119</li><li>å¤‡é€‰ï¼š114.114.115.119<br>å­¦æ ¡æˆ–å®¶é•¿å¯é€‰æ‹¦æˆª è‰²æƒ…ç½‘ç«™ ä¿æŠ¤å°‘å¹´å„¿ç«¥å…å—ç½‘ç»œè‰²æƒ…å†…å®¹çš„æ¯’å®³</li><li>é¦–é€‰ï¼š114.114.114.110 </li><li>å¤‡é€‰ï¼š114.114.115.110</li></ul><h4 id="é˜¿é‡Œ-AliDNS-â˜…â˜…â˜…â˜…"><a href="#é˜¿é‡Œ-AliDNS-â˜…â˜…â˜…â˜…" class="headerlink" title="é˜¿é‡Œ AliDNS â˜…â˜…â˜…â˜…"></a>é˜¿é‡Œ AliDNS â˜…â˜…â˜…â˜…</h4><ul><li>é¦–é€‰ï¼š223.5.5.5</li><li>å¤‡é€‰ï¼š223.6.6.6</li></ul><h4 id="DNSæ´¾-â˜…â˜…â˜…â˜…"><a href="#DNSæ´¾-â˜…â˜…â˜…â˜…" class="headerlink" title="DNSæ´¾ â˜…â˜…â˜…â˜…"></a>DNSæ´¾ â˜…â˜…â˜…â˜…</h4><ul><li>é¦–é€‰ï¼ˆç”µä¿¡/ç§»åŠ¨/é“é€šï¼‰ï¼š101.226.4.6</li><li>å¤‡é€‰ï¼ˆç”µä¿¡/ç§»åŠ¨/é“é€šï¼‰ï¼š218.30.118.6</li><li>é¦–é€‰ï¼ˆè”é€šï¼‰ï¼š123.125.81.6</li><li>å¤‡é€‰ï¼ˆè”é€šï¼‰ï¼š140.207.198.6</li></ul><h4 id="ç™¾åº¦-BaiduDNS-â˜…â˜…â˜…"><a href="#ç™¾åº¦-BaiduDNS-â˜…â˜…â˜…" class="headerlink" title="ç™¾åº¦ BaiduDNS â˜…â˜…â˜…"></a>ç™¾åº¦ BaiduDNS â˜…â˜…â˜…</h4><ul><li>é¦–é€‰ï¼š180.76.76.76</li></ul><h4 id="CNNIC-SDNS-â˜…â˜…â˜…"><a href="#CNNIC-SDNS-â˜…â˜…â˜…" class="headerlink" title="CNNIC SDNS â˜…â˜…â˜…"></a>CNNIC SDNS â˜…â˜…â˜…</h4><ul><li>é¦–é€‰ï¼š1.2.4.8</li><li>å¤‡é€‰ï¼š202.98.0.68</li></ul><h4 id="OpenDNSï¼šâ˜…ï¼ˆä¸æ¨èï¼‰"><a href="#OpenDNSï¼šâ˜…ï¼ˆä¸æ¨èï¼‰" class="headerlink" title="OpenDNSï¼šâ˜…ï¼ˆä¸æ¨èï¼‰"></a>OpenDNSï¼šâ˜…ï¼ˆä¸æ¨èï¼‰</h4><ul><li>é¦–é€‰ï¼š208.67.222.222</li><li>å¤‡é€‰ï¼š208.67.220.220</li></ul><h4 id="Google-DNSï¼šâ˜…ï¼ˆå¼ºçƒˆä¸æ¨èï¼‰"><a href="#Google-DNSï¼šâ˜…ï¼ˆå¼ºçƒˆä¸æ¨èï¼‰" class="headerlink" title="Google DNSï¼šâ˜…ï¼ˆå¼ºçƒˆä¸æ¨èï¼‰"></a>Google DNSï¼šâ˜…ï¼ˆå¼ºçƒˆä¸æ¨èï¼‰</h4><ul><li>é¦–é€‰ï¼š8.8.8.8</li><li>å¤‡é€‰ï¼š8.8.4.4</li></ul><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> ç½‘ç»œ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> DNS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Centos supervisorå®‰è£…</title>
      <link href="/2019/10/13/2/"/>
      <url>/2019/10/13/2/</url>
      
        <content type="html"><![CDATA[<h4 id="è§£é‡Šä¸€äº›è®©äººå®¹æ˜“ç–‘æƒ‘åè¯ï¼š"><a href="#è§£é‡Šä¸€äº›è®©äººå®¹æ˜“ç–‘æƒ‘åè¯ï¼š" class="headerlink" title="è§£é‡Šä¸€äº›è®©äººå®¹æ˜“ç–‘æƒ‘åè¯ï¼š"></a>è§£é‡Šä¸€äº›è®©äººå®¹æ˜“ç–‘æƒ‘åè¯ï¼š</h4><blockquote><ul><li>supervisorï¼šè¦å®‰è£…çš„è½¯ä»¶çš„åç§°ã€‚</li><li>supervisordï¼šè£…å¥½supervisorè½¯ä»¶åï¼Œsupervisordç”¨äºå¯åŠ¨supervisoræœåŠ¡ã€‚</li><li>supervisorctlï¼šç”¨äºç®¡ç†supervisoré…ç½®æ–‡ä»¶ä¸­programã€‚</li></ul></blockquote><h4 id="æ–¹æ³•ä¸€ã€ä½¿ç”¨yumå‘½ä»¤å®‰è£…ï¼ˆæ¨èï¼‰"><a href="#æ–¹æ³•ä¸€ã€ä½¿ç”¨yumå‘½ä»¤å®‰è£…ï¼ˆæ¨èï¼‰" class="headerlink" title="æ–¹æ³•ä¸€ã€ä½¿ç”¨yumå‘½ä»¤å®‰è£…ï¼ˆæ¨èï¼‰"></a>æ–¹æ³•ä¸€ã€ä½¿ç”¨yumå‘½ä»¤å®‰è£…ï¼ˆæ¨èï¼‰</h4><pre class=" language-bash"><code class="language-bash">$ <span class="token function">sudo</span> <span class="token function">su</span> - <span class="token comment" spellcheck="true">#åˆ‡æ¢ä¸ºrootç”¨æˆ·</span><span class="token comment" spellcheck="true"># yum install epel-release</span><span class="token comment" spellcheck="true"># yum install -y supervisor</span><span class="token comment" spellcheck="true"># systemctl enable supervisord # å¼€æœºè‡ªå¯åŠ¨</span><span class="token comment" spellcheck="true"># systemctl start supervisord # å¯åŠ¨supervisordæœåŠ¡</span><span class="token comment" spellcheck="true"># systemctl status supervisord # æŸ¥çœ‹supervisordæœåŠ¡çŠ¶æ€</span><span class="token comment" spellcheck="true"># ps -ef|grep supervisord # æŸ¥çœ‹æ˜¯å¦å­˜åœ¨supervisordè¿›ç¨‹</span></code></pre><h4 id="æ–¹æ³•äºŒã€ä½¿ç”¨pipæ‰‹å·¥å®‰è£…é…ç½®-ä¸æ¨è"><a href="#æ–¹æ³•äºŒã€ä½¿ç”¨pipæ‰‹å·¥å®‰è£…é…ç½®-ä¸æ¨è" class="headerlink" title="æ–¹æ³•äºŒã€ä½¿ç”¨pipæ‰‹å·¥å®‰è£…é…ç½®(ä¸æ¨è)"></a>æ–¹æ³•äºŒã€ä½¿ç”¨pipæ‰‹å·¥å®‰è£…é…ç½®(ä¸æ¨è)</h4><h5 id="å‡†å¤‡å·¥ä½œï¼Œç¡®è®¤9001ç«¯å£æœªè¢«å ç”¨ï¼Œå¦‚æœ9001ç«¯å£è¢«å ç”¨ï¼Œè¯·å°†åé¢æåˆ°çš„supervisord-confæ–‡ä»¶ä¸­çš„9001æ›¿æ¢ä¸ºå¯ç”¨ç«¯å£å·ï¼Œå¦‚7001ã€‚"><a href="#å‡†å¤‡å·¥ä½œï¼Œç¡®è®¤9001ç«¯å£æœªè¢«å ç”¨ï¼Œå¦‚æœ9001ç«¯å£è¢«å ç”¨ï¼Œè¯·å°†åé¢æåˆ°çš„supervisord-confæ–‡ä»¶ä¸­çš„9001æ›¿æ¢ä¸ºå¯ç”¨ç«¯å£å·ï¼Œå¦‚7001ã€‚" class="headerlink" title="å‡†å¤‡å·¥ä½œï¼Œç¡®è®¤9001ç«¯å£æœªè¢«å ç”¨ï¼Œå¦‚æœ9001ç«¯å£è¢«å ç”¨ï¼Œè¯·å°†åé¢æåˆ°çš„supervisord.confæ–‡ä»¶ä¸­çš„9001æ›¿æ¢ä¸ºå¯ç”¨ç«¯å£å·ï¼Œå¦‚7001ã€‚"></a>å‡†å¤‡å·¥ä½œï¼Œç¡®è®¤9001ç«¯å£æœªè¢«å ç”¨ï¼Œå¦‚æœ9001ç«¯å£è¢«å ç”¨ï¼Œè¯·å°†åé¢æåˆ°çš„supervisord.confæ–‡ä»¶ä¸­çš„9001æ›¿æ¢ä¸ºå¯ç”¨ç«¯å£å·ï¼Œå¦‚7001ã€‚</h5><h6 id="ä¸€ã€å®‰è£…supervisor"><a href="#ä¸€ã€å®‰è£…supervisor" class="headerlink" title="ä¸€ã€å®‰è£…supervisor"></a>ä¸€ã€å®‰è£…supervisor</h6><p>åˆ‡æ¢ä¸ºrootç”¨æˆ·</p><pre class=" language-bash"><code class="language-bash">$ <span class="token function">sudo</span> <span class="token function">su</span> -</code></pre><p>ä¸ºpython2.7å®‰è£…pipï¼ˆsupervisoråªæ”¯æŒpython2.7ï¼‰</p><h6 id="1-ä¸‹è½½pip"><a href="#1-ä¸‹è½½pip" class="headerlink" title="(1) ä¸‹è½½pip"></a>(1) ä¸‹è½½pip</h6><pre class=" language-bash"><code class="language-bash"><span class="token comment" spellcheck="true"># wget https://bootstrap.pypa.io/get-pip.py --no-check-certificate</span></code></pre><h6 id="2-å®‰è£…pip"><a href="#2-å®‰è£…pip" class="headerlink" title="(2) å®‰è£…pip"></a>(2) å®‰è£…pip</h6><pre class=" language-bash"><code class="language-bash"><span class="token comment" spellcheck="true"># python2.7 get-pip.py</span></code></pre><p>å¦‚æœé‡åˆ°psutilç›¸å…³çš„æŠ¥é”™ï¼Œå‚è€ƒ: <a href="https://www.cnblogs.com/chentq/p/4954135.html" target="_blank" rel="noopener">https://www.cnblogs.com/chentq/p/4954135.html</a><br>å®‰è£…supervisor</p><pre class=" language-bash"><code class="language-bash"><span class="token comment" spellcheck="true"># pip2 install supervisor</span><span class="token comment" spellcheck="true"># #å¯èƒ½é‡åˆ°çš„é—®é¢˜åŠè§£å†³åŠæ³•ï¼š</span><span class="token comment" spellcheck="true"># #å¦‚æœé‡åˆ°NameError: name 'sys_platform' is not defined</span><span class="token comment" spellcheck="true"># #è¿è¡Œå¦‚ä¸‹å‘½ä»¤å³å¯ï¼ˆä½†æ˜¯ä¹Ÿä¼šæŠ¥é”™ï¼Œä¸ç”¨ç†ä¼šï¼‰</span><span class="token comment" spellcheck="true"># #pip2 install --upgrade distribute,</span><span class="token comment" spellcheck="true"># #ç„¶åå†å¸è½½supervisorï¼Œ</span><span class="token comment" spellcheck="true"># #pip2 uninstall supervisorï¼Œ</span><span class="token comment" spellcheck="true"># #é‡è£…supervisor,</span><span class="token comment" spellcheck="true"># #pip2 install supervisorã€‚</span><span class="token comment" spellcheck="true"># #å‚è€ƒhttp://www.yuchaoshui.com/post/CentOS6-Python-installation</span></code></pre><p>åˆ›å»ºsupervisoræ‰€éœ€ç›®å½•,åˆ›å»ºsupervisoré…ç½®æ–‡ä»¶,ç¼–è¾‘supervisord.confæ–‡ä»¶</p><pre class=" language-bash"><code class="language-bash"><span class="token comment" spellcheck="true"># mkdir /etc/supervisord.d/</span><span class="token comment" spellcheck="true"># echo_supervisord_conf > /etc/supervisord.conf</span><span class="token comment" spellcheck="true"># vim /etc/supervisord.conf</span></code></pre><p>ç¼–è¾‘æ–‡ä»¶å†…å®¹å¦‚ä¸‹(ç›´æ¥å±•ç¤ºå®Œæ•´çš„æ–‡ä»¶å†…å®¹ï¼Œå»ºè®®ç›´æ¥å¤åˆ¶ç²˜è´´ï¼Œå¦‚æœæƒ³çŸ¥é“è¯¦ç»†æ”¹åŠ¨ï¼Œå¯é€è¡Œå¯¹æ¯”)</p><pre class=" language-bash"><code class="language-bash"><span class="token punctuation">;</span> Sample supervisor config file.<span class="token punctuation">;</span><span class="token punctuation">;</span> For <span class="token function">more</span> information on the config file, please see:<span class="token punctuation">;</span> http://supervisord.org/configuration.html<span class="token punctuation">;</span><span class="token punctuation">;</span> Notes:<span class="token punctuation">;</span>  - Shell expansion <span class="token punctuation">(</span><span class="token string">"~"</span> or <span class="token string">"<span class="token variable">$HOME</span>"</span><span class="token punctuation">)</span> is not supported.  Environment<span class="token punctuation">;</span>    variables can be expanded using this syntax: <span class="token string">"%(ENV_HOME)s"</span><span class="token keyword">.</span><span class="token punctuation">;</span>  - Quotes around values are not supported, except <span class="token keyword">in</span> the <span class="token keyword">case</span> of<span class="token punctuation">;</span>    the environment<span class="token operator">=</span> options as shown below.<span class="token punctuation">;</span>  - Comments must have a leading space: <span class="token string">"a=b ;comment"</span> not <span class="token string">"a=b;comment"</span><span class="token keyword">.</span><span class="token punctuation">;</span>  - Command will be truncated <span class="token keyword">if</span> it looks like a config <span class="token function">file</span> comment, e.g.<span class="token punctuation">;</span>    <span class="token string">"command=bash -c 'foo ; bar'"</span> will truncate to <span class="token string">"command=bash -c 'foo "</span><span class="token keyword">.</span><span class="token punctuation">[</span>unix_http_server<span class="token punctuation">]</span>file<span class="token operator">=</span>/var/run/supervisor.sock   <span class="token punctuation">;</span> the path to the socket <span class="token function">file</span><span class="token punctuation">;</span>chmod<span class="token operator">=</span>0700                 <span class="token punctuation">;</span> socket <span class="token function">file</span> mode <span class="token punctuation">(</span>default 0700<span class="token punctuation">)</span><span class="token punctuation">;</span>chown<span class="token operator">=</span>nobody:nogroup       <span class="token punctuation">;</span> socket <span class="token function">file</span> uid:gid owner<span class="token punctuation">;</span>username<span class="token operator">=</span>user              <span class="token punctuation">;</span> default is no username <span class="token punctuation">(</span>open server<span class="token punctuation">)</span><span class="token punctuation">;</span>password<span class="token operator">=</span>123               <span class="token punctuation">;</span> default is no password <span class="token punctuation">(</span>open server<span class="token punctuation">)</span><span class="token punctuation">[</span>inet_http_server<span class="token punctuation">]</span>         <span class="token punctuation">;</span> inet <span class="token punctuation">(</span>TCP<span class="token punctuation">)</span> server disabled by defaultport<span class="token operator">=</span>127.0.0.1:9001        <span class="token punctuation">;</span> ip_address:port specifier, *:port <span class="token keyword">for</span> all iface<span class="token punctuation">;</span>username<span class="token operator">=</span>user              <span class="token punctuation">;</span> default is no username <span class="token punctuation">(</span>open server<span class="token punctuation">)</span><span class="token punctuation">;</span>password<span class="token operator">=</span>123               <span class="token punctuation">;</span> default is no password <span class="token punctuation">(</span>open server<span class="token punctuation">)</span><span class="token punctuation">[</span>supervisord<span class="token punctuation">]</span>logfile<span class="token operator">=</span>/var/log/supervisord.log <span class="token punctuation">;</span> main log <span class="token function">file</span><span class="token punctuation">;</span> default <span class="token variable">$CWD</span>/supervisord.loglogfile_maxbytes<span class="token operator">=</span>50MB        <span class="token punctuation">;</span> max main logfile bytes b4 rotation<span class="token punctuation">;</span> default 50MBlogfile_backups<span class="token operator">=</span>10           <span class="token punctuation">;</span> <span class="token comment" spellcheck="true"># of main logfile backups; 0 means none, default 10</span>loglevel<span class="token operator">=</span>info                <span class="token punctuation">;</span> log level<span class="token punctuation">;</span> default info<span class="token punctuation">;</span> others: debug,warn,tracepidfile<span class="token operator">=</span>/var/run/supervisord.pid <span class="token punctuation">;</span> supervisord pidfile<span class="token punctuation">;</span> default supervisord.pidnodaemon<span class="token operator">=</span>false               <span class="token punctuation">;</span> start <span class="token keyword">in</span> foreground <span class="token keyword">if</span> <span class="token boolean">true</span><span class="token punctuation">;</span> default <span class="token boolean">false</span>minfds<span class="token operator">=</span>1024                  <span class="token punctuation">;</span> min. avail startup <span class="token function">file</span> descriptors<span class="token punctuation">;</span> default 1024minprocs<span class="token operator">=</span>200                 <span class="token punctuation">;</span> min. avail process descriptors<span class="token punctuation">;</span>default 200<span class="token punctuation">;</span>umask<span class="token operator">=</span>022                   <span class="token punctuation">;</span> process <span class="token function">file</span> creation <span class="token function">umask</span><span class="token punctuation">;</span> default 022<span class="token punctuation">;</span>user<span class="token operator">=</span>chrism                 <span class="token punctuation">;</span> default is current user, required <span class="token keyword">if</span> root<span class="token punctuation">;</span>identifier<span class="token operator">=</span>supervisor       <span class="token punctuation">;</span> supervisord identifier, default is <span class="token string">'supervisor'</span><span class="token punctuation">;</span>directory<span class="token operator">=</span>/tmp              <span class="token punctuation">;</span> default is not to <span class="token function">cd</span> during start<span class="token punctuation">;</span>nocleanup<span class="token operator">=</span>true              <span class="token punctuation">;</span> don<span class="token string">'t clean up tempfiles at start; default false;childlogdir=/tmp            ; '</span>AUTO<span class="token string">' child log dir, default <span class="token variable">$TEMP</span>;environment=KEY="value"     ; key value pairs to add to environment;strip_ansi=false            ; strip ansi escape codes in logs; def. false; The rpcinterface:supervisor section must remain in the config file for; RPC (supervisorctl/web interface) to work.  Additional interfaces may be; added by defining them in separate [rpcinterface:x] sections.[rpcinterface:supervisor]supervisor.rpcinterface_factory = supervisor.rpcinterface:make_main_rpcinterface; The supervisorctl section configures how supervisorctl will connect to; supervisord.  configure it match the settings in either the unix_http_server; or inet_http_server section.[supervisorctl]serverurl=unix:///var/run/supervisor.sock ; use a unix:// URL  for a unix socket;serverurl=http://127.0.0.1:9001 ; use an http:// url to specify an inet socket;username=chris              ; should be same as in [*_http_server] if set;password=123                ; should be same as in [*_http_server] if set;prompt=mysupervisor         ; cmd line prompt (default "supervisor");history_file=~/.sc_history  ; use readline history if available; The sample program section below shows all possible program subsection values.; Create one or more '</span>real<span class="token string">' program: sections to be able to control them under; supervisor.;[program:theprogramname];command=/bin/cat              ; the program (relative uses PATH, can take args);process_name=%(program_name)s ; process_name expr (default %(program_name)s);numprocs=1                    ; number of processes copies to start (def 1);directory=/tmp                ; directory to cwd to before exec (def no cwd);umask=022                     ; umask for process (default None);priority=999                  ; the relative start priority (default 999);autostart=true                ; start at supervisord start (default: true);startsecs=1                   ; # of secs prog must stay up to be running (def. 1);startretries=3                ; max # of serial start failures when starting (default 3);autorestart=unexpected        ; when to restart if exited after running (def: unexpected);exitcodes=0,2                 ; '</span>expected<span class="token string">' exit codes used with autorestart (default 0,2);stopsignal=QUIT               ; signal used to kill process (default TERM);stopwaitsecs=10               ; max num secs to wait b4 SIGKILL (default 10);stopasgroup=false             ; send stop signal to the UNIX process group (default false);killasgroup=false             ; SIGKILL the UNIX process group (def false);user=chrism                   ; setuid to this UNIX account to run the program;redirect_stderr=true          ; redirect proc stderr to stdout (default false);stdout_logfile=/a/path        ; stdout log path, NONE for none; default AUTO;stdout_logfile_maxbytes=1MB   ; max # logfile bytes b4 rotation (default 50MB);stdout_logfile_backups=10     ; # of stdout logfile backups (0 means none, default 10);stdout_capture_maxbytes=1MB   ; number of bytes in '</span>capturemode<span class="token string">' (default 0);stdout_events_enabled=false   ; emit events on stdout writes (default false);stderr_logfile=/a/path        ; stderr log path, NONE for none; default AUTO;stderr_logfile_maxbytes=1MB   ; max # logfile bytes b4 rotation (default 50MB);stderr_logfile_backups=10     ; # of stderr logfile backups (0 means none, default 10);stderr_capture_maxbytes=1MB   ; number of bytes in '</span>capturemode<span class="token string">' (default 0);stderr_events_enabled=false   ; emit events on stderr writes (default false);environment=A="1",B="2"       ; process environment additions (def no adds);serverurl=AUTO                ; override serverurl computation (childutils); The sample eventlistener section below shows all possible eventlistener; subsection values.  Create one or more '</span>real<span class="token string">' eventlistener: sections to be; able to handle event notifications sent by supervisord.;[eventlistener:theeventlistenername];command=/bin/eventlistener    ; the program (relative uses PATH, can take args);process_name=%(program_name)s ; process_name expr (default %(program_name)s);numprocs=1                    ; number of processes copies to start (def 1);events=EVENT                  ; event notif. types to subscribe to (req'</span>d<span class="token punctuation">)</span><span class="token punctuation">;</span>buffer_size<span class="token operator">=</span>10                <span class="token punctuation">;</span> event buffer queue size <span class="token punctuation">(</span>default 10<span class="token punctuation">)</span><span class="token punctuation">;</span>directory<span class="token operator">=</span>/tmp                <span class="token punctuation">;</span> directory to cwd to before <span class="token function">exec</span> <span class="token punctuation">(</span>def no cwd<span class="token punctuation">)</span><span class="token punctuation">;</span>umask<span class="token operator">=</span>022                     <span class="token punctuation">;</span> <span class="token function">umask</span> <span class="token keyword">for</span> process <span class="token punctuation">(</span>default None<span class="token punctuation">)</span><span class="token punctuation">;</span>priority<span class="token operator">=</span>-1                   <span class="token punctuation">;</span> the relative start priority <span class="token punctuation">(</span>default -1<span class="token punctuation">)</span><span class="token punctuation">;</span>autostart<span class="token operator">=</span>true                <span class="token punctuation">;</span> start at supervisord start <span class="token punctuation">(</span>default: true<span class="token punctuation">)</span><span class="token punctuation">;</span>startsecs<span class="token operator">=</span>1                   <span class="token punctuation">;</span> <span class="token comment" spellcheck="true"># of secs prog must stay up to be running (def. 1)</span><span class="token punctuation">;</span>startretries<span class="token operator">=</span>3                <span class="token punctuation">;</span> max <span class="token comment" spellcheck="true"># of serial start failures when starting (default 3)</span><span class="token punctuation">;</span>autorestart<span class="token operator">=</span>unexpected        <span class="token punctuation">;</span> autorestart <span class="token keyword">if</span> exited after running <span class="token punctuation">(</span>def: unexpected<span class="token punctuation">)</span><span class="token punctuation">;</span>exitcodes<span class="token operator">=</span>0,2                 <span class="token punctuation">;</span> <span class="token string">'expected'</span> <span class="token keyword">exit</span> codes used with autorestart <span class="token punctuation">(</span>default 0,2<span class="token punctuation">)</span><span class="token punctuation">;</span>stopsignal<span class="token operator">=</span>QUIT               <span class="token punctuation">;</span> signal used to <span class="token function">kill</span> process <span class="token punctuation">(</span>default TERM<span class="token punctuation">)</span><span class="token punctuation">;</span>stopwaitsecs<span class="token operator">=</span>10               <span class="token punctuation">;</span> max num secs to <span class="token function">wait</span> b4 SIGKILL <span class="token punctuation">(</span>default 10<span class="token punctuation">)</span><span class="token punctuation">;</span>stopasgroup<span class="token operator">=</span>false             <span class="token punctuation">;</span> send stop signal to the UNIX process group <span class="token punctuation">(</span>default false<span class="token punctuation">)</span><span class="token punctuation">;</span>killasgroup<span class="token operator">=</span>false             <span class="token punctuation">;</span> SIGKILL the UNIX process group <span class="token punctuation">(</span>def false<span class="token punctuation">)</span><span class="token punctuation">;</span>user<span class="token operator">=</span>chrism                   <span class="token punctuation">;</span> setuid to this UNIX account to run the program<span class="token punctuation">;</span>redirect_stderr<span class="token operator">=</span>false         <span class="token punctuation">;</span> redirect_stderr<span class="token operator">=</span>true is not allowed <span class="token keyword">for</span> eventlisteners<span class="token punctuation">;</span>stdout_logfile<span class="token operator">=</span>/a/path        <span class="token punctuation">;</span> stdout log path, NONE <span class="token keyword">for</span> none<span class="token punctuation">;</span> default AUTO<span class="token punctuation">;</span>stdout_logfile_maxbytes<span class="token operator">=</span>1MB   <span class="token punctuation">;</span> max <span class="token comment" spellcheck="true"># logfile bytes b4 rotation (default 50MB)</span><span class="token punctuation">;</span>stdout_logfile_backups<span class="token operator">=</span>10     <span class="token punctuation">;</span> <span class="token comment" spellcheck="true"># of stdout logfile backups (0 means none, default 10)</span><span class="token punctuation">;</span>stdout_events_enabled<span class="token operator">=</span>false   <span class="token punctuation">;</span> emit events on stdout writes <span class="token punctuation">(</span>default false<span class="token punctuation">)</span><span class="token punctuation">;</span>stderr_logfile<span class="token operator">=</span>/a/path        <span class="token punctuation">;</span> stderr log path, NONE <span class="token keyword">for</span> none<span class="token punctuation">;</span> default AUTO<span class="token punctuation">;</span>stderr_logfile_maxbytes<span class="token operator">=</span>1MB   <span class="token punctuation">;</span> max <span class="token comment" spellcheck="true"># logfile bytes b4 rotation (default 50MB)</span><span class="token punctuation">;</span>stderr_logfile_backups<span class="token operator">=</span>10     <span class="token punctuation">;</span> <span class="token comment" spellcheck="true"># of stderr logfile backups (0 means none, default 10)</span><span class="token punctuation">;</span>stderr_events_enabled<span class="token operator">=</span>false   <span class="token punctuation">;</span> emit events on stderr writes <span class="token punctuation">(</span>default false<span class="token punctuation">)</span><span class="token punctuation">;</span>environment<span class="token operator">=</span>A<span class="token operator">=</span><span class="token string">"1"</span>,B<span class="token operator">=</span><span class="token string">"2"</span>       <span class="token punctuation">;</span> process environment additions<span class="token punctuation">;</span>serverurl<span class="token operator">=</span>AUTO                <span class="token punctuation">;</span> override serverurl computation <span class="token punctuation">(</span>childutils<span class="token punctuation">)</span><span class="token punctuation">;</span> The sample group section below shows all possible group values.  Create one<span class="token punctuation">;</span> or <span class="token function">more</span> <span class="token string">'real'</span> group: sections to create <span class="token string">"heterogeneous"</span> process groups.<span class="token punctuation">;</span><span class="token punctuation">[</span>group:thegroupname<span class="token punctuation">]</span><span class="token punctuation">;</span>programs<span class="token operator">=</span>progname1,progname2  <span class="token punctuation">;</span> each refers to <span class="token string">'x'</span> <span class="token keyword">in</span> <span class="token punctuation">[</span>program:x<span class="token punctuation">]</span> definitions<span class="token punctuation">;</span>priority<span class="token operator">=</span>999                  <span class="token punctuation">;</span> the relative start priority <span class="token punctuation">(</span>default 999<span class="token punctuation">)</span><span class="token punctuation">;</span> The <span class="token punctuation">[</span>include<span class="token punctuation">]</span> section can just contain the <span class="token string">"files"</span> setting.  This<span class="token punctuation">;</span> setting can list multiple files <span class="token punctuation">(</span>separated by whitespace or<span class="token punctuation">;</span> newlines<span class="token punctuation">)</span>.  It can also contain wildcards.  The filenames are<span class="token punctuation">;</span> interpreted as relative to this file.  Included files *cannot*<span class="token punctuation">;</span> include files themselves.<span class="token punctuation">[</span>include<span class="token punctuation">]</span>files <span class="token operator">=</span> /etc/supervisord.d/*.ini</code></pre><p>å¯åŠ¨supervisor</p><pre class=" language-bash"><code class="language-bash"><span class="token comment" spellcheck="true"># supervisord -c /etc/supervisord.conf</span></code></pre><p>æŸ¥çœ‹supervisoræ˜¯å¦å¯åŠ¨æˆåŠŸ</p><pre class=" language-bash"><code class="language-bash"><span class="token comment" spellcheck="true"># ps -ef|grep supervisord</span>root       932     1  0 May10 ?        00:00:09 /bin/python2.7 /bin/supervisord -c /etc/supervisord.confroot      7902  6814  0 10:29 pts/0    00:00:00 <span class="token function">grep</span> --color<span class="token operator">=</span>auto supervisord</code></pre><p>è‡³æ­¤ï¼Œå®‰è£…supervisorå°±ç»“æŸäº†</p><h5 id="äºŒã€å°†supervisoré…ç½®ä¸ºå¼€æœºè‡ªå¯åŠ¨æœåŠ¡"><a href="#äºŒã€å°†supervisoré…ç½®ä¸ºå¼€æœºè‡ªå¯åŠ¨æœåŠ¡" class="headerlink" title="äºŒã€å°†supervisoré…ç½®ä¸ºå¼€æœºè‡ªå¯åŠ¨æœåŠ¡"></a>äºŒã€å°†supervisoré…ç½®ä¸ºå¼€æœºè‡ªå¯åŠ¨æœåŠ¡</h5><p>ç¼–è¾‘æœåŠ¡æ–‡ä»¶å†…å®¹å¦‚ä¸‹ï¼š</p><pre class=" language-bash"><code class="language-bash"><span class="token comment" spellcheck="true"># vim /usr/lib/systemd/system/supervisord.service</span><span class="token punctuation">[</span>Unit<span class="token punctuation">]</span>Description<span class="token operator">=</span>Supervisor daemon<span class="token punctuation">[</span>Service<span class="token punctuation">]</span>Type<span class="token operator">=</span>forkingPIDFile<span class="token operator">=</span>/var/run/supervisord.pidExecStart<span class="token operator">=</span>/bin/supervisord -c /etc/supervisord.confExecStop<span class="token operator">=</span>/bin/supervisorctl <span class="token function">shutdown</span>ExecReload<span class="token operator">=</span>/bin/supervisorctl reloadKillMode<span class="token operator">=</span>processRestart<span class="token operator">=</span>on-failureRestartSec<span class="token operator">=</span>42s<span class="token punctuation">[</span>Install<span class="token punctuation">]</span>WantedBy<span class="token operator">=</span>multi-user.target</code></pre><p>å¯åŠ¨æœåŠ¡</p><pre class=" language-bash"><code class="language-bash"><span class="token comment" spellcheck="true"># systemctl enable supervisord</span></code></pre><p>æˆåŠŸä¹‹åï¼Œå°±å¯ä»¥ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤ç®¡ç†supervisoræœåŠ¡äº†</p><pre class=" language-bash"><code class="language-bash"><span class="token comment" spellcheck="true"># systemctl stop supervisord</span><span class="token comment" spellcheck="true"># systemctl start supervisord</span><span class="token comment" spellcheck="true"># systemctl status supervisord</span><span class="token comment" spellcheck="true"># systemctl reload supervisord</span><span class="token comment" spellcheck="true"># systemctl restart supervisord</span></code></pre><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> liunx </category>
          
      </categories>
      
      
        <tags>
            
            <tag> supervisor </tag>
            
            <tag> å®ˆæŠ¤è¿›ç¨‹ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Matery ä¸»é¢˜è¯¦ç»†é…ç½®æ•™ç¨‹</title>
      <link href="/2019/10/13/3/"/>
      <url>/2019/10/13/3/</url>
      
        <content type="html"><![CDATA[<h1 id="hexo-theme-matery"><a href="#hexo-theme-matery" class="headerlink" title="hexo-theme-matery"></a>hexo-theme-matery</h1><p>è½¬è‡ª <a href="https://github.com/blinkfox/hexo-theme-matery/blob/develop/README_CN.md" target="_blank" rel="noopener">Matery ä¸»é¢˜å®˜æ–¹æ–‡æ¡£</a> | <a href="README.md">ğŸ‡ºğŸ‡¸English Document</a> | <a href="https://blinkfox.github.io/" target="_blank" rel="noopener">æ¼”ç¤ºç¤ºä¾‹</a> | QQ äº¤æµç¾¤: <a href="https://jq.qq.com/?_wv=1027&amp;k=5zMDYHT" target="_blank" rel="noopener"><code>926552981</code></a></p><blockquote><p>è¿™æ˜¯ä¸€ä¸ªé‡‡ç”¨ <code>Material Design</code> å’Œå“åº”å¼è®¾è®¡çš„ Hexo åšå®¢ä¸»é¢˜ã€‚</p></blockquote><h2 id="ç‰¹æ€§"><a href="#ç‰¹æ€§" class="headerlink" title="ç‰¹æ€§"></a>ç‰¹æ€§</h2><ul><li>ç®€å•æ¼‚äº®ï¼Œæ–‡ç« å†…å®¹ç¾è§‚æ˜“è¯»</li><li><a href="https://material.io/" target="_blank" rel="noopener">Material Design</a> è®¾è®¡</li><li>å“åº”å¼è®¾è®¡ï¼Œåšå®¢åœ¨æ¡Œé¢ç«¯ã€å¹³æ¿ã€æ‰‹æœºç­‰è®¾å¤‡ä¸Šå‡èƒ½å¾ˆå¥½çš„å±•ç°</li><li>é¦–é¡µè½®æ’­æ–‡ç« åŠæ¯å¤©åŠ¨æ€åˆ‡æ¢ <code>Banner</code> å›¾ç‰‡</li><li>ç€‘å¸ƒæµå¼çš„åšå®¢æ–‡ç« åˆ—è¡¨ï¼ˆæ–‡ç« æ— ç‰¹è‰²å›¾ç‰‡æ—¶ä¼šæœ‰ <code>24</code> å¼ æ¼‚äº®çš„å›¾ç‰‡ä»£æ›¿ï¼‰</li><li>æ—¶é—´è½´å¼çš„å½’æ¡£é¡µ</li><li><strong>è¯äº‘</strong>çš„æ ‡ç­¾é¡µå’Œ<strong>é›·è¾¾å›¾</strong>çš„åˆ†ç±»é¡µ</li><li>ä¸°å¯Œçš„å…³äºæˆ‘é¡µé¢ï¼ˆåŒ…æ‹¬å…³äºæˆ‘ã€æ–‡ç« ç»Ÿè®¡å›¾ã€æˆ‘çš„é¡¹ç›®ã€æˆ‘çš„æŠ€èƒ½ã€ç›¸å†Œç­‰ï¼‰</li><li>å¯è‡ªå®šä¹‰çš„æ•°æ®çš„å‹æƒ…é“¾æ¥é¡µé¢</li><li>æ”¯æŒæ–‡ç« ç½®é¡¶å’Œæ–‡ç« æ‰“èµ</li><li>æ”¯æŒ <code>MathJax</code></li><li><code>TOC</code> ç›®å½•</li><li>å¯è®¾ç½®å¤åˆ¶æ–‡ç« å†…å®¹æ—¶è¿½åŠ ç‰ˆæƒä¿¡æ¯</li><li>å¯è®¾ç½®é˜…è¯»æ–‡ç« æ—¶åšå¯†ç éªŒè¯</li><li><a href="https://gitalk.github.io/" target="_blank" rel="noopener">Gitalk</a>ã€<a href="https://imsun.github.io/gitment/" target="_blank" rel="noopener">Gitment</a>ã€<a href="https://valine.js.org/" target="_blank" rel="noopener">Valine</a> å’Œ <a href="https://disqus.com/" target="_blank" rel="noopener">Disqus</a> è¯„è®ºæ¨¡å—ï¼ˆæ¨èä½¿ç”¨ <code>Gitalk</code>ï¼‰</li><li>é›†æˆäº†<a href="http://busuanzi.ibruce.info/" target="_blank" rel="noopener">ä¸è’œå­ç»Ÿè®¡</a>ã€è°·æ­Œåˆ†æï¼ˆ<code>Google Analytics</code>ï¼‰å’Œæ–‡ç« å­—æ•°ç»Ÿè®¡ç­‰åŠŸèƒ½</li><li>æ”¯æŒåœ¨é¦–é¡µçš„éŸ³ä¹æ’­æ”¾å’Œè§†é¢‘æ’­æ”¾åŠŸèƒ½</li><li>æ”¯æŒ<code>emoji</code>è¡¨æƒ…ï¼Œç”¨<code>markdown emoji</code>è¯­æ³•ä¹¦å†™ç›´æ¥ç”Ÿæˆå¯¹åº”çš„èƒ½<strong>è·³è·ƒ</strong>çš„è¡¨æƒ…ã€‚</li><li>æ”¯æŒ <a href="http://www.daovoice.io/" target="_blank" rel="noopener">DaoVoice</a>ã€<a href="https://www.tidio.com/" target="_blank" rel="noopener">Tidio</a> åœ¨çº¿èŠå¤©åŠŸèƒ½ã€‚</li></ul><h2 id="è´¡çŒ®è€…"><a href="#è´¡çŒ®è€…" class="headerlink" title="è´¡çŒ®è€…"></a>è´¡çŒ®è€…</h2><p>æ„Ÿè°¢ä¸‹é¢åˆ—å‡ºçš„è´¡çŒ®è€…ï¼Œæ²¡æœ‰ä»–ä»¬ï¼Œhexo-theme-matery ä¸ä¼šè¿™ä¹ˆå®Œç¾ã€‚</p><ul><li><a href="https://github.com/HarborZeng" target="_blank" rel="noopener">@HarborZeng</a></li><li><a href="https://github.com/shw2018" target="_blank" rel="noopener">@shw2018</a></li><li><a href="https://github.com/L1cardo" target="_blank" rel="noopener">@L1cardo</a></li><li><a href="https://github.com/Five-great" target="_blank" rel="noopener">@Five-great</a></li></ul><h2 id="ä¸‹è½½"><a href="#ä¸‹è½½" class="headerlink" title="ä¸‹è½½"></a>ä¸‹è½½</h2><p>å½“ä½ çœ‹åˆ°è¿™é‡Œçš„æ—¶å€™ï¼Œåº”è¯¥å·²ç»æœ‰ä¸€ä¸ªè‡ªå·±çš„ <a href="https://hexo.io/zh-cn/" target="_blank" rel="noopener">Hexo</a> åšå®¢äº†ã€‚å¦‚æœè¿˜æ²¡æœ‰çš„è¯ï¼Œä¸å¦¨ä½¿ç”¨ Hexo å’Œ <a href="https://www.appinn.com/markdown/" target="_blank" rel="noopener">Markdown</a> æ¥å†™åšå®¢å’Œæ–‡ç« ã€‚</p><p>ç‚¹å‡» <a href="https://codeload.github.com/blinkfox/hexo-theme-matery/zip/master" target="_blank" rel="noopener">è¿™é‡Œ</a> ä¸‹è½½ <code>master</code> åˆ†æ”¯çš„æœ€æ–°ç¨³å®šç‰ˆçš„ä»£ç ï¼Œè§£å‹ç¼©åï¼Œå°† <code>hexo-theme-matery</code> çš„æ–‡ä»¶å¤¹å¤åˆ¶åˆ°ä½  Hexo çš„ <code>themes</code> æ–‡ä»¶å¤¹ä¸­å³å¯ã€‚</p><p>å½“ç„¶ä½ ä¹Ÿå¯ä»¥åœ¨ä½ çš„ <code>themes</code> æ–‡ä»¶å¤¹ä¸‹ä½¿ç”¨ <code>Git clone</code> å‘½ä»¤æ¥ä¸‹è½½:</p><pre class=" language-bash"><code class="language-bash"><span class="token function">git</span> clone https://github.com/blinkfox/hexo-theme-matery.git</code></pre><h2 id="é…ç½®"><a href="#é…ç½®" class="headerlink" title="é…ç½®"></a>é…ç½®</h2><h3 id="åˆ‡æ¢ä¸»é¢˜"><a href="#åˆ‡æ¢ä¸»é¢˜" class="headerlink" title="åˆ‡æ¢ä¸»é¢˜"></a>åˆ‡æ¢ä¸»é¢˜</h3><p>ä¿®æ”¹ Hexo æ ¹ç›®å½•ä¸‹çš„ <code>_config.yml</code> çš„  <code>theme</code> çš„å€¼ï¼š<code>theme: hexo-theme-matery</code></p><h4 id="config-yml-æ–‡ä»¶çš„å…¶å®ƒä¿®æ”¹å»ºè®®"><a href="#config-yml-æ–‡ä»¶çš„å…¶å®ƒä¿®æ”¹å»ºè®®" class="headerlink" title="_config.yml æ–‡ä»¶çš„å…¶å®ƒä¿®æ”¹å»ºè®®:"></a><code>_config.yml</code> æ–‡ä»¶çš„å…¶å®ƒä¿®æ”¹å»ºè®®:</h4><ul><li>è¯·ä¿®æ”¹ <code>_config.yml</code> çš„ <code>url</code> çš„å€¼ä¸ºä½ çš„ç½‘ç«™ä¸» <code>URL</code>ï¼ˆå¦‚ï¼š<code>http://xxx.github.io</code>ï¼‰ã€‚</li><li>å»ºè®®ä¿®æ”¹ä¸¤ä¸ª <code>per_page</code> çš„åˆ†é¡µæ¡æ•°å€¼ä¸º <code>6</code> çš„å€æ•°ï¼Œå¦‚ï¼š<code>12</code>ã€<code>18</code> ç­‰ï¼Œè¿™æ ·æ–‡ç« åˆ—è¡¨åœ¨å„ä¸ªå±å¹•ä¸‹éƒ½èƒ½è¾ƒå¥½çš„æ˜¾ç¤ºã€‚</li><li>å¦‚æœä½ æ˜¯ä¸­æ–‡ç”¨æˆ·ï¼Œåˆ™å»ºè®®ä¿®æ”¹ <code>language</code> çš„å€¼ä¸º <code>zh-CN</code>ã€‚</li></ul><h3 id="æ–°å»ºåˆ†ç±»-categories-é¡µ"><a href="#æ–°å»ºåˆ†ç±»-categories-é¡µ" class="headerlink" title="æ–°å»ºåˆ†ç±» categories é¡µ"></a>æ–°å»ºåˆ†ç±» categories é¡µ</h3><p><code>categories</code> é¡µæ˜¯ç”¨æ¥å±•ç¤ºæ‰€æœ‰åˆ†ç±»çš„é¡µé¢ï¼Œå¦‚æœåœ¨ä½ çš„åšå®¢ <code>source</code> ç›®å½•ä¸‹è¿˜æ²¡æœ‰ <code>categories/index.md</code> æ–‡ä»¶ï¼Œé‚£ä¹ˆä½ å°±éœ€è¦æ–°å»ºä¸€ä¸ªï¼Œå‘½ä»¤å¦‚ä¸‹ï¼š</p><pre class=" language-bash"><code class="language-bash">hexo new page <span class="token string">"categories"</span></code></pre><p>ç¼–è¾‘ä½ åˆšåˆšæ–°å»ºçš„é¡µé¢æ–‡ä»¶ <code>/source/categories/index.md</code>ï¼Œè‡³å°‘éœ€è¦ä»¥ä¸‹å†…å®¹ï¼š</p><pre class=" language-yaml"><code class="language-yaml"><span class="token punctuation">---</span><span class="token key atrule">title</span><span class="token punctuation">:</span> categories<span class="token key atrule">date</span><span class="token punctuation">:</span> <span class="token datetime number">2018-09-30 17:25:30</span><span class="token key atrule">type</span><span class="token punctuation">:</span> <span class="token string">"categories"</span><span class="token key atrule">layout</span><span class="token punctuation">:</span> <span class="token string">"categories"</span><span class="token punctuation">---</span></code></pre><h3 id="æ–°å»ºæ ‡ç­¾-tags-é¡µ"><a href="#æ–°å»ºæ ‡ç­¾-tags-é¡µ" class="headerlink" title="æ–°å»ºæ ‡ç­¾ tags é¡µ"></a>æ–°å»ºæ ‡ç­¾ tags é¡µ</h3><p><code>tags</code> é¡µæ˜¯ç”¨æ¥å±•ç¤ºæ‰€æœ‰æ ‡ç­¾çš„é¡µé¢ï¼Œå¦‚æœåœ¨ä½ çš„åšå®¢ <code>source</code> ç›®å½•ä¸‹è¿˜æ²¡æœ‰ <code>tags/index.md</code> æ–‡ä»¶ï¼Œé‚£ä¹ˆä½ å°±éœ€è¦æ–°å»ºä¸€ä¸ªï¼Œå‘½ä»¤å¦‚ä¸‹ï¼š</p><pre class=" language-bash"><code class="language-bash">hexo new page <span class="token string">"tags"</span></code></pre><p>ç¼–è¾‘ä½ åˆšåˆšæ–°å»ºçš„é¡µé¢æ–‡ä»¶ <code>/source/tags/index.md</code>ï¼Œè‡³å°‘éœ€è¦ä»¥ä¸‹å†…å®¹ï¼š</p><pre class=" language-yaml"><code class="language-yaml"><span class="token punctuation">---</span><span class="token key atrule">title</span><span class="token punctuation">:</span> tags<span class="token key atrule">date</span><span class="token punctuation">:</span> <span class="token datetime number">2018-09-30 18:23:38</span><span class="token key atrule">type</span><span class="token punctuation">:</span> <span class="token string">"tags"</span><span class="token key atrule">layout</span><span class="token punctuation">:</span> <span class="token string">"tags"</span><span class="token punctuation">---</span></code></pre><h3 id="æ–°å»ºå…³äºæˆ‘-about-é¡µ"><a href="#æ–°å»ºå…³äºæˆ‘-about-é¡µ" class="headerlink" title="æ–°å»ºå…³äºæˆ‘ about é¡µ"></a>æ–°å»ºå…³äºæˆ‘ about é¡µ</h3><p><code>about</code> é¡µæ˜¯ç”¨æ¥å±•ç¤º<strong>å…³äºæˆ‘å’Œæˆ‘çš„åšå®¢</strong>ä¿¡æ¯çš„é¡µé¢ï¼Œå¦‚æœåœ¨ä½ çš„åšå®¢ <code>source</code> ç›®å½•ä¸‹è¿˜æ²¡æœ‰ <code>about/index.md</code> æ–‡ä»¶ï¼Œé‚£ä¹ˆä½ å°±éœ€è¦æ–°å»ºä¸€ä¸ªï¼Œå‘½ä»¤å¦‚ä¸‹ï¼š</p><pre class=" language-bash"><code class="language-bash">hexo new page <span class="token string">"about"</span></code></pre><p>ç¼–è¾‘ä½ åˆšåˆšæ–°å»ºçš„é¡µé¢æ–‡ä»¶ <code>/source/about/index.md</code>ï¼Œè‡³å°‘éœ€è¦ä»¥ä¸‹å†…å®¹ï¼š</p><pre class=" language-yaml"><code class="language-yaml"><span class="token punctuation">---</span><span class="token key atrule">title</span><span class="token punctuation">:</span> about<span class="token key atrule">date</span><span class="token punctuation">:</span> <span class="token datetime number">2018-09-30 17:25:30</span><span class="token key atrule">type</span><span class="token punctuation">:</span> <span class="token string">"about"</span><span class="token key atrule">layout</span><span class="token punctuation">:</span> <span class="token string">"about"</span><span class="token punctuation">---</span></code></pre><h3 id="æ–°å»ºç•™è¨€æ¿-contact-é¡µï¼ˆå¯é€‰çš„ï¼‰"><a href="#æ–°å»ºç•™è¨€æ¿-contact-é¡µï¼ˆå¯é€‰çš„ï¼‰" class="headerlink" title="æ–°å»ºç•™è¨€æ¿ contact é¡µï¼ˆå¯é€‰çš„ï¼‰"></a>æ–°å»ºç•™è¨€æ¿ contact é¡µï¼ˆå¯é€‰çš„ï¼‰</h3><p><code>contact</code> é¡µæ˜¯ç”¨æ¥å±•ç¤º<strong>ç•™è¨€æ¿</strong>ä¿¡æ¯çš„é¡µé¢ï¼Œå¦‚æœåœ¨ä½ çš„åšå®¢ <code>source</code> ç›®å½•ä¸‹è¿˜æ²¡æœ‰ <code>contact/index.md</code> æ–‡ä»¶ï¼Œé‚£ä¹ˆä½ å°±éœ€è¦æ–°å»ºä¸€ä¸ªï¼Œå‘½ä»¤å¦‚ä¸‹ï¼š</p><pre class=" language-bash"><code class="language-bash">hexo new page <span class="token string">"contact"</span></code></pre><p>ç¼–è¾‘ä½ åˆšåˆšæ–°å»ºçš„é¡µé¢æ–‡ä»¶ <code>/source/contact/index.md</code>ï¼Œè‡³å°‘éœ€è¦ä»¥ä¸‹å†…å®¹ï¼š</p><pre class=" language-yaml"><code class="language-yaml"><span class="token punctuation">---</span><span class="token key atrule">title</span><span class="token punctuation">:</span> contact<span class="token key atrule">date</span><span class="token punctuation">:</span> <span class="token datetime number">2018-09-30 17:25:30</span><span class="token key atrule">type</span><span class="token punctuation">:</span> <span class="token string">"contact"</span><span class="token key atrule">layout</span><span class="token punctuation">:</span> <span class="token string">"contact"</span><span class="token punctuation">---</span></code></pre><blockquote><p><strong>æ³¨</strong>ï¼šæœ¬ç•™è¨€æ¿åŠŸèƒ½ä¾èµ–äºç¬¬ä¸‰æ–¹è¯„è®ºç³»ç»Ÿï¼Œè¯·<strong>æ¿€æ´»</strong>ä½ çš„è¯„è®ºç³»ç»Ÿæ‰æœ‰æ•ˆæœã€‚å¹¶ä¸”åœ¨ä¸»é¢˜çš„ <code>_config.yml</code> æ–‡ä»¶ä¸­ï¼Œç¬¬ <code>19</code> è‡³ <code>21</code> è¡Œçš„â€œ<strong>èœå•</strong>â€é…ç½®ï¼Œå–æ¶ˆå…³äºç•™è¨€æ¿çš„æ³¨é‡Šå³å¯ã€‚</p></blockquote><h3 id="æ–°å»ºå‹æƒ…è¿æ¥-friends-é¡µï¼ˆå¯é€‰çš„ï¼‰"><a href="#æ–°å»ºå‹æƒ…è¿æ¥-friends-é¡µï¼ˆå¯é€‰çš„ï¼‰" class="headerlink" title="æ–°å»ºå‹æƒ…è¿æ¥ friends é¡µï¼ˆå¯é€‰çš„ï¼‰"></a>æ–°å»ºå‹æƒ…è¿æ¥ friends é¡µï¼ˆå¯é€‰çš„ï¼‰</h3><p><code>friends</code> é¡µæ˜¯ç”¨æ¥å±•ç¤º<strong>å‹æƒ…è¿æ¥</strong>ä¿¡æ¯çš„é¡µé¢ï¼Œå¦‚æœåœ¨ä½ çš„åšå®¢ <code>source</code> ç›®å½•ä¸‹è¿˜æ²¡æœ‰ <code>friends/index.md</code> æ–‡ä»¶ï¼Œé‚£ä¹ˆä½ å°±éœ€è¦æ–°å»ºä¸€ä¸ªï¼Œå‘½ä»¤å¦‚ä¸‹ï¼š</p><pre class=" language-bash"><code class="language-bash">hexo new page <span class="token string">"friends"</span></code></pre><p>ç¼–è¾‘ä½ åˆšåˆšæ–°å»ºçš„é¡µé¢æ–‡ä»¶ <code>/source/friends/index.md</code>ï¼Œè‡³å°‘éœ€è¦ä»¥ä¸‹å†…å®¹ï¼š</p><pre class=" language-yaml"><code class="language-yaml"><span class="token punctuation">---</span><span class="token key atrule">title</span><span class="token punctuation">:</span> friends<span class="token key atrule">date</span><span class="token punctuation">:</span> <span class="token datetime number">2018-12-12 21:25:30</span><span class="token key atrule">type</span><span class="token punctuation">:</span> <span class="token string">"friends"</span><span class="token key atrule">layout</span><span class="token punctuation">:</span> <span class="token string">"friends"</span><span class="token punctuation">---</span></code></pre><p>åŒæ—¶ï¼Œåœ¨ä½ çš„åšå®¢ <code>source</code> ç›®å½•ä¸‹æ–°å»º <code>_data</code> ç›®å½•ï¼Œåœ¨ <code>_data</code> ç›®å½•ä¸­æ–°å»º <code>friends.json</code> æ–‡ä»¶ï¼Œæ–‡ä»¶å†…å®¹å¦‚ä¸‹æ‰€ç¤ºï¼š</p><pre class=" language-json"><code class="language-json"><span class="token punctuation">[</span><span class="token punctuation">{</span>    <span class="token property">"avatar"</span><span class="token operator">:</span> <span class="token string">"http://image.luokangyuan.com/1_qq_27922023.jpg"</span><span class="token punctuation">,</span>    <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"ç é…±"</span><span class="token punctuation">,</span>    <span class="token property">"introduction"</span><span class="token operator">:</span> <span class="token string">"æˆ‘ä¸æ˜¯å¤§ä½¬ï¼Œåªæ˜¯åœ¨è¿½å¯»å¤§ä½¬çš„è„šæ­¥"</span><span class="token punctuation">,</span>    <span class="token property">"url"</span><span class="token operator">:</span> <span class="token string">"http://luokangyuan.com/"</span><span class="token punctuation">,</span>    <span class="token property">"title"</span><span class="token operator">:</span> <span class="token string">"å‰å»å­¦ä¹ "</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>    <span class="token property">"avatar"</span><span class="token operator">:</span> <span class="token string">"http://image.luokangyuan.com/4027734.jpeg"</span><span class="token punctuation">,</span>    <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"é—ªçƒä¹‹ç‹"</span><span class="token punctuation">,</span>    <span class="token property">"introduction"</span><span class="token operator">:</span> <span class="token string">"ç¼–ç¨‹ç•Œå¤§ä½¬ï¼ŒæŠ€æœ¯ç‰›ï¼Œäººè¿˜ç‰¹åˆ«å¥½ï¼Œä¸æ‡‚çš„éƒ½å¯ä»¥è¯·æ•™å¤§ä½¬"</span><span class="token punctuation">,</span>    <span class="token property">"url"</span><span class="token operator">:</span> <span class="token string">"https://blinkfox.github.io/"</span><span class="token punctuation">,</span>    <span class="token property">"title"</span><span class="token operator">:</span> <span class="token string">"å‰å»å­¦ä¹ "</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>    <span class="token property">"avatar"</span><span class="token operator">:</span> <span class="token string">"http://image.luokangyuan.com/avatar.jpg"</span><span class="token punctuation">,</span>    <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"ja_rome"</span><span class="token punctuation">,</span>    <span class="token property">"introduction"</span><span class="token operator">:</span> <span class="token string">"å¹³å‡¡çš„è„šæ­¥ä¹Ÿå¯ä»¥èµ°å‡ºä¼Ÿå¤§çš„è¡Œç¨‹"</span><span class="token punctuation">,</span>    <span class="token property">"url"</span><span class="token operator">:</span> <span class="token string">"https://me.csdn.net/jlh912008548"</span><span class="token punctuation">,</span>    <span class="token property">"title"</span><span class="token operator">:</span> <span class="token string">"å‰å»å­¦ä¹ "</span><span class="token punctuation">}</span><span class="token punctuation">]</span></code></pre><h3 id="èœå•å¯¼èˆªé…ç½®"><a href="#èœå•å¯¼èˆªé…ç½®" class="headerlink" title="èœå•å¯¼èˆªé…ç½®"></a>èœå•å¯¼èˆªé…ç½®</h3><h4 id="é…ç½®åŸºæœ¬èœå•å¯¼èˆªçš„åç§°ã€è·¯å¾„urlå’Œå›¾æ ‡icon"><a href="#é…ç½®åŸºæœ¬èœå•å¯¼èˆªçš„åç§°ã€è·¯å¾„urlå’Œå›¾æ ‡icon" class="headerlink" title="é…ç½®åŸºæœ¬èœå•å¯¼èˆªçš„åç§°ã€è·¯å¾„urlå’Œå›¾æ ‡icon."></a>é…ç½®åŸºæœ¬èœå•å¯¼èˆªçš„åç§°ã€è·¯å¾„urlå’Œå›¾æ ‡icon.</h4><p>1.èœå•å¯¼èˆªåç§°å¯ä»¥æ˜¯ä¸­æ–‡ä¹Ÿå¯ä»¥æ˜¯è‹±æ–‡(å¦‚ï¼š<code>Index</code>æˆ–<code>ä¸»é¡µ</code>)<br>2.å›¾æ ‡icon å¯ä»¥åœ¨<a href="https://fontawesome.com/icons" target="_blank" rel="noopener">Font Awesome</a> ä¸­æŸ¥æ‰¾   </p><pre class=" language-yaml"><code class="language-yaml"><span class="token key atrule">menu</span><span class="token punctuation">:</span>  <span class="token key atrule">Index</span><span class="token punctuation">:</span>    <span class="token key atrule">url</span><span class="token punctuation">:</span> /    <span class="token key atrule">icon</span><span class="token punctuation">:</span> fas fa<span class="token punctuation">-</span>home  <span class="token key atrule">Tags</span><span class="token punctuation">:</span>    <span class="token key atrule">url</span><span class="token punctuation">:</span> /tags    <span class="token key atrule">icon</span><span class="token punctuation">:</span> fas fa<span class="token punctuation">-</span>tags  <span class="token key atrule">Categories</span><span class="token punctuation">:</span>    <span class="token key atrule">url</span><span class="token punctuation">:</span> /categories    <span class="token key atrule">icon</span><span class="token punctuation">:</span> fas fa<span class="token punctuation">-</span>bookmark  <span class="token key atrule">Archives</span><span class="token punctuation">:</span>    <span class="token key atrule">url</span><span class="token punctuation">:</span> /archives    <span class="token key atrule">icon</span><span class="token punctuation">:</span> fas fa<span class="token punctuation">-</span>archive  <span class="token key atrule">About</span><span class="token punctuation">:</span>    <span class="token key atrule">url</span><span class="token punctuation">:</span> /about    <span class="token key atrule">icon</span><span class="token punctuation">:</span> fas fa<span class="token punctuation">-</span>user<span class="token punctuation">-</span>circle  <span class="token key atrule">Friends</span><span class="token punctuation">:</span>    <span class="token key atrule">url</span><span class="token punctuation">:</span> /friends    <span class="token key atrule">icon</span><span class="token punctuation">:</span> fas fa<span class="token punctuation">-</span>address<span class="token punctuation">-</span>book</code></pre><h4 id="äºŒçº§èœå•é…ç½®æ–¹æ³•"><a href="#äºŒçº§èœå•é…ç½®æ–¹æ³•" class="headerlink" title="äºŒçº§èœå•é…ç½®æ–¹æ³•"></a>äºŒçº§èœå•é…ç½®æ–¹æ³•</h4><p>å¦‚æœä½ éœ€è¦äºŒçº§èœå•åˆ™å¯ä»¥åœ¨åŸåŸºæœ¬èœå•å¯¼èˆªçš„åŸºç¡€ä¸Šå¦‚ä¸‹æ“ä½œ<br>1.åœ¨éœ€è¦æ·»åŠ äºŒçº§èœå•çš„ä¸€çº§èœå•ä¸‹æ·»åŠ <code>children</code>å…³é”®å­—(å¦‚:<code>About</code>èœå•ä¸‹æ·»åŠ <code>children</code>)<br>2.åœ¨<code>children</code>ä¸‹åˆ›å»ºäºŒçº§èœå•çš„ åç§°name,è·¯å¾„urlå’Œå›¾æ ‡icon.<br>3.æ³¨æ„æ¯ä¸ªäºŒçº§èœå•æ¨¡å—å‰è¦åŠ  <code>-</code>.<br>4.æ³¨æ„ç¼©è¿›æ ¼å¼  </p><pre class=" language-yaml"><code class="language-yaml"><span class="token key atrule">menu</span><span class="token punctuation">:</span>  <span class="token key atrule">Index</span><span class="token punctuation">:</span>    <span class="token key atrule">url</span><span class="token punctuation">:</span> /    <span class="token key atrule">icon</span><span class="token punctuation">:</span> fas fa<span class="token punctuation">-</span>home  <span class="token key atrule">Tags</span><span class="token punctuation">:</span>    <span class="token key atrule">url</span><span class="token punctuation">:</span> /tags    <span class="token key atrule">icon</span><span class="token punctuation">:</span> fas fa<span class="token punctuation">-</span>tags  <span class="token key atrule">Categories</span><span class="token punctuation">:</span>    <span class="token key atrule">url</span><span class="token punctuation">:</span> /categories    <span class="token key atrule">icon</span><span class="token punctuation">:</span> fas fa<span class="token punctuation">-</span>bookmark  <span class="token key atrule">Archives</span><span class="token punctuation">:</span>    <span class="token key atrule">url</span><span class="token punctuation">:</span> /archives    <span class="token key atrule">icon</span><span class="token punctuation">:</span> fas fa<span class="token punctuation">-</span>archive  <span class="token key atrule">About</span><span class="token punctuation">:</span>    <span class="token key atrule">url</span><span class="token punctuation">:</span> /about    <span class="token key atrule">icon</span><span class="token punctuation">:</span> fas fa<span class="token punctuation">-</span>user<span class="token punctuation">-</span>circle<span class="token punctuation">-</span>o  <span class="token key atrule">Friends</span><span class="token punctuation">:</span>    <span class="token key atrule">url</span><span class="token punctuation">:</span> /friends    <span class="token key atrule">icon</span><span class="token punctuation">:</span> fas fa<span class="token punctuation">-</span>address<span class="token punctuation">-</span>book  <span class="token key atrule">Medias</span><span class="token punctuation">:</span>    <span class="token key atrule">icon</span><span class="token punctuation">:</span> fas fa<span class="token punctuation">-</span>list    <span class="token key atrule">children</span><span class="token punctuation">:</span>      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Musics        <span class="token key atrule">url</span><span class="token punctuation">:</span> /musics        <span class="token key atrule">icon</span><span class="token punctuation">:</span> fas fa<span class="token punctuation">-</span>music      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Movies        <span class="token key atrule">url</span><span class="token punctuation">:</span> /movies        <span class="token key atrule">icon</span><span class="token punctuation">:</span> fas fa<span class="token punctuation">-</span>film      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Books        <span class="token key atrule">url</span><span class="token punctuation">:</span> /books        <span class="token key atrule">icon</span><span class="token punctuation">:</span> fas fa<span class="token punctuation">-</span>book      <span class="token punctuation">-</span> <span class="token key atrule">name</span><span class="token punctuation">:</span> Galleries        <span class="token key atrule">url</span><span class="token punctuation">:</span> /galleries        <span class="token key atrule">icon</span><span class="token punctuation">:</span> fas fa<span class="token punctuation">-</span>image</code></pre><h3 id="æ·»åŠ emojiè¡¨æƒ…æ”¯æŒï¼ˆå¯é€‰çš„ï¼‰"><a href="#æ·»åŠ emojiè¡¨æƒ…æ”¯æŒï¼ˆå¯é€‰çš„ï¼‰" class="headerlink" title="æ·»åŠ emojiè¡¨æƒ…æ”¯æŒï¼ˆå¯é€‰çš„ï¼‰"></a>æ·»åŠ emojiè¡¨æƒ…æ”¯æŒï¼ˆå¯é€‰çš„ï¼‰</h3><p>æœ¬ä¸»é¢˜æ–°å¢äº†å¯¹<code>emoji</code>è¡¨æƒ…çš„æ”¯æŒï¼Œä½¿ç”¨åˆ°äº† <a href="https://npm.taobao.org/package/hexo-filter-github-emojis" target="_blank" rel="noopener">hexo-filter-github-emojis</a> çš„ Hexo æ’ä»¶æ¥æ”¯æŒ <code>emoji</code>è¡¨æƒ…çš„ç”Ÿæˆï¼ŒæŠŠå¯¹åº”çš„<code>markdown emoji</code>è¯­æ³•ï¼ˆ<code>::</code>,ä¾‹å¦‚ï¼š<code>:smile:</code>ï¼‰è½¬å˜æˆä¼šè·³è·ƒçš„<code>emoji</code>è¡¨æƒ…ï¼Œå®‰è£…å‘½ä»¤å¦‚ä¸‹ï¼š</p><pre class=" language-bash"><code class="language-bash"><span class="token function">npm</span> <span class="token function">install</span> hexo-filter-github-emojis --save</code></pre><p>åœ¨ Hexo æ ¹ç›®å½•ä¸‹çš„ <code>_config.yml</code> æ–‡ä»¶ä¸­ï¼Œæ–°å¢ä»¥ä¸‹çš„é…ç½®é¡¹ï¼š</p><pre class=" language-yaml"><code class="language-yaml"><span class="token key atrule">githubEmojis</span><span class="token punctuation">:</span>  <span class="token key atrule">enable</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>  <span class="token key atrule">className</span><span class="token punctuation">:</span> github<span class="token punctuation">-</span>emoji  <span class="token key atrule">inject</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>  <span class="token key atrule">styles</span><span class="token punctuation">:</span>  customEmojis<span class="token punctuation">:</span></code></pre><p>æ‰§è¡Œ <code>hexo clean &amp;&amp; hexo g</code> é‡æ–°ç”Ÿæˆåšå®¢æ–‡ä»¶ï¼Œç„¶åå°±å¯ä»¥åœ¨æ–‡ç« ä¸­å¯¹åº”ä½ç½®çœ‹åˆ°ä½ ç”¨<code>emoji</code>è¯­æ³•å†™çš„è¡¨æƒ…äº†ã€‚</p><h3 id="ä»£ç é«˜äº®"><a href="#ä»£ç é«˜äº®" class="headerlink" title="ä»£ç é«˜äº®"></a>ä»£ç é«˜äº®</h3><p>ç”±äº Hexo è‡ªå¸¦çš„ä»£ç é«˜äº®ä¸»é¢˜æ˜¾ç¤ºä¸å¥½çœ‹ï¼Œæ‰€ä»¥ä¸»é¢˜ä¸­ä½¿ç”¨åˆ°äº† <a href="https://github.com/ele828/hexo-prism-plugin" target="_blank" rel="noopener">hexo-prism-plugin</a> çš„ Hexo æ’ä»¶æ¥åšä»£ç é«˜äº®ï¼Œå®‰è£…å‘½ä»¤å¦‚ä¸‹ï¼š</p><pre class=" language-bash"><code class="language-bash"><span class="token function">npm</span> i -S hexo-prism-plugin</code></pre><p>ç„¶åï¼Œä¿®æ”¹ Hexo æ ¹ç›®å½•ä¸‹ <code>_config.yml</code> æ–‡ä»¶ä¸­ <code>highlight.enable</code> çš„å€¼ä¸º <code>false</code>ï¼Œå¹¶æ–°å¢ <code>prism</code> æ’ä»¶ç›¸å…³çš„é…ç½®ï¼Œä¸»è¦é…ç½®å¦‚ä¸‹ï¼š</p><pre class=" language-yaml"><code class="language-yaml"><span class="token key atrule">highlight</span><span class="token punctuation">:</span>  <span class="token key atrule">enable</span><span class="token punctuation">:</span> <span class="token boolean important">false</span><span class="token key atrule">prism_plugin</span><span class="token punctuation">:</span>  <span class="token key atrule">mode</span><span class="token punctuation">:</span> <span class="token string">'preprocess'</span>    <span class="token comment" spellcheck="true"># realtime/preprocess</span>  <span class="token key atrule">theme</span><span class="token punctuation">:</span> <span class="token string">'tomorrow'</span>  <span class="token key atrule">line_number</span><span class="token punctuation">:</span> <span class="token boolean important">false    </span><span class="token comment" spellcheck="true"># default false</span>  custom_css<span class="token punctuation">:</span></code></pre><h3 id="æœç´¢"><a href="#æœç´¢" class="headerlink" title="æœç´¢"></a>æœç´¢</h3><p>æœ¬ä¸»é¢˜ä¸­è¿˜ä½¿ç”¨åˆ°äº† <a href="https://github.com/wzpan/hexo-generator-search" target="_blank" rel="noopener">hexo-generator-search</a> çš„ Hexo æ’ä»¶æ¥åšå†…å®¹æœç´¢ï¼Œå®‰è£…å‘½ä»¤å¦‚ä¸‹ï¼š</p><pre class=" language-bash"><code class="language-bash"><span class="token function">npm</span> <span class="token function">install</span> hexo-generator-search --save</code></pre><p>åœ¨ Hexo æ ¹ç›®å½•ä¸‹çš„ <code>_config.yml</code> æ–‡ä»¶ä¸­ï¼Œæ–°å¢ä»¥ä¸‹çš„é…ç½®é¡¹ï¼š</p><pre class=" language-yaml"><code class="language-yaml"><span class="token key atrule">search</span><span class="token punctuation">:</span>  <span class="token key atrule">path</span><span class="token punctuation">:</span> search.xml  <span class="token key atrule">field</span><span class="token punctuation">:</span> post</code></pre><h3 id="ä¸­æ–‡é“¾æ¥è½¬æ‹¼éŸ³ï¼ˆå¯é€‰çš„ï¼‰"><a href="#ä¸­æ–‡é“¾æ¥è½¬æ‹¼éŸ³ï¼ˆå¯é€‰çš„ï¼‰" class="headerlink" title="ä¸­æ–‡é“¾æ¥è½¬æ‹¼éŸ³ï¼ˆå¯é€‰çš„ï¼‰"></a>ä¸­æ–‡é“¾æ¥è½¬æ‹¼éŸ³ï¼ˆå¯é€‰çš„ï¼‰</h3><p>å¦‚æœä½ çš„æ–‡ç« åç§°æ˜¯ä¸­æ–‡çš„ï¼Œé‚£ä¹ˆ Hexo é»˜è®¤ç”Ÿæˆçš„æ°¸ä¹…é“¾æ¥ä¹Ÿä¼šæœ‰ä¸­æ–‡ï¼Œè¿™æ ·ä¸åˆ©äº <code>SEO</code>ï¼Œä¸” <code>gitment</code> è¯„è®ºå¯¹ä¸­æ–‡é“¾æ¥ä¹Ÿä¸æ”¯æŒã€‚æˆ‘ä»¬å¯ä»¥ç”¨ <a href="https://github.com/viko16/hexo-permalink-pinyin" target="_blank" rel="noopener">hexo-permalink-pinyin</a> Hexo æ’ä»¶ä½¿åœ¨ç”Ÿæˆæ–‡ç« æ—¶ç”Ÿæˆä¸­æ–‡æ‹¼éŸ³çš„æ°¸ä¹…é“¾æ¥ã€‚</p><p>å®‰è£…å‘½ä»¤å¦‚ä¸‹ï¼š</p><pre class=" language-bash"><code class="language-bash"><span class="token function">npm</span> i hexo-permalink-pinyin --save</code></pre><p>åœ¨ Hexo æ ¹ç›®å½•ä¸‹çš„ <code>_config.yml</code> æ–‡ä»¶ä¸­ï¼Œæ–°å¢ä»¥ä¸‹çš„é…ç½®é¡¹ï¼š</p><pre class=" language-yaml"><code class="language-yaml"><span class="token key atrule">permalink_pinyin</span><span class="token punctuation">:</span>  <span class="token key atrule">enable</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>  <span class="token key atrule">separator</span><span class="token punctuation">:</span> <span class="token string">'-'</span> <span class="token comment" spellcheck="true"># default: '-'</span></code></pre><blockquote><p><strong>æ³¨</strong>ï¼šé™¤äº†æ­¤æ’ä»¶å¤–ï¼Œ<a href="https://github.com/rozbo/hexo-abbrlink" target="_blank" rel="noopener">hexo-abbrlink</a> æ’ä»¶ä¹Ÿå¯ä»¥ç”Ÿæˆéä¸­æ–‡çš„é“¾æ¥ã€‚</p></blockquote><h3 id="æ–‡ç« å­—æ•°ç»Ÿè®¡æ’ä»¶ï¼ˆå¯é€‰çš„ï¼‰"><a href="#æ–‡ç« å­—æ•°ç»Ÿè®¡æ’ä»¶ï¼ˆå¯é€‰çš„ï¼‰" class="headerlink" title="æ–‡ç« å­—æ•°ç»Ÿè®¡æ’ä»¶ï¼ˆå¯é€‰çš„ï¼‰"></a>æ–‡ç« å­—æ•°ç»Ÿè®¡æ’ä»¶ï¼ˆå¯é€‰çš„ï¼‰</h3><p>å¦‚æœä½ æƒ³è¦åœ¨æ–‡ç« ä¸­æ˜¾ç¤ºæ–‡ç« å­—æ•°ã€é˜…è¯»æ—¶é•¿ä¿¡æ¯ï¼Œå¯ä»¥å®‰è£… <a href="https://github.com/willin/hexo-wordcount" target="_blank" rel="noopener">hexo-wordcount</a>æ’ä»¶ã€‚</p><p>å®‰è£…å‘½ä»¤å¦‚ä¸‹ï¼š</p><pre class=" language-bash"><code class="language-bash"><span class="token function">npm</span> i --save hexo-wordcount</code></pre><p>ç„¶ååªéœ€åœ¨æœ¬ä¸»é¢˜ä¸‹çš„ <code>_config.yml</code> æ–‡ä»¶ä¸­ï¼Œæ¿€æ´»ä»¥ä¸‹é…ç½®é¡¹å³å¯ï¼š</p><pre class=" language-yaml"><code class="language-yaml"><span class="token key atrule">wordCount</span><span class="token punctuation">:</span>  <span class="token key atrule">enable</span><span class="token punctuation">:</span> <span class="token boolean important">false </span><span class="token comment" spellcheck="true"># å°†è¿™ä¸ªå€¼è®¾ç½®ä¸º true å³å¯.</span>  <span class="token key atrule">postWordCount</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>  <span class="token key atrule">min2read</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>  <span class="token key atrule">totalCount</span><span class="token punctuation">:</span> <span class="token boolean important">true</span></code></pre><h3 id="æ·»åŠ -RSS-è®¢é˜…æ”¯æŒï¼ˆå¯é€‰çš„ï¼‰"><a href="#æ·»åŠ -RSS-è®¢é˜…æ”¯æŒï¼ˆå¯é€‰çš„ï¼‰" class="headerlink" title="æ·»åŠ  RSS è®¢é˜…æ”¯æŒï¼ˆå¯é€‰çš„ï¼‰"></a>æ·»åŠ  RSS è®¢é˜…æ”¯æŒï¼ˆå¯é€‰çš„ï¼‰</h3><p>æœ¬ä¸»é¢˜ä¸­è¿˜ä½¿ç”¨åˆ°äº† <a href="https://github.com/hexojs/hexo-generator-feed" target="_blank" rel="noopener">hexo-generator-feed</a> çš„ Hexo æ’ä»¶æ¥åš <code>RSS</code>ï¼Œå®‰è£…å‘½ä»¤å¦‚ä¸‹ï¼š</p><pre class=" language-bash"><code class="language-bash"><span class="token function">npm</span> <span class="token function">install</span> hexo-generator-feed --save</code></pre><p>åœ¨ Hexo æ ¹ç›®å½•ä¸‹çš„ <code>_config.yml</code> æ–‡ä»¶ä¸­ï¼Œæ–°å¢ä»¥ä¸‹çš„é…ç½®é¡¹ï¼š</p><pre class=" language-yaml"><code class="language-yaml"><span class="token key atrule">feed</span><span class="token punctuation">:</span>  <span class="token key atrule">type</span><span class="token punctuation">:</span> atom  <span class="token key atrule">path</span><span class="token punctuation">:</span> atom.xml  <span class="token key atrule">limit</span><span class="token punctuation">:</span> <span class="token number">20</span>  <span class="token key atrule">hub</span><span class="token punctuation">:</span>  <span class="token key atrule">content</span><span class="token punctuation">:</span>  <span class="token key atrule">content_limit</span><span class="token punctuation">:</span> <span class="token number">140</span>  <span class="token key atrule">content_limit_delim</span><span class="token punctuation">:</span> <span class="token string">' '</span>  <span class="token key atrule">order_by</span><span class="token punctuation">:</span> <span class="token punctuation">-</span>date</code></pre><p>æ‰§è¡Œ <code>hexo clean &amp;&amp; hexo g</code> é‡æ–°ç”Ÿæˆåšå®¢æ–‡ä»¶ï¼Œç„¶ååœ¨ <code>public</code> æ–‡ä»¶å¤¹ä¸­å³å¯çœ‹åˆ° <code>atom.xml</code> æ–‡ä»¶ï¼Œè¯´æ˜ä½ å·²ç»å®‰è£…æˆåŠŸäº†ã€‚</p><h3 id="æ·»åŠ -DaoVoice-åœ¨çº¿èŠå¤©åŠŸèƒ½ï¼ˆå¯é€‰çš„ï¼‰"><a href="#æ·»åŠ -DaoVoice-åœ¨çº¿èŠå¤©åŠŸèƒ½ï¼ˆå¯é€‰çš„ï¼‰" class="headerlink" title="æ·»åŠ  DaoVoice åœ¨çº¿èŠå¤©åŠŸèƒ½ï¼ˆå¯é€‰çš„ï¼‰"></a>æ·»åŠ  <a href="http://www.daovoice.io/" target="_blank" rel="noopener">DaoVoice</a> åœ¨çº¿èŠå¤©åŠŸèƒ½ï¼ˆå¯é€‰çš„ï¼‰</h3><p>å‰å¾€ <a href="http://www.daovoice.io/" target="_blank" rel="noopener">DaoVoice</a> å®˜ç½‘æ³¨å†Œå¹¶ä¸”è·å– <code>app_id</code>ï¼Œå¹¶å°† <code>app_id</code> å¡«å…¥ä¸»é¢˜çš„ <code>_config.yml</code> æ–‡ä»¶ä¸­ã€‚</p><h3 id="æ·»åŠ -Tidio-åœ¨çº¿èŠå¤©åŠŸèƒ½ï¼ˆå¯é€‰çš„ï¼‰"><a href="#æ·»åŠ -Tidio-åœ¨çº¿èŠå¤©åŠŸèƒ½ï¼ˆå¯é€‰çš„ï¼‰" class="headerlink" title="æ·»åŠ  Tidio åœ¨çº¿èŠå¤©åŠŸèƒ½ï¼ˆå¯é€‰çš„ï¼‰"></a>æ·»åŠ  <a href="https://www.tidio.com/" target="_blank" rel="noopener">Tidio</a> åœ¨çº¿èŠå¤©åŠŸèƒ½ï¼ˆå¯é€‰çš„ï¼‰</h3><p>å‰å¾€ <a href="https://www.tidio.com/" target="_blank" rel="noopener">Tidio</a> å®˜ç½‘æ³¨å†Œå¹¶ä¸”è·å– <code>Public Key</code>ï¼Œå¹¶å°† <code>Public Key</code> å¡«å…¥ä¸»é¢˜çš„ <code>_config.yml</code> æ–‡ä»¶ä¸­ã€‚</p><h3 id="ä¿®æ”¹é¡µè„š"><a href="#ä¿®æ”¹é¡µè„š" class="headerlink" title="ä¿®æ”¹é¡µè„š"></a>ä¿®æ”¹é¡µè„š</h3><p>é¡µè„šä¿¡æ¯å¯èƒ½éœ€è¦åšå®šåˆ¶åŒ–ä¿®æ”¹ï¼Œè€Œä¸”å®ƒä¸ä¾¿äºåšæˆé…ç½®ä¿¡æ¯ï¼Œæ‰€ä»¥å¯èƒ½éœ€è¦ä½ è‡ªå·±å»å†ä¿®æ”¹å’ŒåŠ å·¥ã€‚ä¿®æ”¹çš„åœ°æ–¹åœ¨ä¸»é¢˜æ–‡ä»¶çš„ <code>/layout/_partial/footer.ejs</code> æ–‡ä»¶ä¸­ï¼ŒåŒ…æ‹¬ç«™ç‚¹ã€ä½¿ç”¨çš„ä¸»é¢˜ã€è®¿é—®é‡ç­‰ã€‚</p><h3 id="ä¿®æ”¹ç¤¾äº¤é“¾æ¥"><a href="#ä¿®æ”¹ç¤¾äº¤é“¾æ¥" class="headerlink" title="ä¿®æ”¹ç¤¾äº¤é“¾æ¥"></a>ä¿®æ”¹ç¤¾äº¤é“¾æ¥</h3><p>åœ¨ä¸»é¢˜çš„ <code>_config.yml</code> æ–‡ä»¶ä¸­ï¼Œé»˜è®¤æ”¯æŒ <code>QQ</code>ã€<code>GitHub</code> å’Œé‚®ç®±ç­‰çš„é…ç½®ï¼Œä½ å¯ä»¥åœ¨ä¸»é¢˜æ–‡ä»¶çš„ <code>/layout/_partial/social-link.ejs</code> æ–‡ä»¶ä¸­ï¼Œæ–°å¢ã€ä¿®æ”¹ä½ éœ€è¦çš„ç¤¾äº¤é“¾æ¥åœ°å€ï¼Œå¢åŠ é“¾æ¥å¯å‚è€ƒå¦‚ä¸‹ä»£ç ï¼š</p><pre class=" language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>%</span> <span class="token attr-name">if</span> <span class="token attr-name">(theme.socialLink.github)</span> <span class="token attr-name">{</span> <span class="token attr-name">%</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>&lt;%<span class="token punctuation">=</span> theme.socialLink.github %<span class="token punctuation">></span><span class="token punctuation">"</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>tooltipped<span class="token punctuation">"</span></span> <span class="token attr-name">target</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>_blank<span class="token punctuation">"</span></span> <span class="token attr-name">data-tooltip</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>è®¿é—®æˆ‘çš„GitHub<span class="token punctuation">"</span></span> <span class="token attr-name">data-position</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>top<span class="token punctuation">"</span></span> <span class="token attr-name">data-delay</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>50<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>i</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>fab fa-github<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>i</span><span class="token punctuation">></span></span>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>%</span> <span class="token attr-name">}</span> <span class="token attr-name">%</span><span class="token punctuation">></span></span></code></pre><p>å…¶ä¸­ï¼Œç¤¾äº¤å›¾æ ‡ï¼ˆå¦‚ï¼š<code>fa-github</code>ï¼‰ä½ å¯ä»¥åœ¨ <a href="https://fontawesome.com/icons" target="_blank" rel="noopener">Font Awesome</a> ä¸­æœç´¢æ‰¾åˆ°ã€‚ä»¥ä¸‹æ˜¯å¸¸ç”¨ç¤¾äº¤å›¾æ ‡çš„æ ‡è¯†ï¼Œä¾›ä½ å‚è€ƒï¼š</p><ul><li>Facebook: <code>fab fa-facebook</code></li><li>Twitter: <code>fab fa-twitter</code></li><li>Google-plus: <code>fab fa-google-plus</code></li><li>Linkedin: <code>fab fa-linkedin</code></li><li>Tumblr: <code>fab fa-tumblr</code></li><li>Medium: <code>fab fa-medium</code></li><li>Slack: <code>fab fa-slack</code></li><li>Sina Weibo: <code>fab fa-weibo</code></li><li>Wechat: <code>fab fa-weixin</code></li><li>QQ: <code>fab fa-qq</code></li><li>Zhihu: <code>fab fa-zhihu</code></li></ul><blockquote><p><strong>æ³¨æ„</strong>: æœ¬ä¸»é¢˜ä¸­ä½¿ç”¨çš„ <code>Font Awesome</code> ç‰ˆæœ¬ä¸º <code>5.11.0</code>ã€‚</p></blockquote><h3 id="ä¿®æ”¹æ‰“èµçš„äºŒç»´ç å›¾ç‰‡"><a href="#ä¿®æ”¹æ‰“èµçš„äºŒç»´ç å›¾ç‰‡" class="headerlink" title="ä¿®æ”¹æ‰“èµçš„äºŒç»´ç å›¾ç‰‡"></a>ä¿®æ”¹æ‰“èµçš„äºŒç»´ç å›¾ç‰‡</h3><p>åœ¨ä¸»é¢˜æ–‡ä»¶çš„ <code>source/medias/reward</code> æ–‡ä»¶ä¸­ï¼Œä½ å¯ä»¥æ›¿æ¢æˆä½ çš„çš„å¾®ä¿¡å’Œæ”¯ä»˜å®çš„æ‰“èµäºŒç»´ç å›¾ç‰‡ã€‚</p><h3 id="é…ç½®éŸ³ä¹æ’­æ”¾å™¨ï¼ˆå¯é€‰çš„ï¼‰"><a href="#é…ç½®éŸ³ä¹æ’­æ”¾å™¨ï¼ˆå¯é€‰çš„ï¼‰" class="headerlink" title="é…ç½®éŸ³ä¹æ’­æ”¾å™¨ï¼ˆå¯é€‰çš„ï¼‰"></a>é…ç½®éŸ³ä¹æ’­æ”¾å™¨ï¼ˆå¯é€‰çš„ï¼‰</h3><p>è¦æ”¯æŒéŸ³ä¹æ’­æ”¾ï¼Œå°±å¿…é¡»å¼€å¯éŸ³ä¹çš„æ’­æ”¾é…ç½®å’ŒéŸ³ä¹æ•°æ®çš„æ–‡ä»¶ã€‚</p><p>é¦–å…ˆï¼Œåœ¨ä½ çš„åšå®¢ <code>source</code> ç›®å½•ä¸‹çš„ <code>_data</code> ç›®å½•ï¼ˆæ²¡æœ‰çš„è¯å°±æ–°å»ºä¸€ä¸ªï¼‰ä¸­æ–°å»º <code>musics.json</code> æ–‡ä»¶ï¼Œæ–‡ä»¶å†…å®¹å¦‚ä¸‹æ‰€ç¤ºï¼š</p><pre class=" language-json"><code class="language-json"><span class="token punctuation">[</span><span class="token punctuation">{</span>    <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"äº”æœˆé›¨å˜å¥ç”µéŸ³"</span><span class="token punctuation">,</span>    <span class="token property">"artist"</span><span class="token operator">:</span> <span class="token string">"AnimeVibe"</span><span class="token punctuation">,</span>    <span class="token property">"url"</span><span class="token operator">:</span> <span class="token string">"http://xxx.com/music1.mp3"</span><span class="token punctuation">,</span>    <span class="token property">"cover"</span><span class="token operator">:</span> <span class="token string">"http://xxx.com/music-cover1.png"</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>    <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"Take me hand"</span><span class="token punctuation">,</span>    <span class="token property">"artist"</span><span class="token operator">:</span> <span class="token string">"DAISHI DANCE,Cecile Corbel"</span><span class="token punctuation">,</span>    <span class="token property">"url"</span><span class="token operator">:</span> <span class="token string">"/medias/music/music2.mp3"</span><span class="token punctuation">,</span>    <span class="token property">"cover"</span><span class="token operator">:</span> <span class="token string">"/medias/music/cover2.png"</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>    <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"Shape of You"</span><span class="token punctuation">,</span>    <span class="token property">"artist"</span><span class="token operator">:</span> <span class="token string">"J.Fla"</span><span class="token punctuation">,</span>    <span class="token property">"url"</span><span class="token operator">:</span> <span class="token string">"http://xxx.com/music3.mp3"</span><span class="token punctuation">,</span>    <span class="token property">"cover"</span><span class="token operator">:</span> <span class="token string">"http://xxx.com/music-cover3.png"</span><span class="token punctuation">}</span><span class="token punctuation">]</span></code></pre><blockquote><p><strong>æ³¨</strong>ï¼šä»¥ä¸Š JSON ä¸­çš„å±æ€§ï¼š<code>name</code>ã€<code>artist</code>ã€<code>url</code>ã€<code>cover</code> åˆ†åˆ«è¡¨ç¤ºéŸ³ä¹çš„åç§°ã€ä½œè€…ã€éŸ³ä¹æ–‡ä»¶åœ°å€ã€éŸ³ä¹å°é¢ã€‚</p></blockquote><p>ç„¶åï¼Œåœ¨ä¸»é¢˜çš„ <code>_config.yml</code> é…ç½®æ–‡ä»¶ä¸­æ¿€æ´»é…ç½®å³å¯ï¼š</p><pre class=" language-yaml"><code class="language-yaml"><span class="token comment" spellcheck="true"># æ˜¯å¦åœ¨é¦–é¡µæ˜¾ç¤ºéŸ³ä¹.</span><span class="token key atrule">music</span><span class="token punctuation">:</span>  <span class="token key atrule">enable</span><span class="token punctuation">:</span> <span class="token boolean important">true</span>  <span class="token key atrule">showTitle</span><span class="token punctuation">:</span> <span class="token boolean important">false</span>  <span class="token key atrule">title</span><span class="token punctuation">:</span> å¬å¬éŸ³ä¹  <span class="token key atrule">fixed</span><span class="token punctuation">:</span> <span class="token boolean important">false </span><span class="token comment" spellcheck="true"># æ˜¯å¦å¼€å¯å¸åº•æ¨¡å¼</span>  <span class="token key atrule">autoplay</span><span class="token punctuation">:</span> <span class="token boolean important">false </span><span class="token comment" spellcheck="true"># æ˜¯å¦è‡ªåŠ¨æ’­æ”¾</span>  <span class="token key atrule">theme</span><span class="token punctuation">:</span> '<span class="token comment" spellcheck="true">#42b983'</span>  <span class="token key atrule">loop</span><span class="token punctuation">:</span> <span class="token string">'all'</span> <span class="token comment" spellcheck="true"># éŸ³é¢‘å¾ªç¯æ’­æ”¾, å¯é€‰å€¼: 'all', 'one', 'none'</span>  <span class="token key atrule">order</span><span class="token punctuation">:</span> <span class="token string">'list'</span> <span class="token comment" spellcheck="true"># éŸ³é¢‘å¾ªç¯é¡ºåº, å¯é€‰å€¼: 'list', 'random'</span>  <span class="token key atrule">preload</span><span class="token punctuation">:</span> <span class="token string">'auto'</span> <span class="token comment" spellcheck="true"># é¢„åŠ è½½ï¼Œå¯é€‰å€¼: 'none', 'metadata', 'auto'</span>  <span class="token key atrule">volume</span><span class="token punctuation">:</span> <span class="token number">0.7 </span><span class="token comment" spellcheck="true"># é»˜è®¤éŸ³é‡ï¼Œè¯·æ³¨æ„æ’­æ”¾å™¨ä¼šè®°å¿†ç”¨æˆ·è®¾ç½®ï¼Œç”¨æˆ·æ‰‹åŠ¨è®¾ç½®éŸ³é‡åé»˜è®¤éŸ³é‡å³å¤±æ•ˆ</span>  <span class="token key atrule">listFolded</span><span class="token punctuation">:</span> <span class="token boolean important">false </span><span class="token comment" spellcheck="true"># åˆ—è¡¨é»˜è®¤æŠ˜å </span>  <span class="token key atrule">listMaxHeight</span><span class="token punctuation">:</span> <span class="token comment" spellcheck="true"># åˆ—è¡¨æœ€å¤§é«˜åº¦</span></code></pre><h2 id="æ–‡ç« -Front-matter-ä»‹ç»"><a href="#æ–‡ç« -Front-matter-ä»‹ç»" class="headerlink" title="æ–‡ç«  Front-matter ä»‹ç»"></a>æ–‡ç«  Front-matter ä»‹ç»</h2><h3 id="Front-matter-é€‰é¡¹è¯¦è§£"><a href="#Front-matter-é€‰é¡¹è¯¦è§£" class="headerlink" title="Front-matter é€‰é¡¹è¯¦è§£"></a>Front-matter é€‰é¡¹è¯¦è§£</h3><p><code>Front-matter</code> é€‰é¡¹ä¸­çš„æ‰€æœ‰å†…å®¹å‡ä¸º<strong>éå¿…å¡«</strong>çš„ã€‚ä½†æˆ‘ä»ç„¶å»ºè®®è‡³å°‘å¡«å†™ <code>title</code> å’Œ <code>date</code> çš„å€¼ã€‚</p><table><thead><tr><th>é…ç½®é€‰é¡¹</th><th>é»˜è®¤å€¼</th><th>æè¿°</th></tr></thead><tbody><tr><td>title</td><td><code>Markdown</code> çš„æ–‡ä»¶æ ‡é¢˜</td><td>æ–‡ç« æ ‡é¢˜ï¼Œå¼ºçƒˆå»ºè®®å¡«å†™æ­¤é€‰é¡¹</td></tr><tr><td>date</td><td>æ–‡ä»¶åˆ›å»ºæ—¶çš„æ—¥æœŸæ—¶é—´</td><td>å‘å¸ƒæ—¶é—´ï¼Œå¼ºçƒˆå»ºè®®å¡«å†™æ­¤é€‰é¡¹ï¼Œä¸”æœ€å¥½ä¿è¯å…¨å±€å”¯ä¸€</td></tr><tr><td>author</td><td>æ ¹ <code>_config.yml</code> ä¸­çš„ <code>author</code></td><td>æ–‡ç« ä½œè€…</td></tr><tr><td>img</td><td><code>featureImages</code> ä¸­çš„æŸä¸ªå€¼</td><td>æ–‡ç« ç‰¹å¾å›¾ï¼Œæ¨èä½¿ç”¨å›¾åºŠ(è…¾è®¯äº‘ã€ä¸ƒç‰›äº‘ã€åˆæ‹äº‘ç­‰)æ¥åšå›¾ç‰‡çš„è·¯å¾„.å¦‚: <code>http://xxx.com/xxx.jpg</code></td></tr><tr><td>top</td><td><code>true</code></td><td>æ¨èæ–‡ç« ï¼ˆæ–‡ç« æ˜¯å¦ç½®é¡¶ï¼‰ï¼Œå¦‚æœ <code>top</code> å€¼ä¸º <code>true</code>ï¼Œåˆ™ä¼šä½œä¸ºé¦–é¡µæ¨èæ–‡ç« </td></tr><tr><td>cover</td><td><code>false</code></td><td><code>v1.0.2</code>ç‰ˆæœ¬æ–°å¢ï¼Œè¡¨ç¤ºè¯¥æ–‡ç« æ˜¯å¦éœ€è¦åŠ å…¥åˆ°é¦–é¡µè½®æ’­å°é¢ä¸­</td></tr><tr><td>coverImg</td><td>æ— </td><td><code>v1.0.2</code>ç‰ˆæœ¬æ–°å¢ï¼Œè¡¨ç¤ºè¯¥æ–‡ç« åœ¨é¦–é¡µè½®æ’­å°é¢éœ€è¦æ˜¾ç¤ºçš„å›¾ç‰‡è·¯å¾„ï¼Œå¦‚æœæ²¡æœ‰ï¼Œåˆ™é»˜è®¤ä½¿ç”¨æ–‡ç« çš„ç‰¹è‰²å›¾ç‰‡</td></tr><tr><td>password</td><td>æ— </td><td>æ–‡ç« é˜…è¯»å¯†ç ï¼Œå¦‚æœè¦å¯¹æ–‡ç« è®¾ç½®é˜…è¯»éªŒè¯å¯†ç çš„è¯ï¼Œå°±å¯ä»¥è®¾ç½® <code>password</code> çš„å€¼ï¼Œè¯¥å€¼å¿…é¡»æ˜¯ç”¨ <code>SHA256</code> åŠ å¯†åçš„å¯†ç ï¼Œé˜²æ­¢è¢«ä»–äººè¯†ç ´ã€‚å‰ææ˜¯åœ¨ä¸»é¢˜çš„ <code>config.yml</code> ä¸­æ¿€æ´»äº† <code>verifyPassword</code> é€‰é¡¹</td></tr><tr><td>toc</td><td><code>true</code></td><td>æ˜¯å¦å¼€å¯ TOCï¼Œå¯ä»¥é’ˆå¯¹æŸç¯‡æ–‡ç« å•ç‹¬å…³é—­ TOC çš„åŠŸèƒ½ã€‚å‰ææ˜¯åœ¨ä¸»é¢˜çš„ <code>config.yml</code> ä¸­æ¿€æ´»äº† <code>toc</code> é€‰é¡¹</td></tr><tr><td>mathjax</td><td><code>false</code></td><td>æ˜¯å¦å¼€å¯æ•°å­¦å…¬å¼æ”¯æŒ ï¼Œæœ¬æ–‡ç« æ˜¯å¦å¼€å¯ <code>mathjax</code>ï¼Œä¸”éœ€è¦åœ¨ä¸»é¢˜çš„ <code>_config.yml</code> æ–‡ä»¶ä¸­ä¹Ÿéœ€è¦å¼€å¯æ‰è¡Œ</td></tr><tr><td>summary</td><td>æ— </td><td>æ–‡ç« æ‘˜è¦ï¼Œè‡ªå®šä¹‰çš„æ–‡ç« æ‘˜è¦å†…å®¹ï¼Œå¦‚æœè¿™ä¸ªå±æ€§æœ‰å€¼ï¼Œæ–‡ç« å¡ç‰‡æ‘˜è¦å°±æ˜¾ç¤ºè¿™æ®µæ–‡å­—ï¼Œå¦åˆ™ç¨‹åºä¼šè‡ªåŠ¨æˆªå–æ–‡ç« çš„éƒ¨åˆ†å†…å®¹ä½œä¸ºæ‘˜è¦</td></tr><tr><td>categories</td><td>æ— </td><td>æ–‡ç« åˆ†ç±»ï¼Œæœ¬ä¸»é¢˜çš„åˆ†ç±»è¡¨ç¤ºå®è§‚ä¸Šå¤§çš„åˆ†ç±»ï¼Œåªå»ºè®®ä¸€ç¯‡æ–‡ç« ä¸€ä¸ªåˆ†ç±»</td></tr><tr><td>tags</td><td>æ— </td><td>æ–‡ç« æ ‡ç­¾ï¼Œä¸€ç¯‡æ–‡ç« å¯ä»¥å¤šä¸ªæ ‡ç­¾</td></tr><tr><td>reprintPolicy</td><td>cc_by</td><td>æ–‡ç« è½¬è½½è§„åˆ™ï¼Œ å¯ä»¥æ˜¯ cc_by, cc_by_nd, cc_by_sa, cc_by_nc, cc_by_nc_nd, cc_by_nc_sa, cc0, noreprint æˆ– pay ä¸­çš„ä¸€ä¸ª</td></tr></tbody></table><blockquote><p><strong>æ³¨æ„</strong>:</p><ol><li>å¦‚æœ <code>img</code> å±æ€§ä¸å¡«å†™çš„è¯ï¼Œæ–‡ç« ç‰¹è‰²å›¾ä¼šæ ¹æ®æ–‡ç« æ ‡é¢˜çš„ <code>hashcode</code> çš„å€¼å–ä½™ï¼Œç„¶åé€‰å–ä¸»é¢˜ä¸­å¯¹åº”çš„ç‰¹è‰²å›¾ç‰‡ï¼Œä»è€Œè¾¾åˆ°è®©æ‰€æœ‰æ–‡ç« éƒ½çš„ç‰¹è‰²å›¾<strong>å„æœ‰ç‰¹è‰²</strong>ã€‚</li><li><code>date</code> çš„å€¼å°½é‡ä¿è¯æ¯ç¯‡æ–‡ç« æ˜¯å”¯ä¸€çš„ï¼Œå› ä¸ºæœ¬ä¸»é¢˜ä¸­ <code>Gitalk</code> å’Œ <code>Gitment</code> è¯†åˆ« <code>id</code> æ˜¯é€šè¿‡ <code>date</code> çš„å€¼æ¥ä½œä¸ºå”¯ä¸€æ ‡è¯†çš„ã€‚</li><li>å¦‚æœè¦å¯¹æ–‡ç« è®¾ç½®é˜…è¯»éªŒè¯å¯†ç çš„åŠŸèƒ½ï¼Œä¸ä»…è¦åœ¨ Front-matter ä¸­è®¾ç½®é‡‡ç”¨äº† SHA256 åŠ å¯†çš„ password çš„å€¼ï¼Œè¿˜éœ€è¦åœ¨ä¸»é¢˜çš„ <code>_config.yml</code> ä¸­æ¿€æ´»äº†é…ç½®ã€‚æœ‰äº›åœ¨çº¿çš„ SHA256 åŠ å¯†çš„åœ°å€ï¼Œå¯ä¾›ä½ ä½¿ç”¨ï¼š<a href="http://tool.oschina.net/encrypt?type=2" target="_blank" rel="noopener">å¼€æºä¸­å›½åœ¨çº¿å·¥å…·</a>ã€<a href="http://encode.chahuo.com/" target="_blank" rel="noopener">chahuo</a>ã€<a href="http://tool.chinaz.com/tools/hash.aspx" target="_blank" rel="noopener">ç«™é•¿å·¥å…·</a>ã€‚</li><li>æ‚¨å¯ä»¥åœ¨æ–‡ç« mdæ–‡ä»¶çš„ front-matter ä¸­æŒ‡å®š reprintPolicy æ¥ç»™å•ä¸ªæ–‡ç« é…ç½®è½¬è½½è§„åˆ™</li></ol></blockquote><p>ä»¥ä¸‹ä¸ºæ–‡ç« çš„ <code>Front-matter</code> ç¤ºä¾‹ã€‚</p><h3 id="æœ€ç®€ç¤ºä¾‹"><a href="#æœ€ç®€ç¤ºä¾‹" class="headerlink" title="æœ€ç®€ç¤ºä¾‹"></a>æœ€ç®€ç¤ºä¾‹</h3><pre class=" language-yaml"><code class="language-yaml"><span class="token punctuation">---</span><span class="token key atrule">title</span><span class="token punctuation">:</span> typora<span class="token punctuation">-</span>vue<span class="token punctuation">-</span>themeä¸»é¢˜ä»‹ç»<span class="token key atrule">date</span><span class="token punctuation">:</span> <span class="token datetime number">2018-09-07 09:25:00</span><span class="token punctuation">---</span></code></pre><h3 id="æœ€å…¨ç¤ºä¾‹"><a href="#æœ€å…¨ç¤ºä¾‹" class="headerlink" title="æœ€å…¨ç¤ºä¾‹"></a>æœ€å…¨ç¤ºä¾‹</h3><pre class=" language-yaml"><code class="language-yaml"><span class="token punctuation">---</span><span class="token key atrule">title</span><span class="token punctuation">:</span> typora<span class="token punctuation">-</span>vue<span class="token punctuation">-</span>themeä¸»é¢˜ä»‹ç»<span class="token key atrule">date</span><span class="token punctuation">:</span> <span class="token datetime number">2018-09-07 09:25:00</span><span class="token key atrule">author</span><span class="token punctuation">:</span> èµµå¥‡<span class="token key atrule">img</span><span class="token punctuation">:</span> /source/images/xxx.jpg<span class="token key atrule">top</span><span class="token punctuation">:</span> <span class="token boolean important">true</span><span class="token key atrule">cover</span><span class="token punctuation">:</span> <span class="token boolean important">true</span><span class="token key atrule">coverImg</span><span class="token punctuation">:</span> /images/1.jpg<span class="token key atrule">password</span><span class="token punctuation">:</span> 8d969eef6ecad3c29a3a629280e686cf0c3f5d5a86aff3ca12020c923adc6c92<span class="token key atrule">toc</span><span class="token punctuation">:</span> <span class="token boolean important">false</span><span class="token key atrule">mathjax</span><span class="token punctuation">:</span> <span class="token boolean important">false</span><span class="token key atrule">summary</span><span class="token punctuation">:</span> è¿™æ˜¯ä½ è‡ªå®šä¹‰çš„æ–‡ç« æ‘˜è¦å†…å®¹ï¼Œå¦‚æœè¿™ä¸ªå±æ€§æœ‰å€¼ï¼Œæ–‡ç« å¡ç‰‡æ‘˜è¦å°±æ˜¾ç¤ºè¿™æ®µæ–‡å­—ï¼Œå¦åˆ™ç¨‹åºä¼šè‡ªåŠ¨æˆªå–æ–‡ç« çš„éƒ¨åˆ†å†…å®¹ä½œä¸ºæ‘˜è¦<span class="token key atrule">categories</span><span class="token punctuation">:</span> Markdown<span class="token key atrule">tags</span><span class="token punctuation">:</span>  <span class="token punctuation">-</span> Typora  <span class="token punctuation">-</span> Markdown<span class="token punctuation">---</span></code></pre><h2 id="æ•ˆæœæˆªå›¾"><a href="#æ•ˆæœæˆªå›¾" class="headerlink" title="æ•ˆæœæˆªå›¾"></a>æ•ˆæœæˆªå›¾</h2><p><img src="http://static.blinkfox.com/matery-20181202-1.png" alt="é¦–é¡µ"></p><p><img src="http://static.blinkfox.com/matery-20181202-2.png" alt="é¦–é¡µæ¨èæ–‡ç« "></p><p><img src="http://static.blinkfox.com/matery-20181202-3.png" alt="é¦–é¡µæ–‡ç« åˆ—è¡¨"></p><p><img src="http://static.blinkfox.com/matery-20181202-7.png" alt="é¦–é¡µæ–‡ç« åˆ—è¡¨"></p><p><img src="http://static.blinkfox.com/matery-20181202-8.png" alt="é¦–é¡µæ–‡ç« åˆ—è¡¨"></p><h2 id="è‡ªå®šåˆ¶ä¿®æ”¹"><a href="#è‡ªå®šåˆ¶ä¿®æ”¹" class="headerlink" title="è‡ªå®šåˆ¶ä¿®æ”¹"></a>è‡ªå®šåˆ¶ä¿®æ”¹</h2><p>åœ¨æœ¬ä¸»é¢˜çš„ <code>_config.yml</code> ä¸­å¯ä»¥ä¿®æ”¹éƒ¨åˆ†è‡ªå®šä¹‰ä¿¡æ¯ï¼Œæœ‰ä»¥ä¸‹å‡ ä¸ªéƒ¨åˆ†ï¼š</p><ul><li>èœå•</li><li>æˆ‘çš„æ¢¦æƒ³</li><li>é¦–é¡µçš„éŸ³ä¹æ’­æ”¾å™¨å’Œè§†é¢‘æ’­æ”¾å™¨é…ç½®</li><li>æ˜¯å¦æ˜¾ç¤ºæ¨èæ–‡ç« åç§°å’ŒæŒ‰é’®é…ç½®</li><li><code>favicon</code> å’Œ <code>Logo</code></li><li>ä¸ªäººä¿¡æ¯</li><li>TOC ç›®å½•</li><li>æ–‡ç« æ‰“èµä¿¡æ¯</li><li>å¤åˆ¶æ–‡ç« å†…å®¹æ—¶è¿½åŠ ç‰ˆæƒä¿¡æ¯</li><li>MathJax</li><li>æ–‡ç« å­—æ•°ç»Ÿè®¡ã€é˜…è¯»æ—¶é•¿</li><li>ç‚¹å‡»é¡µé¢çš„â€™çˆ±å¿ƒâ€™æ•ˆæœ</li><li>æˆ‘çš„é¡¹ç›®</li><li>æˆ‘çš„æŠ€èƒ½</li><li>æˆ‘çš„ç›¸å†Œ</li><li><code>Gitalk</code>ã€<code>Gitment</code>ã€<code>Valine</code> å’Œ <code>disqus</code> è¯„è®ºé…ç½®</li><li><a href="http://busuanzi.ibruce.info/" target="_blank" rel="noopener">ä¸è’œå­ç»Ÿè®¡</a>å’Œè°·æ­Œåˆ†æï¼ˆ<code>Google Analytics</code>ï¼‰</li><li>é»˜è®¤ç‰¹è‰²å›¾çš„é›†åˆã€‚å½“æ–‡ç« æ²¡æœ‰è®¾ç½®ç‰¹è‰²å›¾æ—¶ï¼Œæœ¬ä¸»é¢˜ä¼šæ ¹æ®æ–‡ç« æ ‡é¢˜çš„ <code>hashcode</code> å€¼å–ä½™ï¼Œæ¥é€‰æ‹©å±•ç¤ºå¯¹åº”çš„ç‰¹è‰²å›¾</li></ul><p><strong>æˆ‘è®¤ä¸ºä¸ªäººåšå®¢åº”è¯¥éƒ½æœ‰è‡ªå·±çš„é£æ ¼å’Œç‰¹è‰²</strong>ã€‚å¦‚æœæœ¬ä¸»é¢˜ä¸­çš„è¯¸å¤šåŠŸèƒ½å’Œä¸»é¢˜è‰²å½©ä½ ä¸æ»¡æ„ï¼Œå¯ä»¥åœ¨ä¸»é¢˜ä¸­è‡ªå®šä¹‰ä¿®æ”¹ï¼Œå¾ˆå¤šæ›´è‡ªç”±çš„åŠŸèƒ½å’Œç»†èŠ‚ç‚¹çš„ä¿®æ”¹éš¾ä»¥åœ¨ä¸»é¢˜çš„ <code>_config.yml</code> ä¸­å®Œæˆï¼Œéœ€è¦ä¿®æ”¹æºä»£ç æ‰æ¥å®Œæˆã€‚ä»¥ä¸‹åˆ—å‡ºäº†å¯èƒ½å¯¹ä½ æœ‰ç”¨çš„åœ°æ–¹ï¼š</p><h3 id="ä¿®æ”¹ä¸»é¢˜é¢œè‰²"><a href="#ä¿®æ”¹ä¸»é¢˜é¢œè‰²" class="headerlink" title="ä¿®æ”¹ä¸»é¢˜é¢œè‰²"></a>ä¿®æ”¹ä¸»é¢˜é¢œè‰²</h3><p>åœ¨ä¸»é¢˜æ–‡ä»¶çš„ <code>/source/css/matery.css</code> æ–‡ä»¶ä¸­ï¼Œæœç´¢ <code>.bg-color</code> æ¥ä¿®æ”¹èƒŒæ™¯é¢œè‰²ï¼š</p><pre class=" language-css"><code class="language-css"><span class="token comment" spellcheck="true">/* æ•´ä½“èƒŒæ™¯é¢œè‰²ï¼ŒåŒ…æ‹¬å¯¼èˆªã€ç§»åŠ¨ç«¯çš„å¯¼èˆªã€é¡µå°¾ã€æ ‡ç­¾é¡µç­‰çš„èƒŒæ™¯é¢œè‰². */</span><span class="token selector"><span class="token class">.bg-color</span> </span><span class="token punctuation">{</span>    <span class="token property">background-image</span><span class="token punctuation">:</span> <span class="token function">linear-gradient</span><span class="token punctuation">(</span>to right, <span class="token hexcode">#4cbf30</span> <span class="token number">0%</span>, <span class="token hexcode">#0f9d58</span> <span class="token number">100%</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token atrule"><span class="token rule">@-webkit-keyframes</span> rainbow</span> <span class="token punctuation">{</span>   <span class="token comment" spellcheck="true">/* åŠ¨æ€åˆ‡æ¢èƒŒæ™¯é¢œè‰². */</span><span class="token punctuation">}</span><span class="token atrule"><span class="token rule">@keyframes</span> rainbow</span> <span class="token punctuation">{</span>    <span class="token comment" spellcheck="true">/* åŠ¨æ€åˆ‡æ¢èƒŒæ™¯é¢œè‰². */</span><span class="token punctuation">}</span></code></pre><h3 id="ä¿®æ”¹-banner-å›¾å’Œæ–‡ç« ç‰¹è‰²å›¾"><a href="#ä¿®æ”¹-banner-å›¾å’Œæ–‡ç« ç‰¹è‰²å›¾" class="headerlink" title="ä¿®æ”¹ banner å›¾å’Œæ–‡ç« ç‰¹è‰²å›¾"></a>ä¿®æ”¹ banner å›¾å’Œæ–‡ç« ç‰¹è‰²å›¾</h3><p>ä½ å¯ä»¥ç›´æ¥åœ¨ <code>/source/medias/banner</code> æ–‡ä»¶å¤¹ä¸­æ›´æ¢ä½ å–œæ¬¢çš„ <code>banner</code> å›¾ç‰‡ï¼Œä¸»é¢˜ä»£ç ä¸­æ˜¯æ¯å¤©åŠ¨æ€åˆ‡æ¢ä¸€å¼ ï¼Œåªéœ€ <code>7</code> å¼ å³å¯ã€‚å¦‚æœä½ ä¼š <code>JavaScript</code> ä»£ç ï¼Œå¯ä»¥ä¿®æ”¹æˆä½ è‡ªå·±å–œæ¬¢åˆ‡æ¢é€»è¾‘ï¼Œå¦‚ï¼šéšæœºåˆ‡æ¢ç­‰ï¼Œ<code>banner</code> åˆ‡æ¢çš„ä»£ç ä½ç½®åœ¨ <code>/layout/_partial/bg-cover-content.ejs</code> æ–‡ä»¶çš„ <code>&lt;script&gt;&lt;/script&gt;</code> ä»£ç ä¸­ï¼š</p><pre class=" language-javascript"><code class="language-javascript"><span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'.bg-cover'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">css</span><span class="token punctuation">(</span><span class="token string">'background-image'</span><span class="token punctuation">,</span> <span class="token string">'url(/medias/banner/'</span> <span class="token operator">+</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getDay</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">'.jpg)'</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre><p>åœ¨ <code>/source/medias/featureimages</code> æ–‡ä»¶å¤¹ä¸­é»˜è®¤æœ‰ 24 å¼ ç‰¹è‰²å›¾ç‰‡ï¼Œä½ å¯ä»¥å†å¢åŠ æˆ–è€…å‡å°‘ï¼Œå¹¶éœ€è¦åœ¨ <code>_config.yml</code> åšåŒæ­¥ä¿®æ”¹ã€‚</p><h2 id="ç‰ˆæœ¬è®°å½•"><a href="#ç‰ˆæœ¬è®°å½•" class="headerlink" title="ç‰ˆæœ¬è®°å½•"></a>ç‰ˆæœ¬è®°å½•</h2><ul><li>v1.1.0<ul><li>æ–°å¢äº† <code>emoji</code> çš„æ”¯æŒï¼›</li><li>æ–°å¢äº†ç«™ç‚¹è¿è¡Œæ—¶é—´ç»Ÿè®¡åŠé…ç½®ï¼›</li><li>æ–°å¢äº†ç•™è¨€æ¿çš„åŠŸèƒ½,é»˜è®¤æœªå¼€å¯ï¼›</li><li>æ–°å¢äº† <code>Twitter</code>ã€<code>Facebook</code>ã€çŸ¥ä¹çš„ç¤¾äº¤é“¾æ¥ï¼›</li><li>æ›´æ–°äº† <code>Valine</code> çš„ç‰ˆæœ¬ä¸ºæœ€æ–°ç‰ˆï¼›</li><li>å…¶ä»–å°ç»†èŠ‚çš„ä¿®æ”¹ï¼›</li></ul></li><li>v1.0.4<ul><li>æ–°å¢äº†èƒ½ä¸ºæ¯ç¯‡æ–‡ç« éƒ½è‡ªå®šä¹‰è½¬è½½è§„åˆ™çš„åŠŸèƒ½ï¼›</li><li>ä¿®å¤ä¸Šä¸€é¡µã€ä¸‹ä¸€é¡µçš„è‡ªå®šä¹‰ <code>summary</code> ä¸æ˜¾ç¤ºçš„é—®é¢˜ï¼›</li><li>ä¿®å¤äº†å‹æƒ…é“¾æ¥æ˜¾ç¤ºé”™ä½çš„é—®é¢˜ï¼Œæ”¹ä¸ºäº†ç€‘å¸ƒæµçš„å¸ƒå±€æ–¹å¼ï¼›</li><li>å…¶ä»–å°ç»†èŠ‚ bug çš„ä¿®æ”¹ï¼›</li></ul></li><li>v1.0.3<ul><li>æ–°å¢äº†<code>TOC</code>å±•å¼€ã€æ”¶ç¼©çš„æŒ‰é’®å’Œç›¸å…³é…ç½®ï¼Œé»˜è®¤æ˜¾ç¤ºæ­¤æŒ‰é’®ï¼›</li></ul></li><li>v1.0.2<ul><li>å‡çº§äº† <a href="https://materializecss.com/" target="_blank" rel="noopener">Materialize</a> æ¡†æ¶ç‰ˆæœ¬ä¸º<code>1.0.0</code>ï¼Œé‡æ„å’Œä¿®æ”¹äº†å‡çº§è¿‡ç¨‹ä¸­çš„éƒ¨åˆ†æ–‡ä»¶æˆ–é—®é¢˜ï¼›</li><li>æ–°å¢äº†é¦–é¡µå°é¢çš„å…¨å±è½®æ’­ç‰¹æ•ˆï¼Œå¯ä»¥å°†æ›´é‡è¦çš„æ–‡ç« è®¾ç½®åˆ°é¦–é¡µè½®æ’­ä¸­ï¼›</li><li>ä¿®å¤é¦–é¡µç¬¬ä¸€ä¸ªæŒ‰é’®æ˜¯ä¸­æ–‡çš„é—®é¢˜</li><li>ä¿®å¤äº† iPhone ä¸Šç‚¹å‡»æœç´¢è¾“å…¥è·å–ç„¦ç‚¹çš„é—®é¢˜ï¼›</li><li>ä¿®å¤äº† iPhone ä¸Šè¾“å…¥æ¡†è·å–ç„¦ç‚¹åé¡µé¢æ”¾å¤§çš„é—®é¢˜ï¼›</li><li>ä¿®å¤ä¸€äº›æ–‡ç« æˆ– UI æ˜¾ç¤ºé—®é¢˜ï¼›</li></ul></li><li>v1.0.1<ul><li>è°ƒæ•´ <code>css</code>ã€<code>js</code> çš„æ–‡ä»¶è¯·æ±‚è·¯å¾„åœ¨ä¸»é¢˜çš„<code>_config.yml</code>ä¸­é…ç½®ï¼Œä¾¿äºä½ æ›´å¿«æ·çš„é…ç½®è‡ªå·±çš„ CDNï¼›</li><li>æ–°å¢ä»£ç æ˜¯å¦æŠ˜è¡Œä¸ºå¯é…ç½®ï¼Œé»˜è®¤ä¸ºæŠ˜è¡Œï¼›</li><li>é»˜è®¤æ¿€æ´» <code>TOC</code> åŠŸèƒ½ï¼Œå¹¶æ–°å¢ä¸ºæŸç¯‡æ–‡ç« å…³é—­ <code>TOC</code> çš„ <code>Front-matter</code> é…ç½®é€‰é¡¹ï¼›</li><li>ä¿®å¤æ–‡ç« æ»šåŠ¨æ—¶ï¼Œé«˜äº®çš„ç›®å½•é€‰é¡¹ä¸å‡†ç¡®çš„é—®é¢˜ï¼›</li><li><code>IOS</code>ä¸‹ç§»é™¤æœç´¢æ¡†è‡ªåŠ¨è·å¾—ç„¦ç‚¹å±æ€§ï¼Œé˜²æ­¢è‡ªåŠ¨è·å¾—ç„¦ç‚¹åå¯¼è‡´è§†å›¾ä¸Šç§»ï¼›</li></ul></li><li>v1.0.0<ul><li>æ–°å¢äº†æ‰€æœ‰åŸºç¡€åŠŸèƒ½ï¼›</li></ul></li></ul><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> hexo </category>
          
      </categories>
      
      
        <tags>
            
            <tag> hexo </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hexo æ­å»ºä¸ªäººåšå®¢è¯¦ç»†æ•™ç¨‹</title>
      <link href="/2019/10/13/4/"/>
      <url>/2019/10/13/4/</url>
      
        <content type="html"><![CDATA[<h3 id="1-Hexoä»‹ç»"><a href="#1-Hexoä»‹ç»" class="headerlink" title="1.Hexoä»‹ç»"></a>1.Hexoä»‹ç»</h3><p>æœ¬æ–‡ä¼šè¯¦ç»†çš„ä»‹ç»å¦‚ä½•ä½¿ç”¨ Hexo æ­å»ºä¸ªäººåšå®¢ã€‚Hexo æ˜¯åŸºäº Node.js çš„å¿«é€Ÿã€ç®€æ´ä¸”é«˜æ•ˆçš„åšå®¢æ¡†æ¶ï¼Œæ‹¥æœ‰è¶…å¿«é€Ÿåº¦ã€ä¸€é”®éƒ¨ç½²ã€æ”¯æŒ Markdownã€ä¸°å¯Œçš„æ’ä»¶ç­‰ä¼˜ç§€çš„ç‰¹æ€§ã€‚ä»¥ä¸Šæ˜¯å®˜æ–¹å¯¹äºHexoçš„æè¿°ï¼Œå‡ºäº†ä»¥ä¸Šçš„æè¿°ï¼Œåˆ©ç”¨Hexoæ­å»ºä¸ªäººåšå®¢è¿˜æœ‰ä»¥ä¸‹ç‰¹ç‚¹ï¼š</p><blockquote><ul><li>å…¨æ˜¯é™æ€æ–‡ä»¶ï¼Œè®¿é—®é€Ÿåº¦å¿«ï¼›</li><li>å…è´¹æ–¹ä¾¿ï¼Œä¸ç”¨èŠ±ä¸€åˆ†é’±å°±å¯ä»¥æ­å»ºä¸€ä¸ªè‡ªç”±çš„ä¸ªäººåšå®¢ï¼Œä¸éœ€è¦æœåŠ¡å™¨ä¸éœ€è¦åå°ï¼›</li><li>å¯ä»¥éšæ„ç»‘å®šè‡ªå·±çš„åŸŸåï¼Œä¸ä»”ç»†çœ‹çš„è¯æ ¹æœ¬çœ‹ä¸å‡ºæ¥ä½ çš„ç½‘ç«™æ˜¯åŸºäºgithubçš„ï¼›</li><li>æ•°æ®ç»å¯¹å®‰å…¨ï¼ŒåŸºäºgithubçš„ç‰ˆæœ¬ç®¡ç†ï¼Œæƒ³æ¢å¤åˆ°å“ªä¸ªå†å²ç‰ˆæœ¬éƒ½è¡Œï¼›</li><li>åšå®¢å†…å®¹å¯ä»¥è½»æ¾æ‰“åŒ…ã€è½¬ç§»ã€å‘å¸ƒåˆ°å…¶å®ƒå¹³å°ï¼›</li></ul></blockquote><h5 id="1-1å‡†å¤‡å·¥ä½œ"><a href="#1-1å‡†å¤‡å·¥ä½œ" class="headerlink" title="1.1å‡†å¤‡å·¥ä½œ"></a>1.1å‡†å¤‡å·¥ä½œ</h5><ul><li>ä¸€ä¸ª<a href="https://github.com/" target="_blank" rel="noopener">GitHub</a>è´¦æˆ·ï¼ˆ<a href="https://coding.net/" target="_blank" rel="noopener">Coding</a> æˆ–è€…<a href="https://gitee.com/" target="_blank" rel="noopener">ç äº‘</a>ä¹Ÿå¯ä»¥ï¼Œä½†ç”±äº GitHub æ˜¯æœ€ä¸»æµçš„å¹³å°ï¼Œæ‰€ä»¥æœ¬æ–‡ä»¥ GitHub ä¸ºä¾‹ï¼Œå¦‚å¯¹å…¶ä»–å¹³å°æœ‰ç–‘é—®ï¼Œæ¬¢è¿æé—®)</li><li>å®‰è£…<a href="https://nodejs.org/en/download/" target="_blank" rel="noopener">Node.js</a>ï¼ŒNode.js æ˜¯å¤šå¹³å°çš„ï¼Œå»å®˜ç½‘é€‰æ‹©ç›¸åº”çš„ç³»ç»Ÿç‰ˆæœ¬ä¸‹è½½å®‰è£…å³å¯</li><li>å®‰è£…<a href="https://git-scm.com/" target="_blank" rel="noopener">Git</a>ï¼Œ<code>Git</code>ä¹Ÿæ˜¯å¤šå¹³å°çš„ï¼Œå»å®˜ç½‘é€‰æ‹©ç›¸åº”çš„ç³»ç»Ÿç‰ˆæœ¬ä¸‹è½½å®‰è£…å³å¯ã€‚ä¸Šæ–‡æåˆ°çš„ GitHubã€Codingã€ç äº‘éƒ½æ˜¯åŸºäº<code>Git</code>çš„ä»£ç æ‰˜ç®¡å¹³å°<h3 id="2-è®¾ç½®GitHubåšå®¢"><a href="#2-è®¾ç½®GitHubåšå®¢" class="headerlink" title="2.è®¾ç½®GitHubåšå®¢"></a>2.è®¾ç½®GitHubåšå®¢</h3><h5 id="2-1-åˆ›å»º-GitHub-ä»“åº“"><a href="#2-1-åˆ›å»º-GitHub-ä»“åº“" class="headerlink" title="2.1. åˆ›å»º GitHub ä»“åº“"></a>2.1. åˆ›å»º GitHub ä»“åº“</h5></li><li>æ–°å»ºä¸€ä¸ªåä¸ºä½ çš„ç”¨æˆ·å<code>.github.io</code>çš„ä»“åº“ã€‚æ¯”å¦‚è¯´ï¼Œå¦‚æœä½ çš„ GitHub ç”¨æˆ·åæ˜¯faber1ï¼Œé‚£ä¹ˆä½ å°±æ–°å»ºfaber1.github.ioçš„ä»“åº“ï¼ˆå¿…é¡»æ˜¯ä½ çš„ç”¨æˆ·åï¼Œå…¶å®ƒåç§°æ— æ•ˆï¼‰ï¼Œå°†æ¥ä½ çš„ç½‘ç«™è®¿é—®åœ°å€å°±æ˜¯ <a href="http://faber1.github.io" target="_blank" rel="noopener">http://faber1.github.io</a></li></ul><ul><li>æœ‰å‡ ä¸ªéœ€è¦æ³¨æ„çš„åœ°æ–¹<br>æ³¨å†Œçš„é‚®ç®±ä¸€å®šè¦éªŒè¯ï¼Œå¦åˆ™ä¸ä¼šæˆåŠŸ<br>ä»“åº“åå­—å¿…é¡»æ˜¯ï¼šusername.github.ioï¼Œå…¶ä¸­usernameæ˜¯ä½ çš„ç”¨æˆ·å<h5 id="2-2-ç»‘å®šåŸŸåï¼ˆå¯é€‰ï¼‰"><a href="#2-2-ç»‘å®šåŸŸåï¼ˆå¯é€‰ï¼‰" class="headerlink" title="2.2. ç»‘å®šåŸŸåï¼ˆå¯é€‰ï¼‰"></a>2.2. ç»‘å®šåŸŸåï¼ˆå¯é€‰ï¼‰</h5></li></ul><ul><li>å½“ç„¶ï¼Œä½ ä¸ç»‘å®šåŸŸåè‚¯å®šä¹Ÿæ˜¯å¯ä»¥çš„ï¼Œå°±ç”¨åˆšåˆšåˆ›å»ºçš„çš„ ä½ çš„ç”¨æˆ·å<code>.github.io</code>æ¥è®¿é—®ã€‚å¦‚æœä½ æƒ³æ›´ä¸ªæ€§ä¸€ç‚¹ï¼Œæƒ³æ‹¥æœ‰ä¸€ä¸ªå±äºè‡ªå·±çš„åŸŸåï¼Œé‚£ä¹Ÿæ˜¯OKçš„ã€‚å°±åƒæˆ‘çš„åšå®¢åœ°å€ï¼Œé»˜è®¤æ˜¯ <a href="http://faber1.github.io" target="_blank" rel="noopener">http://faber1.github.io</a> ï¼Œä½†æ˜¯ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨ <a href="https://faber1.cn" target="_blank" rel="noopener">https://faber1.cn</a> æ¥è®¿é—®ã€‚</li><li>é¦–å…ˆä½ è¦æ³¨å†Œä¸€ä¸ªåŸŸåï¼Œè…¾è®¯äº‘ ã€é˜¿é‡Œäº‘ ç­‰å›½å†…çš„åŸŸåå•†ä¹Ÿæ˜¯å¯ä»¥çš„ï¼Œè€Œä¸”æ–°ç”¨æˆ·ä¼šæœ‰ä¸€å®šçš„æŠ˜æ‰£ã€‚æ³¨å†Œå¥½åŸŸåï¼Œæ¥ä¸‹æ¥å°±æ˜¯åŸŸåè§£æäº†ï¼ˆåŸŸåè§£æå°±æ˜¯æŠŠä½ çš„åŸŸåç‰ˆç»‘å®šåˆ° GitHub æä¾›çš„åŸŸåçš„æ„æ€ï¼‰ã€‚å¦‚æœä½ ä¸ä¼šå¡«å†™è§£æè®°å½•ï¼Œé‚£ä¹ˆæˆ‘å»ºè®®ä½ ç›´æ¥æŒ‰ç…§æˆ‘çš„æ¥å¡«å†™:<br><img src="/2019/10/13/4/1.png" alt=""><br>åœ¨ä½ ç»‘å®šäº†æ–°åŸŸåä¹‹åï¼ŒåŸæ¥çš„ä½ çš„ç”¨æˆ·å<code>.github.io</code>å¹¶æ²¡æœ‰å¤±æ•ˆï¼Œåªæ˜¯ç°åœ¨å¤šäº†ä¸€ç§æ–¹å¼æ¥è®¿é—®ä½ çš„åšå®¢ã€‚<h3 id="3-é…ç½®"><a href="#3-é…ç½®" class="headerlink" title="3.é…ç½®"></a>3.é…ç½®</h3><h5 id="3-1é…ç½®SSH-Key"><a href="#3-1é…ç½®SSH-Key" class="headerlink" title="3.1é…ç½®SSH Key"></a>3.1é…ç½®SSH Key</h5>å› ä¸ºä½ æäº¤ä»£ç è‚¯å®šè¦æ‹¥æœ‰ä½ çš„ GitHub æƒé™æ‰å¯ä»¥ï¼Œä½†æ˜¯ç›´æ¥ä½¿ç”¨ç”¨æˆ·åå’Œå¯†ç å¤ªä¸å®‰å…¨äº†ï¼Œæ‰€ä»¥æˆ‘ä»¬ä½¿ç”¨ SSK key æ¥è§£å†³æœ¬åœ°å’ŒæœåŠ¡å™¨çš„è¿æ¥é—®é¢˜ã€‚<br>æ‰“å¼€ä½ çš„ç»ˆç«¯ï¼Œæ•²å…¥ä¸‹é¢çš„å‘½ä»¤<pre class=" language-bash"><code class="language-bash"><span class="token function">cd</span> ~/. <span class="token function">ssh</span></code></pre>è¿™ä¸ªæ˜¯æ£€æŸ¥ä½ æ˜¯å¦æœ‰ SSH key çš„å‘½ä»¤ï¼Œå¦‚æœæç¤º No such file or directory è¯´æ˜ä½ æ˜¯ç¬¬ä¸€æ¬¡ä½¿ç”¨ Gitï¼Œå¾ˆå¥½ï¼Œä½ ç¬¦åˆæˆ‘ä»¬æœ€å¼€å§‹è¯´çš„æœ¬æ•™ç¨‹çš„é˜…è¯»å¯¹è±¡<br>æ¥ä¸‹æ¥æ•²å…¥ä¸‹é¢çš„å‘½ä»¤<pre class=" language-bash"><code class="language-bash">ssh-keygen -t rsa -C <span class="token string">"é‚®ä»¶åœ°å€"</span></code></pre>è¿™é‡Œçš„<code>é‚®ä»¶åœ°å€</code>æœ€å¥½æ˜¯ä½ ä¹‹å‰æ³¨å†Œ<code>GitHub</code>çš„åœ°å€ï¼Œè¿™æ ·æ–¹ä¾¿ä»¥åçš„ç®¡ç†ã€‚æ•²å…¥ä»£ç åè¿ç»­æŒ‰3æ¬¡å›è½¦ï¼Œæœ€ç»ˆä¼šç”Ÿæˆä¸€ä¸ªæ–‡ä»¶åœ¨ç”¨æˆ·ç›®å½•ä¸‹ï¼Œæ‰“å¼€ç”¨æˆ·ç›®å½•ï¼Œæ‰¾åˆ°<code>.ssh\id_rsa.pub</code>æ–‡ä»¶ï¼Œè®°äº‹æœ¬æ‰“å¼€å¹¶å¤åˆ¶é‡Œé¢çš„å†…å®¹ã€‚æ‰“å¼€ä½ çš„ GitHub ä¸»é¡µï¼Œè¿›å…¥ä¸ªäººè®¾ç½® -&gt; SSH and GPG keys -&gt; New SSH keyï¼Œå¹¶å°†åˆšåˆšå¤åˆ¶çš„å†…å®¹å¡«å…¥ Key é‚£é‡Œã€‚Title ä½ å¯ä»¥éšä¾¿èµ·ã€‚æœ€ååˆ«å¿˜äº†ä¿å­˜ã€‚å°±åƒä¸‹é¢çš„å›¾ç‰‡ä¸€æ ·ï¼š<br><img src="/2019/10/13/4/2.png" alt=""><h5 id="3-2-æµ‹è¯•-SSH-keyæ˜¯å¦æˆåŠŸ"><a href="#3-2-æµ‹è¯•-SSH-keyæ˜¯å¦æˆåŠŸ" class="headerlink" title="3.2. æµ‹è¯• SSH keyæ˜¯å¦æˆåŠŸ"></a>3.2. æµ‹è¯• SSH keyæ˜¯å¦æˆåŠŸ</h5>åœ¨ç»ˆç«¯é‡Œé¢æ•²å…¥ä¸€ä¸‹å‘½ä»¤è¡Œå¹¶å›è½¦ï¼š<pre class=" language-bash"><code class="language-bash"><span class="token function">ssh</span> -T git@github.com</code></pre>å¦‚æœæç¤ºAre you sure you want to continue connecting (yes/no)?ï¼Œè¾“å…¥yes å¹¶å›è½¦ï¼Œç„¶åä¼šçœ‹åˆ°ï¼š<pre class=" language-bash"><code class="language-bash">Hi L1cardo<span class="token operator">!</span> You've successfully authenticated, but GitHub does not provide shell access.</code></pre>å½“ä½ çœ‹åˆ°è¿™ä¸ªæ¶ˆæ¯ï¼Œé‚£ä¹ˆæ­å–œä½ ï¼ŒSSH key é…ç½®æˆåŠŸå•¦ï¼<h5 id="3-3-é…ç½®-Git"><a href="#3-3-é…ç½®-Git" class="headerlink" title="3.3. é…ç½® Git"></a>3.3. é…ç½® Git</h5>åœ¨ç»ˆç«¯é‡Œé¢æ•²å…¥ä¸€ä¸‹å‘½ä»¤è¡Œå¹¶å›è½¦ï¼š<pre class=" language-bash"><code class="language-bash"><span class="token function">git</span> config --global user.name <span class="token string">"ä½ çš„ GitHub ç”¨æˆ·å"</span><span class="token function">git</span> config --global user.email  <span class="token string">"ä½ çš„ GitHub æ³¨å†Œé‚®ç®±"</span></code></pre><h3 id="4-æ­å»º-Hexo-åšå®¢"><a href="#4-æ­å»º-Hexo-åšå®¢" class="headerlink" title="4. æ­å»º Hexo åšå®¢"></a>4. æ­å»º Hexo åšå®¢</h3><h5 id="4-1-å®‰è£…-Hexo"><a href="#4-1-å®‰è£…-Hexo" class="headerlink" title="4.1. å®‰è£… Hexo"></a>4.1. å®‰è£… Hexo</h5>åœ¨ç»ˆç«¯é‡Œé¢æ•²å…¥ä¸€ä¸‹å‘½ä»¤è¡Œå¹¶å›è½¦ï¼š<pre><code>npm install hexo-cli -g</code></pre><h5 id="4-2-åˆå§‹åŒ–-Hexo"><a href="#4-2-åˆå§‹åŒ–-Hexo" class="headerlink" title="4.2. åˆå§‹åŒ– Hexo"></a>4.2. åˆå§‹åŒ– Hexo</h5>åœ¨ç”µè„‘çš„æŸä¸ªåœ°æ–¹æ–°å»ºä¸€ä¸ªå­˜æ”¾ä½ åšå®¢æ–‡ä»¶çš„æ–‡ä»¶å¤¹ï¼ˆåå­—å¯ä»¥éšä¾¿å–ï¼‰ï¼Œæ¯”å¦‚æˆ‘çš„æ˜¯/Users/licardo/æ•°æ®/åšå®¢ï¼Œç”±äºè¿™ä¸ªæ–‡ä»¶å¤¹å°†æ¥å°±ä½œä¸ºä½ å­˜æ”¾ä»£ç çš„åœ°æ–¹ï¼Œæ‰€ä»¥æœ€å¥½ä¸è¦éšä¾¿æ”¾ã€‚<br>ç„¶ååœ¨ç»ˆç«¯é‡Œé¢æ‰§è¡Œä¸‹é¢çš„å‘½ä»¤ï¼š<pre class=" language-bash"><code class="language-bash"><span class="token function">cd</span> /Users/licardo/æ•°æ®/åšå®¢hexo init</code></pre>Hexo ä¼šè‡ªåŠ¨ä¸‹è½½ä¸€äº›æ–‡ä»¶åˆ°è¿™ä¸ªç›®å½•ï¼Œç›®å½•ç»“æ„å¦‚ä¸‹å›¾ï¼š<br><img src="/2019/10/13/4/3.png" alt=""><br>ç„¶åè¦è®© Hexo ç”Ÿæˆåšå®¢æ–‡ä»¶ï¼Œåœ¨ç»ˆç«¯é‡Œé¢æ‰§è¡Œï¼š<pre class=" language-bash"><code class="language-bash">hexo g</code></pre>è¿™æ ·ï¼Œä½ çš„åšå®¢å°±ç”Ÿæˆäº†ï¼ŒHexo å°±ä¼šåœ¨ public æ–‡ä»¶å¤¹ç”Ÿæˆç›¸å…³ html æ–‡ä»¶ï¼Œè¿™äº›æ–‡ä»¶å°†æ¥éƒ½æ˜¯è¦æäº¤åˆ° GitHub å»çš„ã€‚<br><img src="/2019/10/13/4/4.png" alt=""><br>æ¥ä¸‹æ¥æˆ‘ä»¬å°±å¯ä»¥ä¸Šä¼ çš„ GitHub äº†ï¼Œä½†æ˜¯æˆ‘ä»¬è¿˜ä»€ä¹ˆéƒ½æ²¡æœ‰å†™ï¼Œä¹Ÿä¸çŸ¥é“åšå®¢éƒ¨ç½²å®Œäº†ä»¥åä¼šæ˜¯ä»€ä¹ˆæ ·å­ï¼Œæ‰€ä»¥æˆ‘ä»¬æœ€å¥½åœ¨æœ¬åœ°å¯åŠ¨é¢„è§ˆæœåŠ¡æ¥çœ‹çœ‹æˆ‘ä»¬çš„åšå®¢çš„æ•ˆæœï¼Œåœ¨ç»ˆç«¯é‡Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š<pre class=" language-bash"><code class="language-bash">hexo s</code></pre>æ‰“å¼€æµè§ˆå™¨è®¿é—® <a href="http://localhost:4000" target="_blank" rel="noopener">http://localhost:4000</a> å³å¯çœ‹åˆ°å†…å®¹ã€‚é»˜è®¤çš„ä¸»é¢˜æ¯”è¾ƒä¸‘ï¼Œæ‰“å¼€æ—¶å°±æ˜¯è¿™ä¸ªæ ·å­ï¼š<br><img src="/2019/10/13/4/5.png" alt=""><h5 id="4-3-ä¿®æ”¹ä¸»é¢˜"><a href="#4-3-ä¿®æ”¹ä¸»é¢˜" class="headerlink" title="4.3. ä¿®æ”¹ä¸»é¢˜"></a>4.3. ä¿®æ”¹ä¸»é¢˜</h5>æ—¢ç„¶é»˜è®¤ä¸»é¢˜å¾ˆä¸‘ï¼Œé‚£æˆ‘ä»¬åˆ«çš„ä¸åšï¼Œé¦–å…ˆæ¥æ›¿æ¢ä¸€ä¸ªå¥½çœ‹ç‚¹çš„ä¸»é¢˜ã€‚è¿™æ˜¯ <a href="https://hexo.io/themes/" target="_blank" rel="noopener">å®˜æ–¹ä¸»é¢˜</a>åº“ï¼Œé‡Œé¢æœ‰å¾ˆå¤šå¥½çœ‹çš„ã€å®ç”¨çš„ä¸»é¢˜ã€‚<br>ä¸ªäººæ¯”è¾ƒå–œæ¬¢çš„ä¸»é¢˜æ˜¯:<code>hexo-theme-matery</code>ï¼Œæˆ‘çš„åšå®¢ä¹Ÿæ˜¯åˆ©ç”¨è¿™ä¸ªä¸»é¢˜æ­å»ºçš„ï¼Œå¯ä»¥çœ‹çœ‹æœ€ç»ˆçš„æ•ˆæœ <a href="https://faber.cc" target="_blank" rel="noopener">https://faber.cc</a><br>é¦–å…ˆä¸‹è½½è¿™ä¸ªä¸»é¢˜ï¼Œåœ¨ç»ˆç«¯é‡Œé¢æ‰§è¡Œä¸‹é¢çš„å‘½ä»¤ï¼š<br>è¯·åœ¨ç¨³å®šç‰ˆä¸æœ€æ–°ç‰ˆä¸­äºŒé€‰ä¸€<pre class=" language-bash"><code class="language-bash"><span class="token function">cd</span> /Users/licardo/æ•°æ®/åšå®¢/themes<span class="token function">git</span> clone https://github.com/blinkfox/hexo-theme-matery.git            <span class="token comment" spellcheck="true"># ç¨³å®šç‰ˆ</span><span class="token function">git</span> clone -b develop https://github.com/blinkfox/hexo-theme-matery.git <span class="token comment" spellcheck="true"># æœ€æ–°ç‰ˆ</span></code></pre>ä¸‹è½½çš„ä¸»é¢˜ä½ å¯ä»¥åœ¨ themes æ–‡ä»¶å¤¹é‡Œé¢çœ‹åˆ°äº†ï¼š<br><img src="/2019/10/13/4/6.png" alt=""><br>ç„¶åä¿®æ”¹<code>Hexo</code>çš„é…ç½®æ–‡ä»¶ï¼Œè®©<code>Hexo</code>ä½¿ç”¨æˆ‘ä»¬ä¸‹è½½çš„ä¸»é¢˜æ¥ç”Ÿæˆåšå®¢ã€‚æ‰¾åˆ°<code>åšå®¢</code>æ ¹ç›®å½•ä¸‹çš„<code>_config.yml</code>æ–‡ä»¶ï¼Œå°†å…¶ä¸­çš„<code>theme: landscape</code>æ”¹ä¸º<code>theme: hexo-theme-matery</code>ï¼Œå°±åƒä¸‹é¢ä¸€æ ·ï¼š<br><img src="/2019/10/13/4/7.png" alt=""><br>ç„¶ååœ¨ç»ˆç«¯é‡Œé¢æ‰§è¡Œä¸‹é¢çš„å‘½ä»¤ï¼š<pre class=" language-bash"><code class="language-bash">hexo cleanhexo ghexo s</code></pre>ç„¶åæ‰“å¼€æµè§ˆå™¨è®¿é—® <a href="http://localhost:4000" target="_blank" rel="noopener">http://localhost:4000</a> å³å¯çœ‹åˆ°æ›´æ”¹ä¸»é¢˜ä¹‹åçš„æ ·å­äº†ã€‚<h5 id="4-4-ä¸Šä¼ åˆ°-GitHub"><a href="#4-4-ä¸Šä¼ åˆ°-GitHub" class="headerlink" title="4.4. ä¸Šä¼ åˆ° GitHub"></a>4.4. ä¸Šä¼ åˆ° GitHub</h5>é¦–å…ˆè¦é…ç½®å¥½<code>Hexo</code>çš„é…ç½®æ–‡ä»¶ï¼Œè®©<code>Hexo</code>çŸ¥é“è¦ä¸Šä¼ åˆ°å“ªé‡Œ<br>ä¿®æ”¹åšå®¢æ–‡ä»¶å¤¹æ ¹ç›®å½•ä¸‹çš„<code>_config.yml</code>ä¸­æœ‰å…³<code>deploy</code>çš„éƒ¨åˆ†ï¼š<br><img src="/2019/10/13/4/8.png" alt=""><br>å°†ä¸Šé¢çš„ L1cardo æ¢æˆä½ è‡ªå·±çš„ GitHub ç”¨æˆ·åå°±å¯ä»¥äº†ã€‚<br>ç„¶åå®‰è£… Hexo ä¸Šä¼ åˆ° GitHub çš„æ’ä»¶ï¼Œç»ˆç«¯é‡Œé¢æ‰§è¡Œï¼š<pre class=" language-bash"><code class="language-bash"><span class="token function">npm</span> <span class="token function">install</span> hexo-deployer-git --save</code></pre>ä¸‡äº‹å…·å¤‡äº†ï¼Œè·ç¦»å°†ä½ çš„åšå®¢éƒ¨ç½²åˆ° GitHub ä¸Šåªå·®ä¸€æ­¥äº†ï¼Œæ¥ä¸‹æ¥å±ä½å‘¼å¸ï¼Œåœ¨ç»ˆç«¯é‡Œæ‰§è¡Œä¸‹é¢çš„å‘½ä»¤ï¼š<pre class=" language-bash"><code class="language-bash">hexo d</code></pre>åšå®¢å·²ç»ä¸Šä¼ åˆ° GitHub äº†ï¼Œé‚£ä¹ˆæˆ‘ä»¬è·ç¦»è®¿é—®ä½ çš„åšå®¢åªå‰©ä¸‹æœ€åä¸€æ­¥äº†ã€‚<h5 id="4-5-è®¾ç½®-GitHub-Pages"><a href="#4-5-è®¾ç½®-GitHub-Pages" class="headerlink" title="4.5. è®¾ç½® GitHub Pages"></a>4.5. è®¾ç½® GitHub Pages</h5><code>GitHub Pages</code>æ˜¯<code>GitHub</code>ä¸ºæˆ‘ä»¬æä¾›çš„é™æ€é¡µé¢æœåŠ¡<code>Hexo</code>å°±æ˜¯ä¸€ä¸ªé™æ€åšå®¢æ¡†æ¶ã€‚æˆ‘ä»¬åªæœ‰å¼€å§‹<code>GitHub Pages</code>æ‰èƒ½ä½¿æˆ‘ä»¬çš„åšå®¢ç”Ÿæ•ˆå¹¶ä¸”èƒ½å¤Ÿè¢«è®¿é—®ã€‚<br>æ‰“å¼€ä½ çš„<code>GitHub</code>åšå®¢ä»“åº“è¿›è¡Œç›¸å…³è®¾ç½®ï¼Œè®¾ç½®æ­¥éª¤å¦‚ä¸‹ï¼š<br><img src="/2019/10/13/4/9.png" alt=""><br><img src="/2019/10/13/4/10.png" alt=""><br>åœ¨è¿™ä¸ªé¡µé¢å¼€å¯<code>GitHub Pages</code>æœåŠ¡å³å¯ã€‚<br>å…¶ä¸­<code>â‘¡</code>æ˜¯æˆ‘ä»¬è‡ªå·±ä¹‹å‰æ³¨å†Œè¿‡çš„åŸŸåï¼Œæˆ‘ä»¬ä¸ä»…å¯ä»¥é€šè¿‡ä½ çš„ç”¨æˆ·å.github.io æ¥è®¿é—®ï¼Œä¹Ÿå¯ä»¥é€šè¿‡è‡ªå®šä¹‰åŸŸåæ¥è®¿é—®æˆ‘ä»¬çš„åšå®¢ã€‚<br>å…¶ä¸­<code>â‘¢</code>æ˜¯å¼ºåˆ¶å¼€å¯ HTTPS çš„æ„æ€ï¼Œè¿™æ ·çš„è¯<code>GitHub</code>ä¼šå¼ºåˆ¶æ—¶å€™<code>HTTPS</code>æ¥å¯åŠ¨ä½ çš„åšå®¢,<code>HTTPS</code>ç›¸æ¯”è¾ƒäº<code>HTTP</code>æ¥è¯´æ›´å®‰å…¨ï¼Œæ‰€ä»¥å»ºè®®å¼€å¯ã€‚<br>ç°åœ¨ä½ å¯ä»¥ç”¨<code>ä½ çš„ç”¨æˆ·å.github.io</code>æˆ–è€…ç”¨ä½ è‡ªå·±æ³¨å†Œçš„åŸŸåæ¥è®¿é—®ä½ çš„åšå®¢äº†ï¼<h5 id="4-6-Hexo-ç›¸å…³å‘½ä»¤"><a href="#4-6-Hexo-ç›¸å…³å‘½ä»¤" class="headerlink" title="4.6. Hexo ç›¸å…³å‘½ä»¤"></a>4.6. Hexo ç›¸å…³å‘½ä»¤</h5>å¸¸è§å‘½ä»¤ï¼š<pre class=" language-bash"><code class="language-bash">hexo new <span class="token string">"postName"</span>      <span class="token comment" spellcheck="true"># æ–°å»ºæ–‡ç« </span>hexo new page <span class="token string">"pageName"</span> <span class="token comment" spellcheck="true"># æ–°å»ºé¡µé¢</span>hexo generate            <span class="token comment" spellcheck="true"># ç”Ÿæˆé™æ€é¡µé¢è‡³publicæ–‡ä»¶å¤¹</span>hexo server              <span class="token comment" spellcheck="true"># å¼€å¯é¢„è§ˆè®¿é—®ç«¯å£ï¼ˆé»˜è®¤ç«¯å£4000ï¼Œ'ctrl + c'å…³é—­serverï¼‰</span>hexo deploy              <span class="token comment" spellcheck="true"># éƒ¨ç½²åˆ°GitHub</span>hexo <span class="token function">help</span>                <span class="token comment" spellcheck="true"># æŸ¥çœ‹å¸®åŠ©</span>hexo version             <span class="token comment" spellcheck="true"># æŸ¥çœ‹Hexoçš„ç‰ˆæœ¬</span></code></pre>ç¼©å†™ï¼š<pre class=" language-bash"><code class="language-bash">hexo n <span class="token operator">==</span> hexo newhexo g <span class="token operator">==</span> hexo generatehexo s <span class="token operator">==</span> hexo serverhexo d <span class="token operator">==</span> hexo deploy</code></pre>ç»„åˆå‘½ä»¤ï¼š<pre class=" language-bash"><code class="language-bash">hexo s -g <span class="token comment" spellcheck="true"># ç”Ÿæˆå¹¶æœ¬åœ°é¢„è§ˆ</span>hexo d -g <span class="token comment" spellcheck="true"># ç”Ÿæˆå¹¶ä¸Šä¼ </span></code></pre><h5 id="4-7-config-yml-æ–‡ä»¶"><a href="#4-7-config-yml-æ–‡ä»¶" class="headerlink" title="4.7. _config.yml æ–‡ä»¶"></a>4.7. _config.yml æ–‡ä»¶</h5>è¿™é‡Œé¢éƒ½æ˜¯ä¸€äº›<code>Hexo</code>çš„å…¨å±€é…ç½®ï¼Œæ¯ä¸ªå‚æ•°çš„æ„æ€éƒ½æ¯”è¾ƒç®€å•æ˜äº†ï¼Œæ‰€ä»¥å°±ä¸ä½œè¯¦ç»†ä»‹ç»äº†ã€‚<br>éœ€è¦ç‰¹åˆ«æ³¨æ„çš„åœ°æ–¹æ˜¯ï¼Œå†’å·åé¢å¿…é¡»æœ‰ä¸€ä¸ªç©ºæ ¼ï¼Œå¦åˆ™å¯èƒ½ä¼šå‡ºé—®é¢˜ã€‚</li></ul><h3 id="5-å†™åšå®¢"><a href="#5-å†™åšå®¢" class="headerlink" title="5. å†™åšå®¢"></a>5. å†™åšå®¢</h3><p>å®šä½åˆ°åšå®¢æ ¹ç›®å½•åœ°å€ï¼Œåœ¨åšå®¢æ ¹ç›®å½•ä¸‹æ‰“å¼€ç»ˆç«¯ï¼Œç„¶åæ‰§è¡Œå‘½ä»¤ï¼š</p><pre class=" language-bash"><code class="language-bash">hexo new <span class="token string">'my-first-blog'</span></code></pre><p>Hexo ä¼šå¸®æˆ‘ä»¬åœ¨ /source/_posts æ–‡ä»¶å¤¹ä¸‹ç”Ÿæˆç›¸å…³ md æ ¼å¼çš„æ–‡ä»¶ï¼š<br><img src="/2019/10/13/4/11.png" alt=""></p><ul><li>æ³¨æ„ï¼Œè¿™é‡Œé¢çš„é»˜è®¤å†…å®¹ä¸€å®šä¸èƒ½åˆ é™¤ï¼Œä¹Ÿå°±æ˜¯ä¸¤ä¸ª<code>---</code>é‡Œé¢çš„å†…å®¹ä¸èƒ½åˆ é™¤ï¼Œè¿™ä¸ªæ˜¯å¸®åŠ©<code>Hexo</code>è¯†åˆ«æ–‡ç« çš„å†…å®¹,<code>Hexo</code>èƒ½æ ¹æ®é‡Œé¢çš„å†…å®¹è‡ªåŠ¨å¸®ä½ æŠŠæ–‡ç« å½’ç±»ï¼Œæ‰“æ ‡ç­¾ç­‰ã€‚ä¸¤ä¸ª<code>---</code>é‡Œé¢çš„å†…å®¹æˆ‘ä»¬ç§°ä¹‹ä¸º <code>Front-matter</code>ï¼Œå…¶å®ä»–æœ‰å¾ˆå¤šå±æ€§ï¼Œä½†æ˜¯æœ€å¸¸ç”¨çš„å°±æ˜¯ä¸Šé¢çš„å‡ ä¸ªäº†ï¼Œæ›´è¯¦ç»†çš„å±æ€§ä½ å¯ä»¥åœ¨ è¿™é‡Œ è¿›è¡ŒæŸ¥çœ‹</li><li>å½“ç„¶ä½ ä¹Ÿå¯ä»¥ä¸ç”¨å‘½ä»¤æ¥åˆ›å»ºæ–°çš„åšå®¢æ–‡ä»¶ï¼Œåªéœ€åœ¨<code>/source/_posts</code>æ–‡ä»¶å¤¹å†…æ–°å»º<code>md</code>æ ¼å¼çš„æ–‡ä»¶è¿›è¡Œå†™åšå®¢å³å¯ã€‚ä½†æ˜¯ä¸€å®šè¦æ³¨æ„ï¼Œå¿…é¡»è¦åŒ…å«<code>---</code>å†…çš„ä¿¡æ¯ï¼ä¹Ÿå°±æ˜¯è¯´å¿…é¡»è¦æœ‰<code>Front-matter</code>!<br>æ¯æ¬¡å†™å®Œåšå®¢éƒ½è¦ä½¿ç”¨<code>Hexo</code>çš„ç›¸å…³å‘½ä»¤ æ¥ç”Ÿæˆç›¸å…³çš„åšå®¢é¡µé¢ï¼Œå¹¶ä¸”éƒ¨ç½²åˆ°<code>GitHub</code>ä¸Šé¢ã€‚</li></ul><ul><li>å†™åšå®¢çš„å·¥å…·ï¼Ÿ<br>å› ä¸º<code>Hexo</code>çš„åšå®¢éƒ½æ˜¯ç”¨<code>md</code>æ ¼å¼æ–‡ä»¶æ¥å†™çš„ï¼Œ<code>md</code>æ ¼å¼æ˜¯<code>Markdown</code>æ–‡ä»¶çš„æ ¼å¼ï¼Œæ‰€ä»¥åªè¦ä½¿ç”¨è§„èŒƒçš„<code>Markdown</code>è¯­æ³•è¿›è¡Œä¹¦å†™å³å¯ã€‚<br>å½“ç„¶ä¹Ÿæ˜¯æœ‰å¥½çš„<code>Markdown</code>ç¼–è¾‘å™¨çš„ï¼Œåœ¨è¿™é‡Œæˆ‘æ¨è<code>Mark Text</code>ï¼Œä¸€ä¸ªè·¨å¹³å°çš„<code>Markdown</code>ç¼–è¾‘å™¨ï¼Œå¼€æºå…è´¹ï¼Œè€Œä¸”å®æ—¶æ¸²æŸ“çš„ç‰¹æ€§ä½¿å¾—å³ä½¿ä¸ä¼š<code>Markdown</code>è¯­æ³•ä¹Ÿèƒ½è¿›è¡Œä¼˜ç¾çš„<code>Markdown</code>å†™ä½œã€‚æˆ‘çš„æ‰€æœ‰çš„ Markdown æ–‡ä»¶éƒ½æ˜¯ç”¨å®ƒæ¥ä¹¦å†™çš„ã€‚</li></ul><ol start="6"><li><p>æœ€ç»ˆæ•ˆæœ<br>å¯ä»¥è®¿é—®æˆ‘çš„åšå®¢æ¥æŸ¥çœ‹æ•ˆæœï¼š<a href="http://faber.cc" target="_blank" rel="noopener">http://faber.cc</a><br>å½“ç„¶ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨å…¶ä»–ä¸»é¢˜ï¼ŒåŠ¨æ‰‹èƒ½åŠ›å¼ºçš„è¯ï¼Œä½ ä¹Ÿå¯ä»¥è‡ªå·±ä¿®æ”¹ä¸€äº›ä¸»é¢˜çš„å†…å®¹ï¼Œå»åˆ›å»ºå±äºä½ è‡ªå·±çš„åšå®¢ï¼</p></li><li><p>å‚è€ƒ<br><a href="http://blog.haoji.me/build-blog-website-by-hexo-github.html" target="_blank" rel="noopener">http://blog.haoji.me/build-blog-website-by-hexo-github.html</a></p></li></ol><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> hexo </category>
          
      </categories>
      
      
        <tags>
            
            <tag> hexo </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>deployæŒç»­é›†æˆ</title>
      <link href="/2019/10/12/deploy/"/>
      <url>/2019/10/12/deploy/</url>
      
        <content type="html"><![CDATA[<h4 id="å®ƒèƒ½åšä»€ä¹ˆ"><a href="#å®ƒèƒ½åšä»€ä¹ˆ" class="headerlink" title="å®ƒèƒ½åšä»€ä¹ˆ"></a>å®ƒèƒ½åšä»€ä¹ˆ</h4><blockquote><ul><li>å°†åº”ç”¨ç¨‹åºéƒ¨ç½²åˆ°å¯é€šè¿‡SSHè®¿é—®çš„å¤šå°æœåŠ¡å™¨</li><li>å…‹éš†é¡¹ç›®çš„gitå­˜å‚¨åº“</li><li>å®‰è£…ä½œæ›²å®¶ä¾èµ–é¡¹</li><li>è¿è¡Œä»»æ„çš„bashå‘½ä»¤</li><li>è¿™äº›æ­¥éª¤ä¸­çš„ä»»ä½•ä¸€ä¸ªéƒ½èƒ½ä¼˜é›…åœ°å¤„ç†æ•…éšœ</li><li>ä¿ç•™è®¸å¤šä»¥å‰çš„éƒ¨ç½²</li><li>ç›‘è§†cronjobsæ­£åœ¨è¿è¡Œ</li><li>å…è®¸é€šè¿‡Webhookè§¦å‘éƒ¨ç½²</li></ul></blockquote><h3 id="ä¸€ã€å®‰è£…deployer"><a href="#ä¸€ã€å®‰è£…deployer" class="headerlink" title="ä¸€ã€å®‰è£…deployer"></a>ä¸€ã€å®‰è£…deployer</h3><h6 id="1-è¦å®‰è£…Deployerï¼Œåªéœ€è¦ä»Githubå…‹éš†ä»£ç ï¼Œä½¿ç”¨Composerå®‰è£…ä¾èµ–é¡¹å¹¶è¿è¡ŒåŒ…å«çš„è„šæœ¬ä»¥å¯åŠ¨å¹¶è¿è¡Œæ‰€æœ‰å†…å®¹ï¼š"><a href="#1-è¦å®‰è£…Deployerï¼Œåªéœ€è¦ä»Githubå…‹éš†ä»£ç ï¼Œä½¿ç”¨Composerå®‰è£…ä¾èµ–é¡¹å¹¶è¿è¡ŒåŒ…å«çš„è„šæœ¬ä»¥å¯åŠ¨å¹¶è¿è¡Œæ‰€æœ‰å†…å®¹ï¼š" class="headerlink" title="1.è¦å®‰è£…Deployerï¼Œåªéœ€è¦ä»Githubå…‹éš†ä»£ç ï¼Œä½¿ç”¨Composerå®‰è£…ä¾èµ–é¡¹å¹¶è¿è¡ŒåŒ…å«çš„è„šæœ¬ä»¥å¯åŠ¨å¹¶è¿è¡Œæ‰€æœ‰å†…å®¹ï¼š"></a>1.è¦å®‰è£…Deployerï¼Œåªéœ€è¦ä»Githubå…‹éš†ä»£ç ï¼Œä½¿ç”¨Composerå®‰è£…ä¾èµ–é¡¹å¹¶è¿è¡ŒåŒ…å«çš„è„šæœ¬ä»¥å¯åŠ¨å¹¶è¿è¡Œæ‰€æœ‰å†…å®¹ï¼š</h6><pre class=" language-bash"><code class="language-bash">ä»£ç åœ°å€ä¸ºï¼šhttps://github.com/REBELinBLUE/deployer.gitå®‰è£…ä¾èµ–<span class="token function">apt-get</span> <span class="token function">install</span> beanstalkd<span class="token function">apt-get</span> <span class="token function">install</span> supervisor<span class="token function">wget</span> https://getcomposer.org/composer.phar<span class="token function">mv</span> composer.phar composer<span class="token function">sudo</span> <span class="token function">mv</span> composer /usr/local/bin/</code></pre><h6 id="2-æ£€æŸ¥phpç‰ˆæœ¬"><a href="#2-æ£€æŸ¥phpç‰ˆæœ¬" class="headerlink" title="2.æ£€æŸ¥phpç‰ˆæœ¬"></a>2.æ£€æŸ¥phpç‰ˆæœ¬</h6><h3 id="äºŒã€æ‹‰å–ä»£ç "><a href="#äºŒã€æ‹‰å–ä»£ç " class="headerlink" title="äºŒã€æ‹‰å–ä»£ç "></a>äºŒã€æ‹‰å–ä»£ç </h3><h6 id="1-æ‹‰å–ä»£ç "><a href="#1-æ‹‰å–ä»£ç " class="headerlink" title="1.æ‹‰å–ä»£ç "></a>1.æ‹‰å–ä»£ç </h6><pre class=" language-bash"><code class="language-bash"><span class="token function">git</span> clone https://github.com/REBELinBLUE/deployer.git deployer</code></pre><h6 id="2-æŸ¥çœ‹æœ€æ–°ç‰ˆæœ¬"><a href="#2-æŸ¥çœ‹æœ€æ–°ç‰ˆæœ¬" class="headerlink" title="2.æŸ¥çœ‹æœ€æ–°ç‰ˆæœ¬"></a>2.æŸ¥çœ‹æœ€æ–°ç‰ˆæœ¬</h6><pre class=" language-bash"><code class="language-bash"><span class="token function">git</span> checkout <span class="token operator">&lt;</span>æœ€æ–°ç‰ˆæœ¬<span class="token operator">></span> ä¾‹å¦‚ï¼šgit checkout 0.0.47</code></pre><h3 id="ä¸‰ã€è¿è¡Œå®‰è£…ç¨‹åº"><a href="#ä¸‰ã€è¿è¡Œå®‰è£…ç¨‹åº" class="headerlink" title="ä¸‰ã€è¿è¡Œå®‰è£…ç¨‹åº"></a>ä¸‰ã€è¿è¡Œå®‰è£…ç¨‹åº</h3><h6 id="1-å®‰è£…ä¾èµ–é¡¹"><a href="#1-å®‰è£…ä¾èµ–é¡¹" class="headerlink" title="1.å®‰è£…ä¾èµ–é¡¹"></a>1.å®‰è£…ä¾èµ–é¡¹</h6><pre class=" language-bash"><code class="language-bash">$ <span class="token function">mkdir</span> vendor$ composer <span class="token function">install</span> -o --no-dev$ <span class="token function">npm</span> <span class="token function">install</span> --production</code></pre><h6 id="2-ç¡®ä¿å­˜å‚¨å’Œä¸Šä¼ ç›®å½•æ˜¯å¯å†™çš„"><a href="#2-ç¡®ä¿å­˜å‚¨å’Œä¸Šä¼ ç›®å½•æ˜¯å¯å†™çš„" class="headerlink" title="2.ç¡®ä¿å­˜å‚¨å’Œä¸Šä¼ ç›®å½•æ˜¯å¯å†™çš„"></a>2.ç¡®ä¿å­˜å‚¨å’Œä¸Šä¼ ç›®å½•æ˜¯å¯å†™çš„</h6><pre class=" language-bash"><code class="language-bash">$ <span class="token function">chmod</span> -R 777 storage</code></pre><h6 id="3-è¿è¡Œå®‰è£…ç¨‹åºå¹¶æŒ‰ç…§è¯´æ˜è¿›è¡Œå®‰è£…"><a href="#3-è¿è¡Œå®‰è£…ç¨‹åºå¹¶æŒ‰ç…§è¯´æ˜è¿›è¡Œå®‰è£…" class="headerlink" title="3.è¿è¡Œå®‰è£…ç¨‹åºå¹¶æŒ‰ç…§è¯´æ˜è¿›è¡Œå®‰è£…"></a>3.è¿è¡Œå®‰è£…ç¨‹åºå¹¶æŒ‰ç…§è¯´æ˜è¿›è¡Œå®‰è£…</h6><pre class=" language-bash"><code class="language-bash">php artisan app:install</code></pre><h3 id="å››ã€é…ç½®nginx"><a href="#å››ã€é…ç½®nginx" class="headerlink" title="å››ã€é…ç½®nginx"></a>å››ã€é…ç½®nginx</h3><pre class=" language-bash"><code class="language-bash">upstream websocket <span class="token punctuation">{</span><span class="token comment" spellcheck="true"># If you are using SSL, make sure the upstream server name</span><span class="token comment" spellcheck="true"># corresponds to the certificate's server name(s).</span>server 127.0.0.1:6001<span class="token punctuation">;</span><span class="token punctuation">}</span>server <span class="token punctuation">{</span>listen 80<span class="token punctuation">;</span>server_name deployer.app<span class="token punctuation">;</span>root <span class="token string">"/var/www/deployer/public"</span><span class="token punctuation">;</span>charset utf-8<span class="token punctuation">;</span>access_log off<span class="token punctuation">;</span>error_log /var/log/nginx/deployer.app-error.log error<span class="token punctuation">;</span>sendfile off<span class="token punctuation">;</span>client_max_body_size 100m<span class="token punctuation">;</span>location / <span class="token punctuation">{</span>index index.php<span class="token punctuation">;</span>try_files <span class="token variable">$uri</span> <span class="token variable">$uri</span>/ /index.php?<span class="token variable">$query_string</span><span class="token punctuation">;</span><span class="token punctuation">}</span>location ~ \.php$ <span class="token punctuation">{</span>fastcgi_split_path_info ^<span class="token punctuation">(</span>.+\.php<span class="token punctuation">)</span><span class="token punctuation">(</span>/.+<span class="token punctuation">)</span>$<span class="token punctuation">;</span>fastcgi_pass unix:/var/run/php/php7.0-fpm.sock<span class="token punctuation">;</span>fastcgi_index index.php<span class="token punctuation">;</span>include fastcgi_params<span class="token punctuation">;</span>fastcgi_param SCRIPT_FILENAME <span class="token variable">$document_root</span><span class="token variable">$fastcgi_script_name</span><span class="token punctuation">;</span>fastcgi_intercept_errors off<span class="token punctuation">;</span>fastcgi_buffer_size 16k<span class="token punctuation">;</span>fastcgi_buffers 4 16k<span class="token punctuation">;</span><span class="token punctuation">}</span>location /socket.io <span class="token punctuation">{</span>proxy_set_header Upgrade <span class="token variable">$http_upgrade</span><span class="token punctuation">;</span>proxy_set_header Connection <span class="token string">"upgrade"</span><span class="token punctuation">;</span>proxy_http_version 1.1<span class="token punctuation">;</span>proxy_set_header X-Forwarded-For <span class="token variable">$proxy_add_x_forwarded_for</span><span class="token punctuation">;</span>proxy_set_header Host <span class="token variable">$host</span><span class="token punctuation">;</span><span class="token comment" spellcheck="true"># if you are using SSL, below line should be 'proxy_pass https://websocket;'</span>proxy_pass http://websocket<span class="token punctuation">;</span><span class="token punctuation">}</span>location ~* /\.<span class="token punctuation">(</span>?<span class="token operator">!</span>well-known\/<span class="token punctuation">)</span> <span class="token punctuation">{</span>deny all<span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token punctuation">}</span></code></pre><h3 id="äº”ã€é…ç½®supervisor"><a href="#äº”ã€é…ç½®supervisor" class="headerlink" title="äº”ã€é…ç½®supervisor"></a>äº”ã€é…ç½®supervisor</h3><pre class=" language-bash"><code class="language-bash">$ <span class="token function">cd</span> /var/www/deployer$ php artisan queue:work --queue<span class="token operator">=</span>deployer-high,deployer-low --sleep<span class="token operator">=</span>3 --tries<span class="token operator">=</span>1 --daemon$ php artisan queue:work --queue<span class="token operator">=</span>deployer-default --sleep<span class="token operator">=</span>3 --tries<span class="token operator">=</span>1 --daemon$ node socket.js<span class="token punctuation">[</span>program:deployer<span class="token punctuation">]</span>command<span class="token operator">=</span>php artisan queue:work --queue<span class="token operator">=</span>deployer-high,deployer-low --sleep<span class="token operator">=</span>3 --tries<span class="token operator">=</span>1 --daemondirectory<span class="token operator">=</span>/var/www/deployerprocess_name<span class="token operator">=</span>queue_%<span class="token punctuation">(</span>process_num<span class="token punctuation">)</span>snumprocs<span class="token operator">=</span>3numprocs_start<span class="token operator">=</span>0stdout_logfile<span class="token operator">=</span>/var/log/supervisor/deployer-%<span class="token punctuation">(</span>process_num<span class="token punctuation">)</span>s-stdout.logstderr_logfile<span class="token operator">=</span>/var/log/supervisor/deployer-%<span class="token punctuation">(</span>process_num<span class="token punctuation">)</span>s-stderr.logstderr_logfile_maxbytes<span class="token operator">=</span>1MBstdout_logfile_maxbytes<span class="token operator">=</span>1MBredirect_stderr<span class="token operator">=</span>trueautostart<span class="token operator">=</span>trueautorestart<span class="token operator">=</span>true<span class="token punctuation">[</span>program:deployer-socketio<span class="token punctuation">]</span>command<span class="token operator">=</span>node socket.jsdirectory<span class="token operator">=</span>/var/www/deployernumprocs<span class="token operator">=</span>1autostart<span class="token operator">=</span>trueautorestart<span class="token operator">=</span>trueenvironment<span class="token operator">=</span>HOME<span class="token operator">=</span><span class="token string">"/var/www/deployer"</span>,NODE_ENV<span class="token operator">=</span><span class="token string">"production"</span>stderr_logfile<span class="token operator">=</span>/var/log/supervisor/deployer-socket-stderr.logstdout_logfile<span class="token operator">=</span>/var/log/supervisor/deployer-socket-stdout.logstderr_logfile_maxbytes<span class="token operator">=</span>1MBstdout_logfile_maxbytes<span class="token operator">=</span>1MB<span class="token punctuation">[</span>program:deployer-broadcast<span class="token punctuation">]</span>command<span class="token operator">=</span>php artisan queue:work --queue<span class="token operator">=</span>deployer-default --sleep<span class="token operator">=</span>3 --tries<span class="token operator">=</span>1 --daemondirectory<span class="token operator">=</span>/var/www/deployernumprocs<span class="token operator">=</span>1stderr_logfile<span class="token operator">=</span>/var/log/supervisor/deployer-broadcast-stderr.logstdout_logfile<span class="token operator">=</span>/var/log/supervisor/deployer-broadcast-stdout.logstderr_logfile_maxbytes<span class="token operator">=</span>1MBstdout_logfile_maxbytes<span class="token operator">=</span>1MBredirect_stderr<span class="token operator">=</span>trueautostart<span class="token operator">=</span>trueautorestart<span class="token operator">=</span>true</code></pre><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> æŒç»­é›†æˆ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æŒç»­é›†æˆ </tag>
            
            <tag> CI/CD </tag>
            
            <tag> php </tag>
            
            <tag> å‰ç«¯ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>liunxå®‰è£…å‡çº§python3.0</title>
      <link href="/2019/10/11/python/"/>
      <url>/2019/10/11/python/</url>
      
        <content type="html"><![CDATA[<h2 id="1ã€å®‰è£…ä¾èµ–åŒ…"><a href="#1ã€å®‰è£…ä¾èµ–åŒ…" class="headerlink" title="1ã€å®‰è£…ä¾èµ–åŒ…"></a>1ã€å®‰è£…ä¾èµ–åŒ…</h2><h5 id="1ï¼‰é¦–å…ˆå®‰è£…gccç¼–è¯‘å™¨ï¼Œgccæœ‰äº›ç³»ç»Ÿç‰ˆæœ¬å·²ç»é»˜è®¤å®‰è£…ï¼Œé€šè¿‡-gcc-â€“version-æŸ¥çœ‹ï¼Œæ²¡å®‰è£…çš„å…ˆå®‰è£…gcc"><a href="#1ï¼‰é¦–å…ˆå®‰è£…gccç¼–è¯‘å™¨ï¼Œgccæœ‰äº›ç³»ç»Ÿç‰ˆæœ¬å·²ç»é»˜è®¤å®‰è£…ï¼Œé€šè¿‡-gcc-â€“version-æŸ¥çœ‹ï¼Œæ²¡å®‰è£…çš„å…ˆå®‰è£…gcc" class="headerlink" title="1ï¼‰é¦–å…ˆå®‰è£…gccç¼–è¯‘å™¨ï¼Œgccæœ‰äº›ç³»ç»Ÿç‰ˆæœ¬å·²ç»é»˜è®¤å®‰è£…ï¼Œé€šè¿‡  gcc â€“version  æŸ¥çœ‹ï¼Œæ²¡å®‰è£…çš„å…ˆå®‰è£…gcc"></a>1ï¼‰é¦–å…ˆå®‰è£…gccç¼–è¯‘å™¨ï¼Œgccæœ‰äº›ç³»ç»Ÿç‰ˆæœ¬å·²ç»é»˜è®¤å®‰è£…ï¼Œé€šè¿‡  gcc â€“version  æŸ¥çœ‹ï¼Œæ²¡å®‰è£…çš„å…ˆå®‰è£…gcc</h5><pre class=" language-bash"><code class="language-bash">yum -y <span class="token function">install</span> gcc</code></pre><h5 id="2ï¼‰å®‰è£…å…¶å®ƒä¾èµ–åŒ…ï¼Œï¼ˆæ³¨ï¼šä¸è¦ç¼ºå°‘ï¼Œå¦åˆ™æœ‰å¯èƒ½å®‰è£…pythonå‡ºé”™ï¼Œpython3-7-0ä»¥ä¸‹çš„ç‰ˆæœ¬å¯ä¸è£…-libffi-devel-ï¼‰"><a href="#2ï¼‰å®‰è£…å…¶å®ƒä¾èµ–åŒ…ï¼Œï¼ˆæ³¨ï¼šä¸è¦ç¼ºå°‘ï¼Œå¦åˆ™æœ‰å¯èƒ½å®‰è£…pythonå‡ºé”™ï¼Œpython3-7-0ä»¥ä¸‹çš„ç‰ˆæœ¬å¯ä¸è£…-libffi-devel-ï¼‰" class="headerlink" title="2ï¼‰å®‰è£…å…¶å®ƒä¾èµ–åŒ…ï¼Œï¼ˆæ³¨ï¼šä¸è¦ç¼ºå°‘ï¼Œå¦åˆ™æœ‰å¯èƒ½å®‰è£…pythonå‡ºé”™ï¼Œpython3.7.0ä»¥ä¸‹çš„ç‰ˆæœ¬å¯ä¸è£… libffi-devel ï¼‰"></a>2ï¼‰å®‰è£…å…¶å®ƒä¾èµ–åŒ…ï¼Œï¼ˆæ³¨ï¼šä¸è¦ç¼ºå°‘ï¼Œå¦åˆ™æœ‰å¯èƒ½å®‰è£…pythonå‡ºé”™ï¼Œpython3.7.0ä»¥ä¸‹çš„ç‰ˆæœ¬å¯ä¸è£… libffi-devel ï¼‰</h5><pre class=" language-bash"><code class="language-bash">yum -y <span class="token function">install</span> zlib-develbzip2-devel openssl-devel ncurses-devel sqlite-devel readline-devel tk-devel gdbm-devel db4-devel libpcap-devel xz-devel libffi-devel</code></pre><h2 id="2ã€ä¸‹è½½python3-7-3æºç ï¼Œæ ¹æ®éœ€æ±‚ä¸‹è½½"><a href="#2ã€ä¸‹è½½python3-7-3æºç ï¼Œæ ¹æ®éœ€æ±‚ä¸‹è½½" class="headerlink" title="2ã€ä¸‹è½½python3.7.3æºç ï¼Œæ ¹æ®éœ€æ±‚ä¸‹è½½"></a>2ã€ä¸‹è½½python3.7.3æºç ï¼Œæ ¹æ®éœ€æ±‚ä¸‹è½½</h2><h5 id="1ï¼‰å»pythonå®˜ç½‘ä¸‹è½½æºç åŒ…"><a href="#1ï¼‰å»pythonå®˜ç½‘ä¸‹è½½æºç åŒ…" class="headerlink" title="1ï¼‰å»pythonå®˜ç½‘ä¸‹è½½æºç åŒ…"></a>1ï¼‰å»pythonå®˜ç½‘ä¸‹è½½æºç åŒ…</h5><pre class=" language-bash"><code class="language-bash">https://www.python.org/downloads/release/python-373/</code></pre><h2 id="3ã€å»ºç«‹ä¸€ä¸ªç©ºæ–‡ä»¶å¤¹ï¼Œç”¨äºå­˜æ”¾python3ç¨‹åº"><a href="#3ã€å»ºç«‹ä¸€ä¸ªç©ºæ–‡ä»¶å¤¹ï¼Œç”¨äºå­˜æ”¾python3ç¨‹åº" class="headerlink" title="3ã€å»ºç«‹ä¸€ä¸ªç©ºæ–‡ä»¶å¤¹ï¼Œç”¨äºå­˜æ”¾python3ç¨‹åº"></a>3ã€å»ºç«‹ä¸€ä¸ªç©ºæ–‡ä»¶å¤¹ï¼Œç”¨äºå­˜æ”¾python3ç¨‹åº</h2><pre class=" language-bash"><code class="language-bash"><span class="token function">mkdir</span> /usr/local/python3</code></pre><h2 id="4ã€æ‰§è¡Œé…ç½®æ–‡ä»¶ï¼Œç¼–è¯‘ï¼Œç¼–è¯‘å®‰è£…"><a href="#4ã€æ‰§è¡Œé…ç½®æ–‡ä»¶ï¼Œç¼–è¯‘ï¼Œç¼–è¯‘å®‰è£…" class="headerlink" title="4ã€æ‰§è¡Œé…ç½®æ–‡ä»¶ï¼Œç¼–è¯‘ï¼Œç¼–è¯‘å®‰è£…"></a>4ã€æ‰§è¡Œé…ç½®æ–‡ä»¶ï¼Œç¼–è¯‘ï¼Œç¼–è¯‘å®‰è£…</h2><pre class=" language-bash"><code class="language-bash"><span class="token function">cd</span> Python-3.7.0./configure --prefix<span class="token operator">=</span>/usr/local/python3<span class="token function">make</span> <span class="token operator">&amp;&amp;</span> <span class="token function">make</span> <span class="token function">install</span></code></pre><p>å®‰è£…å®Œæˆæ²¡æœ‰æç¤ºé”™è¯¯ä¾¿å®‰è£…æˆåŠŸäº†</p><h2 id="5ã€å»ºç«‹è½¯è¿æ¥"><a href="#5ã€å»ºç«‹è½¯è¿æ¥" class="headerlink" title="5ã€å»ºç«‹è½¯è¿æ¥"></a>5ã€å»ºç«‹è½¯è¿æ¥</h2><pre class=" language-bash"><code class="language-bash"><span class="token function">ln</span> -s /usr/local/python3/bin/python3.7 /usr/bin/python3<span class="token function">ln</span> -s /usr/local/python3/bin/pip3.7 /usr/bin/pip3</code></pre><h2 id="6ã€æµ‹è¯•ä¸€ä¸‹python3æ˜¯å¦å¯ä»¥ç”¨"><a href="#6ã€æµ‹è¯•ä¸€ä¸‹python3æ˜¯å¦å¯ä»¥ç”¨" class="headerlink" title="6ã€æµ‹è¯•ä¸€ä¸‹python3æ˜¯å¦å¯ä»¥ç”¨"></a>6ã€æµ‹è¯•ä¸€ä¸‹python3æ˜¯å¦å¯ä»¥ç”¨</h2><pre class=" language-bash"><code class="language-bash"><span class="token punctuation">[</span>root@mini Python-3.7.0<span class="token punctuation">]</span><span class="token comment" spellcheck="true"># python3</span>Python 3.7.0<span class="token punctuation">(</span>default, Jul282018,22:47:29<span class="token punctuation">)</span></code></pre><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> Python </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Python </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>npmé•œåƒæº</title>
      <link href="/2019/10/11/npm/"/>
      <url>/2019/10/11/npm/</url>
      
        <content type="html"><![CDATA[<h5 id="1ã€å›½å†…ç”¨æˆ·ï¼Œå»ºè®®å°†npmçš„æ³¨å†Œè¡¨æºè®¾ç½®ä¸ºå›½å†…çš„é•œåƒï¼Œå¯ä»¥å¤§å¹…æå‡å®‰è£…é€Ÿåº¦ï¼Œå…ˆæŸ¥çœ‹æœ¬æœºåœ°å€"><a href="#1ã€å›½å†…ç”¨æˆ·ï¼Œå»ºè®®å°†npmçš„æ³¨å†Œè¡¨æºè®¾ç½®ä¸ºå›½å†…çš„é•œåƒï¼Œå¯ä»¥å¤§å¹…æå‡å®‰è£…é€Ÿåº¦ï¼Œå…ˆæŸ¥çœ‹æœ¬æœºåœ°å€" class="headerlink" title="1ã€å›½å†…ç”¨æˆ·ï¼Œå»ºè®®å°†npmçš„æ³¨å†Œè¡¨æºè®¾ç½®ä¸ºå›½å†…çš„é•œåƒï¼Œå¯ä»¥å¤§å¹…æå‡å®‰è£…é€Ÿåº¦ï¼Œå…ˆæŸ¥çœ‹æœ¬æœºåœ°å€"></a>1ã€å›½å†…ç”¨æˆ·ï¼Œå»ºè®®å°†npmçš„æ³¨å†Œè¡¨æºè®¾ç½®ä¸ºå›½å†…çš„é•œåƒï¼Œå¯ä»¥å¤§å¹…æå‡å®‰è£…é€Ÿåº¦ï¼Œå…ˆæŸ¥çœ‹æœ¬æœºåœ°å€</h5><pre class=" language-bash"><code class="language-bash"><span class="token function">npm</span> config get registry</code></pre><h5 id="2ã€å›½å†…ä¼˜ç§€npmé•œåƒæ¨èåŠä½¿ç”¨"><a href="#2ã€å›½å†…ä¼˜ç§€npmé•œåƒæ¨èåŠä½¿ç”¨" class="headerlink" title="2ã€å›½å†…ä¼˜ç§€npmé•œåƒæ¨èåŠä½¿ç”¨"></a>2ã€å›½å†…ä¼˜ç§€npmé•œåƒæ¨èåŠä½¿ç”¨</h5><pre class=" language-bash"><code class="language-bash">æ·˜å®npmé•œåƒ Â·æœç´¢åœ°å€ï¼šhttp://npm.taobao.org/ Â·registryåœ°å€ï¼šhttp://registry.npm.taobao.org/</code></pre><pre class=" language-bash"><code class="language-bash">cnpmjsé•œåƒ Â·æœç´¢åœ°å€ï¼šhttp://cnpmjs.org/ Â·registryåœ°å€ï¼šhttp://r.cnpmjs.org/</code></pre><h5 id="3ã€æ°¸ä¹…é…ç½®"><a href="#3ã€æ°¸ä¹…é…ç½®" class="headerlink" title="3ã€æ°¸ä¹…é…ç½®"></a>3ã€æ°¸ä¹…é…ç½®</h5><pre class=" language-bash"><code class="language-bash"><span class="token function">npm</span> config <span class="token keyword">set</span> registry https://registry.npm.taobao.org</code></pre><script>        document.querySelectorAll('.github-emoji')          .forEach(el => {            if (!el.dataset.src) { return; }            const img = document.createElement('img');            img.style = 'display:none !important;';            img.src = el.dataset.src;            img.addEventListener('error', () => {              img.remove();              el.style.color = 'inherit';              el.style.backgroundImage = 'none';              el.style.background = 'none';            });            img.addEventListener('load', () => {              img.remove();            });            document.body.appendChild(img);          });      </script>]]></content>
      
      
      <categories>
          
          <category> å‰ç«¯ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> npm </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
